<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Installation &mdash; sisl 0.1-2eca529</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="_static/plot_directive.css" type="text/css" />
      <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="_static/sg_gallery.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/custom_styles.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
        <script src="_static/tabs.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tutorials" href="tutorials.html" />
    <link rel="prev" title="References" href="references.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            sisl
          </a>
              <div class="version">
                0.1-2eca529
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog/index.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="contribute.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="other.html">Other resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="cite.html">Citing sisl</a></li>
<li class="toctree-l1"><a class="reference internal" href="publications.html">Publications using sisl</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">References</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#required-dependencies">Required dependencies</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#windows">Windows</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#testing-your-installation">Testing your installation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts/scripts.html">Command line scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="nodes/nodes_intro.html">Nodes and workflows</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Toolboxes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="toolbox/index.html">Toolboxes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Visualization</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="visualization/ase/index.html">ASE</a></li>
<li class="toctree-l1"><a class="reference internal" href="visualization/viz_module/index.html">The <code class="docutils literal notranslate"><span class="pre">sisl.viz</span></code> module</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api/index.html">API documentation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">sisl</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Installation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/installation.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="installation">
<span id="id1"></span><h1>Installation<a class="headerlink" href="#installation" title="Permalink to this heading"></a></h1>
<p>sisl is easy to install using any of your preferred methods.</p>
<section id="required-dependencies">
<h2>Required dependencies<a class="headerlink" href="#required-dependencies" title="Permalink to this heading"></a></h2>
<p>Running sisl requires these versions:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.python.org/">Python</a> 3.7 or above</p></li>
<li><p><a class="reference external" href="https://www.numpy.org/">numpy</a> (1.13 or later)</p></li>
<li><p><a class="reference external" href="https://scipy.org/scipylib/index.html">scipy</a> (1.5 or later)</p></li>
<li><p><a class="reference external" href="https://github.com/Unidata/netcdf4-python">netCDF4-python</a></p></li>
<li><p><a class="reference external" href="https://github.com/pyparsing/pyparsing">pyparsing</a> (1.5.7 or later)</p></li>
</ul>
<p>Optional dependencies:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.pytest.org/en/stable/">pytest</a> (for running the test suite)</p></li>
<li><p><a class="reference external" href="https://github.com/uqfoundation/pathos">pathos</a> (for parallel BrillouinZone calculations)</p></li>
<li><p><a class="reference external" href="https://matplotlib.org/">matplotlib</a></p></li>
<li><p><a class="reference external" href="https://github.com/tqdm/tqdm">tqdm</a> (for displaying progress-bars)</p></li>
<li><p><a class="reference external" href="https://xarray.pydata.org/en/stable/index.html">xarray</a> (for advanced table data structures in certain methods)</p></li>
<li><p><a class="reference external" href="https://plotly.com/python/">plotly</a> (for advanced visualization)</p></li>
</ul>
<p>sisl implements certain methods in Cython which speeds up the execution.
Cython is required if one wishes to re-generate the C-sources with a different
Cython version. Note that this is not a necessary step and should typically only
be considered by developers of Cython modules.</p>
<p id="installation-pip">Installation of the stable sisl releases can be done by following the common conventions
using <code class="code docutils literal notranslate"><span class="pre">pip</span></code> or <code class="code docutils literal notranslate"><span class="pre">conda</span></code> methods:</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--0-input--1" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--1">pip</label><div class="tab-content docutils container">
<p>pip will install from pre-build wheels when they are found, if not it will try and
install from a source-distribution.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>sisl
<span class="c1"># for better analysis</span>
python3<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>sisl<span class="o">[</span>analysis<span class="o">]</span>
<span class="c1"># for advanced plotting functionality</span>
python3<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>sisl<span class="o">[</span>viz<span class="o">]</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--0-input--2" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--2">conda</label><div class="tab-content docutils container">
<p>Conda enviroments are clever, but fragile. It is recommended to contain the
sisl installation in a separate environment to decouple it from other fragile
components. Their inter-dependencies may result in problematic installations.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>create<span class="w"> </span>-n<span class="w"> </span>sisl
conda<span class="w"> </span>activate<span class="w"> </span>sisl
conda<span class="w"> </span>config<span class="w"> </span>--add<span class="w"> </span>channels<span class="w"> </span>conda-forge
conda<span class="w"> </span>install<span class="w"> </span>-c<span class="w"> </span>conda-forge<span class="w"> </span>python<span class="w"> </span>sisl
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--0-input--3" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--3">dev|pip</label><div class="tab-content docutils container">
<p>This is equivalent to a development installation which requires a C and fortran compiler
as well as some other packages:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>setuptools_scm<span class="w"> </span><span class="s2">&quot;scikit-build-core[pyproject]&quot;</span><span class="w"> </span>Cython
python3<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>git+https://github.com/zerothi/sisl.git<span class="w"> </span>--prefix<span class="w"> </span>&lt;prefix&gt;
</pre></div>
</div>
<p>The remaining dependencies should automatically be installed.</p>
</div>
<input class="tab-input" id="tab-set--0-input--4" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--4">dev|conda</label><div class="tab-content docutils container">
<p>Using conda as development environment can be done, but may be a bit more cumbersome
to work with. To install sisl from sources one needs a conda environment with the following
content:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>create<span class="w"> </span>-n<span class="w"> </span>sisl
conda<span class="w"> </span>activate<span class="w"> </span>sisl
conda<span class="w"> </span>config<span class="w"> </span>--add<span class="w"> </span>channels<span class="w"> </span>conda-forge
conda<span class="w"> </span>install<span class="w"> </span>-c<span class="w"> </span>conda-forge<span class="w"> </span>fortran-compiler<span class="w"> </span>c-compiler<span class="w"> </span>python<span class="w"> </span>scikit-build-core<span class="w"> </span>pyproject-metadata
conda<span class="w"> </span>install<span class="w"> </span>-c<span class="w"> </span>conda-forge<span class="w"> </span>cython<span class="w"> </span>scipy<span class="w"> </span>netcdf4<span class="w"> </span>cftime<span class="w"> </span>plotly<span class="w"> </span>matplotlib
</pre></div>
</div>
<p>subsequent installations of sisl should follow <code class="code docutils literal notranslate"><span class="pre">dev|pip</span></code> tab</p>
</div>
<input class="tab-input" id="tab-set--0-input--5" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--5">editable|pip</label><div class="tab-content docutils container">
<p>Editable installs are currently not fully supported by <code class="code docutils literal notranslate"><span class="pre">scikit-build-core</span></code> and
is considered experimental. One <em>may</em> get it to work by doing:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>git+https://github.com/zerothi/sisl.git
<span class="nb">cd</span><span class="w"> </span>sisl
python3<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span>.
bash<span class="w"> </span>tools/fixeditable.bash
</pre></div>
</div>
<p>where the last script should (in theory) correct the editable paths and
ensure a consistent importable editable installation. If this causes
problems, feel free to open up issues.</p>
</div>
</div>
<p>Passing options to the build-system through <code class="code docutils literal notranslate"><span class="pre">pip</span></code> should de done with
the following convention</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>--config-settings<span class="o">=</span>cmake.define.CMAKE_BUILD_PARALLEL_LEVEL<span class="o">=</span><span class="m">5</span><span class="w"> </span>...
</pre></div>
</div>
<p>In the above case the compilation of the C/Fortran sources are compiled in parallel using 5
cores. This may greatly reduce compilation times.</p>
<p>There exists a set of compile time definitions that may be handy for developers.
These are all CMake definitions and can be added like this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>--config-settings<span class="o">=</span>cmake.define.WITH_FORTRAN<span class="o">=</span>YES<span class="w"> </span>.
</pre></div>
</div>
<p>The options are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">WITH_FORTRAN</span></code> default to ON
If OFF, no fortran sources will be compiled, this may be useful in debug
situations, but are required for full support with externally created fortran
files, such as output files from DFT codes.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">WITH_F2PY_REPORT_EXIT</span></code> default to OFF
If ON, the compile definition <code class="docutils literal notranslate"><span class="pre">-DF2PY_REPORT_ATEXIT</span></code> will be set.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">WITH_F2PY_REPORT_COPY</span></code> default to OFF
If ON, error messages will be printed while running when the array size
has some certain size (see <code class="docutils literal notranslate"><span class="pre">F2PY_REPORT_ON_ARRAY_COPY</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">F2PY_REPORT_ON_ARRAY_COPY</span></code> default 10
Minimum (total) number of array elements an array should have before
an error is created when reporting a copy, <code class="docutils literal notranslate"><span class="pre">WITH_F2PY_REPORT_COPY</span></code> must
also be ON for this to take effect.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">WITH_LINE_DIRECTIVES</span></code> default to OFF
Add line-directives when cythonizing sources</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">WITH_GDB</span></code> default to OFF
Add information for the GDB debugger</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">WITH_ANNOTATE</span></code> default to OFF
create annotation output (html format) that can be viewed</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Only developers should play with these flags at install time.</p>
<p>And in particular using <code class="docutils literal notranslate"><span class="pre">WITH_FORTRAN=OFF</span></code> will reduce the functionality
of sisl (no fortran binary file support).</p>
</div>
<section id="windows">
<h3>Windows<a class="headerlink" href="#windows" title="Permalink to this heading"></a></h3>
<p>To install <a class="reference internal" href="api/index.html#module-sisl" title="sisl"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sisl</span></code></a> on Windows one will require a specification of
the compilers used. Typically one may do</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>.<span class="w"> </span>--prefix<span class="o">=</span>&lt;prefix&gt;
</pre></div>
</div>
<p>but sometimes <code class="docutils literal notranslate"><span class="pre">setuptools</span></code> does not intercept the flags in the build process.
Since 3.12 <code class="docutils literal notranslate"><span class="pre">distutils</span></code> has been deprecated and one needs to pass explicit linker flags to the CMake environment.
If problems arise, please help out the community by figuring out how this works on Windows.</p>
<p>Adapt to compilers. For an explanation, see <a class="reference external" href="https://docs.python.org/3/install/index.html#location-and-names-of-config-files">here</a>
or the <a class="reference external" href="https://github.com/zerothi/sisl/issues/244">user issue</a> which spurred this content.</p>
</section>
</section>
<section id="testing-your-installation">
<span id="installation-testing"></span><h2>Testing your installation<a class="headerlink" href="#testing-your-installation" title="Permalink to this heading"></a></h2>
<p>After installation (by either of the above listed methods) you are encouraged
to perform the shipped tests to ensure everything got installed correctly.</p>
<p>Note that <a class="reference external" href="https://docs.pytest.org/en/stable/">pytest</a> needs to be installed to run the tests.
Testing the installation may be done by:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest<span class="w"> </span>--pyargs<span class="w"> </span>sisl
</pre></div>
</div>
<p>The above will run the default test-suite which covers most of the <a class="reference internal" href="api/index.html#module-sisl" title="sisl"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sisl</span></code></a> tool-box.
Additional tests may be runned by cloning the <a class="reference external" href="https://github.com/zerothi/sisl-files">sisl-files</a>
and setting the environment variable <em class="xref py py-obj">SISL_FILES_TESTS</em> as the <code class="docutils literal notranslate"><span class="pre">tests</span></code> path to the repository.</p>
<p>A basic procedure would be:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/zerothi/sisl-files.git
<span class="nv">SISL_FILES_TESTS</span><span class="o">=</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/sisl-files/tests<span class="w"> </span>pytest<span class="w"> </span>--pyargs<span class="w"> </span>sisl
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="references.html" class="btn btn-neutral float-left" title="References" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="tutorials.html" class="btn btn-neutral float-right" title="Tutorials" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2015-2023, Nick Papior.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>