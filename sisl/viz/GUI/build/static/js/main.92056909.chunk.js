(this.webpackJsonpui=this.webpackJsonpui||[]).push([[0],{243:function(t,e,n){t.exports=n(645)},248:function(t,e,n){},249:function(t,e,n){},645:function(t,e,n){"use strict";n.r(e);var a=n(1),s=n.n(a),r=n(16),o=n.n(r),i=(n(248),n(249),n(4)),l=n(5),c=n(7),u=n(8),p=n(11),d=n(12),h=n(3),g=new(function(){function t(){var e=this;Object(i.a)(this,t),this.tabAdress=function(t){return e.tabsAdress+"/"+t},this.plotAdress=function(t){return e.plotsAdress+"/"+t},this._requestToApi=function(t,n,a){fetch(e.apiAdress+t,Object(h.a)({headers:{Accept:"application/json","Content-Type":"application/json"}},n)).then((function(t){return t.json()})).then((function(t){t.statusCode>=400?alert(t.error):(t.plot&&(t=Object(h.a)({},t,{plot:Object(h.a)({},t.plot,{figure:JSON.parse(t.plot.figure)})})),a(t))})).catch((function(t){console.log(t)}))},this._get=function(t,n){var a=n.request,s=n.responseHandler;e._requestToApi(t,Object(h.a)({},a,{method:"GET"}),s)},this._post=function(t,n){var a=n.request,s=n.responseHandler;e._requestToApi(t,Object(h.a)({},a,{method:"POST"}),s)},this._put=function(t,n){var a=n.request,s=n.responseHandler;e._requestToApi(t,Object(h.a)({},a,{method:"PUT"}),s)},this._delete=function(t,n){var a=n.request,s=n.responseHandler;e._requestToApi(t,Object(h.a)({},a,{method:"DELETE"}),s)},this._updateSettings=function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};e._post(t,{request:{body:JSON.stringify({settings:n,action:"updateSettings"})},responseHandler:a})},this._undoSettings=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};e._post(t,{request:{body:JSON.stringify({action:"undoSettings"})},responseHandler:n})},this._save=function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};e._post(t,{request:{body:JSON.stringify(Object(h.a)({action:"save"},n))},responseHandler:a})},this._load=function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};e._post(t,{request:{body:JSON.stringify(Object(h.a)({action:"load"},n))},responseHandler:a})},this.getSessionSettings=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};e._get(e.sessionAdress,{responseHandler:function(e){return t(e.session)}})},this.updateSessionSettings=function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};e._updateSettings(e.sessionAdress,n,(function(t){return a(t.session)}))},this.undoSessionSettings=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};e._undoSettings(e.sessionAdress,(function(t){return n(t.session)}))},this.saveSession=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};e._save(e.sessionAdress,t,(function(e){return n(e.session,t)}))},this.loadSession=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};e._load(e.sessionAdress,t,(function(e){return n(e.session,t)}))},this.getAvailableStructs=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};e._get(e.structsAdress,{responseHandler:function(e){return t(e.structures,e)}})},this.getSessionTabs=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};e._get(e.tabsAdress,{responseHandler:function(e){return t(e.tabs)}})},this.addNewTab=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};e._get(e.newtabAdress,{responseHandler:function(e){return t(e.tabs)}})},this.removeTab=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};e._delete(e.tabAdress(t),{responseHandler:function(t){return n(t.tabs)}})},this.updateTabParams=function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};e._put(e.tabAdress(t),{request:{body:JSON.stringify(n)},responseHandler:function(t){return a(t.tabs)}})},this.updateTabPlots=function(t,n,a){return e.updateTabParams(t,{plots:n},a)},this.setTabLayouts=function(t,n,a){return e.updateTabParams(t,{layouts:n},a)},this.getPlotOptions=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};e._get(e.plotTypesAdress,{responseHandler:function(e){return t(e.plotOptions)}})},this.getPlot=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};e._get(e.plotAdress(t),{responseHandler:function(t){return n(t.plot)}})},this.getNewPlot=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};e._post(e.plotsAdress,{request:{body:JSON.stringify(t)},responseHandler:function(e){return n(e.plot,t)}})},this.updatePlotSettings=function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};e._updateSettings(e.plotAdress(t),n,(function(t){return a(t.plot)}))},this.undoPlotSettings=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};e._undoSettings(e.plotAdress(t),(function(t){return n(t.plot)}))},this.removePlot=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};e._delete(e.plotAdress(t.plotID),{responseHandler:function(e){return n(e.session,t)}})},this.showPlotFullScreen=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};e._post(e.plotAdress(t),{request:{body:JSON.stringify({action:"fullScreen"})},responseHandler:function(t){return n(t.plot)}})},this.askForUpdates=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(t,e){document.dispatchEvent(new CustomEvent("sessionUpdate",{detail:{session:t,justUpdated:e}}))};e._post(e.sessionAdress,{request:{body:JSON.stringify({action:"updatePlots"})},responseHandler:function(e){return t(e.session,e.justUpdated)}})},this.listenForPlotUpdates=function(t){e.stopListeningPlotUpdates();e.listenerID=setTimeout((function n(){e.askForUpdates(),clearTimeout(e.listenerID),e.listenerID=setTimeout(n,t)}),t)},this.stopListeningPlotUpdates=function(){e.listenerID&&clearTimeout(e.listenerID),e.listenerID=void 0},this.apiAdress="http://localhost:4000",this.listenerID=void 0}return Object(l.a)(t,[{key:"sessionAdress",get:function(){return"/sislGUI/session"}},{key:"tabsAdress",get:function(){return"/sislGUI/tab"}},{key:"newtabAdress",get:function(){return this.tabsAdress+"/new"}},{key:"plotsAdress",get:function(){return"/sislGUI/plot"}},{key:"plotTypesAdress",get:function(){return"/sislGUI/plotTypes"}},{key:"structsAdress",get:function(){return"/sislGUI/structs"}}]),t}()),f=function(t){return t.settings.listenForUpdates?g.listenForPlotUpdates(t.settings.updateInterval):g.stopListeningPlotUpdates(),{type:"SET_SESSION",session:t}},m=function(t,e){return{type:"ADD_PLOTS",newPlots:t,tabsIDs:e}},v=function(t){return{type:"SET_STRUCTURES",newStructures:t}},b=function(t){return{type:"SET_SESSION_TABS",tabs:t}},y=function(t){return{type:"SET_ACTIVE_PLOT",activePlot:t}},E=function(t){return{type:"SET_ACTIVE_TAB",activeTab:t}},O=function(t){return{type:"SET_ACTIVE_STRUCTS",structs:t}},S=function(t){return{type:"DEACTIVATE_STRUCT",structID:t}},j=function(t){return{type:"START_LOADING_PLOT",plot:t}},T=function(t){return{type:"END_LOADING_PLOT",plotID:t}},C=function(t){return{type:"SET_ACTIVE_PAGE",pageName:t}},P=function(t){return{type:"SET_ACTIVE_PLOTABLES",plotables:t}},k=function(t){Object(u.a)(n,t);var e=Object(c.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return s.a.createElement(p.Navbar,{brand:s.a.createElement("a",null),alignLinks:"right",className:"transparent z-depth-0"},s.a.createElement(p.NavItem,{className:"blackText",href:"/plots"},"Plots"),s.a.createElement(p.NavItem,{href:"/settings"},s.a.createElement(p.Icon,null,"settings")),s.a.createElement(p.NavItem,{href:"/settings"},s.a.createElement(p.Icon,null,"help")))}}]),n}(a.Component),A=(Object(d.b)(null,(function(t){return{clearSession:function(){return t({type:"CLEAR_SESSION"})}}}))(k),n(648)),w=n(45),I=Object(w.a)(),_=n(242);function N(t){var e=t.component,n=t.isPrivate,a=Object(_.a)(t,["component","isPrivate"]);return n?s.a.createElement(A.a,{to:"/"}):s.a.createElement(A.b,Object.assign({},a,{component:e}))}N.defaultProps={isPrivate:!1};var D=n(19),L=n(22),x=n(9),G=n.n(x),R=n(42),B=n(230),M=n.n(B),U=n(82),H=n(233),F=n(0),V=n(231),z=n(232),q=n(25),K={SHOW_AVAIL_HOTKEYS:{name:"Show available hotkeys",sequence:"shift+?"},GO_TO_SETTINGS:{name:"Go to settings",sequence:"shift+s"},GO_TO_DASHBOARD:{name:"Go to the plot's dashboard",sequence:"shift+d"},SAVE_SESSION:{name:"Save session",sequences:["ctrl+shift+s","ctrl+alt+s"]},LOAD_SESSION:{name:"Load session",sequences:["ctrl+shift+l","ctrl+alt+l"]}},W={global:{MOVE_TO_NEXT_TAB:{name:"Move to next tab",sequence:"shift+t+right"},MOVE_TO_PREVIOUS_TAB:{name:"Move to previous tab",sequence:"shift+t+left"},NEW_TAB:{name:"New tab",sequence:"shift+t",action:"keyup"},TRY:"shift+t+r"}},X={global:{MOVE_TO_NEXT_TAB:{name:"Move to next tab",sequence:"shift+right"},MOVE_TO_PREVIOUS_TAB:{name:"Move to previous tab",sequence:"shift+left"}}},J={GO_TO_PLOT_EDITING:{name:"Edit current plot",sequence:"e"},GO_TO_PLOT_METHODS:{name:"Go to current plot methods",sequence:"m"},FULL_SCREEN:{name:"See current plot in full screen in a different browser's tab",sequence:"f"},REMOVE_PLOT:{name:"Remove current plot",sequences:["del","backspace"]},UNDO_PLOT_SETTINGS:{name:"Undo current plot settings",sequence:"ctrl+z"}},Y={SUBMIT_SETTINGS:{name:"Submit this group's settings",sequence:"shift+enter"}},Q={global:{UNDO_SETTINGS:{name:"Undo settings",sequence:"ctrl+z"},SUBMIT_ALL_SETTINGS:{name:"Submit all settings",sequence:"shift+enter"}}},$=n(35),Z=function(t){Object(u.a)(n,t);var e=Object(c.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).hotKeysHandlers={GO_TO_PLOT_EDITING:function(){return a.goToPlotEditing()},GO_TO_PLOT_METHODS:function(){return a.goToPlotMethods()},FULL_SCREEN:function(){return a.showPlotFullScreen()},UNDO_PLOT_SETTINGS:function(){return a.undoSettings()},REMOVE_PLOT:function(){return a.removePlot()}},a.undoSettings=function(){g.undoPlotSettings(a.props.plot.id,(function(t){a.props.addPlots(Object(L.a)({},t.id,t)),document.dispatchEvent(new Event("newPlot")),$.b.success("Rolled back settings")}))},a.removePlot=function(){g.removePlot({plotID:a.props.plot.id,tabID:a.props.active.tab},(function(t,e){a.props.setSessionTabs(t.tabs),a.props.removePlot(e.plotID)}))},a.goToPlotEditing=function(){a.setPlotAsActive(),a.props.setActivePage("plotTweaking")},a.goToPlotMethods=function(){a.setPlotAsActive(),a.props.setActivePage("plotMethods")},a.setPlotAsActive=function(){a.props.setActivePlot(a.props.plot)},a.showPlotFullScreen=function(){g.showPlotFullScreen(a.props.plot.id)},a.state={isLoading:!1},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t=this;document.addEventListener("plotResize",(function(e){e.detail.id!=t.props.plot.id&&"all"!=e.detail.id||t.setState({cou:Math.random()})}))}},{key:"render",value:function(){var t=this;if(this.state.isLoading||!this.props.plot)return s.a.createElement(p.Card,{className:"plotcard",style:{borderRadius:15}},s.a.createElement(p.Row,{style:{textAlign:"center"}},s.a.createElement(V.CircleLoader,{color:"#36D7B7"})),s.a.createElement("div",null,"We are working hard to load your plot."));var e=this.props.plot.figure.layout,n=this.props.plot.settings.paper_bgcolor||"white";if(this.props.active.plot&&this.props.active.plot.id==this.props.plot.id){n=this.props.active.plot.settings.paper_bgcolor||"white";var a=G.a.groupBy(this.props.active.plot.params,"group").layout.reduce((function(e,n){return e[n.key]=t.props.active.plot.settings[n.key],e}),{}),r=Object(z.unflatten)(a,{delimiter:"_"});e=Object(h.a)({},e,{},a,{xaxis:Object(h.a)({},e.xaxis,{},r.xaxis),yaxis:Object(h.a)({},e.yaxis,{},r.yaxis)})}return s.a.createElement(q.HotKeys,{keyMap:J,handlers:this.hotKeysHandlers,style:Object(h.a)({width:"100%",height:"100%",display:"flex",flexDirection:"column",borderRadius:3,overflow:"hidden",background:n,paddingTop:5},this.props.style)},s.a.createElement("div",{style:{flex:1}},s.a.createElement(M.a,{ref:function(e){t.plotlyRef=e},useResizeHandler:!0,style:{width:"100%",height:"100%"},data:this.props.plot.figure.data,layout:Object(h.a)({autosize:!0},e),frames:this.props.plot.figure.frames,onClick:function(t){},onUpdate:function(t){},config:{responsive:!0}})),s.a.createElement("div",{style:{display:"flex",paddingLeft:10,paddingRight:20},className:"card-action"},s.a.createElement(F.b.Provider,{value:{size:25,style:{margin:5}}},s.a.createElement("div",{style:{flex:1,textAlign:"left"}},s.a.createElement("a",{"data-tip":"Full screen (f)",href:"#",onClick:this.showPlotFullScreen},s.a.createElement(U.d,null))),s.a.createElement("div",null,s.a.createElement("a",{"data-tip":"Methods (m)",href:"#",onClick:this.goToPlotMethods},s.a.createElement(H.a,null)),s.a.createElement("a",{"data-tip":"Edit (e)",href:"#",onClick:this.goToPlotEditing},s.a.createElement(U.b,null)),s.a.createElement("a",{"data-tip":"Export data",href:"#"},s.a.createElement(U.c,null)),s.a.createElement("a",{"data-tip":"Remove (supr)",href:"#",onClick:this.removePlot},s.a.createElement(U.a,{color:"red"})))),s.a.createElement(R.a,{multiline:!0,disable:!!this.props.session.settings&&!this.props.session.settings.showTooltips})))}}]),n}(a.Component),tt={setSessionTabs:b,setActivePlot:y,removePlot:function(t,e){return{type:"REMOVE_PLOT",plotID:t,tabID:e}},setActivePage:C,addPlots:m},et=Object(d.b)((function(t){return{plots:t.plots,active:t.active,session:t.session}}),tt)(Z),nt=n(155),at=(n(332),n(333),function(t){Object(u.a)(n,t);var e=Object(c.a)(n);function n(){var t;Object(i.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).updateTabs=function(t){document.dispatchEvent(new CustomEvent("updateTabs",{detail:{tabs:t}}))},t.updateTabParams=function(e,n){g.updateTabParams(e,n,(function(e){t.updateTabs(e)}))},t.removeTab=function(e){var n=G.a.findIndex(t.props.tabs,["id",e]);g.removeTab(e,(function(e){t.props.setActiveTab(e.length>0?e[Math.min(e.length-1,n)].id:void 0),t.updateTabs(e)}))},t.updateTabName=function(e){e.target.blur(),t.updateTabParams(e.target.id,{name:e.target.textContent})},t}return Object(l.a)(n,[{key:"render",value:function(){var t=this,e=this.props.tab,n=e.id,a=e.name,r=n==this.props.active.tab;return s.a.createElement("div",{key:n,className:r?"active plotTab":"plotTab",onClick:r?null:function(){return t.props.setActiveTab(n)}},s.a.createElement("div",{id:n,contentEditable:r,onBlur:this.updateTabName,onKeyUp:function(e){13===e.keyCode&&t.updateTabName(e)}},a),r?s.a.createElement("div",{className:"removeTabBut",onClick:function(){return t.removeTab(n)}},s.a.createElement(p.Icon,null,"remove_circle")):null)}}]),n}(a.Component)),st={setActiveTab:E},rt=Object(d.b)((function(t){return{active:t.active,tabs:t.tabs}}),st)(at),ot=function(t){Object(u.a)(n,t);var e=Object(c.a)(n);function n(){var t;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))).hotKeysHandlers={MOVE_TO_NEXT_TAB:function(){return t.moveThroughTabs("right")},MOVE_TO_PREVIOUS_TAB:function(){return t.moveThroughTabs("left")},NEW_TAB:function(){return t.newTab()},TRY:function(){return console.warn("YES")}},t.moveThroughTabs=function(e){var n,a=t.props.tabs,s=G.a.findIndex(a,["id",t.props.active.tab]);"left"==e?n=0!=s?s-1:a.length-1:"right"==e&&(n=s!=a.length-1?s+1:0),t.props.setActiveTab(a[n].id)},t.updateTabs=function(t){document.dispatchEvent(new CustomEvent("updateTabs",{detail:{tabs:t}}))},t.newTab=function(){g.addNewTab((function(e){t.updateTabs(e),t.props.setActiveTab(G.a.last(e).id)}))},t.noTabsMessage=function(){return s.a.createElement("div",{style:{paddingLeft:20}},s.a.createElement("span",{style:{color:"darkred"}},"You don't seem to have any tab. "),"That's wierd, but if that's what you want...")},t}return Object(l.a)(n,[{key:"render",value:function(){return s.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",marginTop:10,marginBottom:5}},s.a.createElement(q.GlobalHotKeys,{keyMap:W.global,handlers:this.hotKeysHandlers}),s.a.createElement("div",{onClick:this.newTab,"data-tip":"New tab"},s.a.createElement(p.Icon,{className:"newTabIcon small blue-text text-darken-3",style:{paddingRight:0}},"create_new_folder")),0==this.props.tabs.length?this.noTabsMessage():this.props.tabs.map((function(t){return s.a.createElement(rt,{tab:t})})))}}]),n}(a.Component),it={setActiveTab:E},lt=Object(d.b)((function(t){return{tabs:t.tabs,active:t.active}}),it)(ot),ct=Object(nt.WidthProvider)(nt.Responsive),ut=function(t){Object(u.a)(n,t);var e=Object(c.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).state={currentBreakpoint:"lg",compactType:"vertical",mounted:!1,layouts:{lg:[]}},a.emptyDashboard=function(){return null},a.noTabsMessage=function(){return null},a.noPlotsMessage=function(){return s.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"}},s.a.createElement("div",{style:{fontSize:"5em",fontWeight:"bold"}},"This is the plots dashboard."),s.a.createElement("div",{style:{fontSize:"1.2em"}},"We would like to display your plots here, but currently you don't seem to have any"),s.a.createElement("div",{style:{backgroundColor:"white",fontSize:"2em",margin:20,padding:20,paddingLeft:50,paddingRight:50,borderRadius:70}}," You can try to create one by clicking on your structures"))},a.onBreakpointChange=function(t){document.dispatchEvent(new CustomEvent("plotResize",{detail:{id:"all"}}))},a.onResizeStop=function(t,e,n){document.dispatchEvent(new CustomEvent("plotResize",{detail:{id:n.i,higher:e.h>n.h}}))},a.shouldComponentUpdate=function(t){if(!a._plotsInLayout)return!0;var e,n=t.active.tab!=a.props.active.tab;if(!n){var s=G.a.find(a.props.tabs,["id",a.props.active.tab]),r=G.a.find(t.tabs,["id",t.active.tab]);if(!s||!r)return!0;if(!s.layouts||!r.layouts)return!0;if(G.a.isEqual(s.layouts,r.layouts))return!0;if(!G.a.isEqual(a._plotsInLayout,r.plots))return!0;e=!G.a.isEqual(s.plots,r.plots)}return n||e},a.onLayoutChange=function(t,e){a.props.onLayoutChange(t,e),g.setTabLayouts(a.props.active.tab,e,(function(t){a.props.setSessionTabs(t)}))},a.onDrop=function(t){alert("Element parameters: ".concat(JSON.stringify(t)))},a.getLayout=function(){if(!a.props.active.tab)return a.noTabsMessage();var t=G.a.find(a.props.tabs,["id",a.props.active.tab]);if(!t)return a.noTabsMessage();if(0==t.plots.length)return a.noPlotsMessage();var e=t.plots.map((function(t){return a.props.plots[t]}));if((e=e.filter((function(t){return t}))).length!=t.plots.length)return null;var r={lg:t.layouts.lg};return r.lg.length!=e.length&&(r.lg=e.map((function(t){return G.a.find(r.lg,["i",t.id])||n.newPlotLayout(t,r)}))),a._plotsInLayout=t.plots,console.warn(e),s.a.createElement(ct,Object.assign({},a.props,{layouts:r,onBreakpointChange:a.onBreakpointChange,onLayoutChange:a.onLayoutChange,onDrop:a.onDrop,onResizeStop:a.onResizeStop,measureBeforeMount:!1,useCSSTransforms:a.state.mounted,compactType:a.state.compactType,preventCollision:!a.state.compactType,rowHeight:10}),a.generateDOM(r.lg,e))},a._plotsInLayout=!1,a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setState({mounted:!0})}},{key:"generateDOM",value:function(t,e){return G.a.map(t,(function(t,n){return s.a.createElement("div",{key:e[n].id},s.a.createElement(et,{plot:e[n]}))}))}},{key:"render",value:function(){var t=s.a.createElement(lt,null),e=Object(h.a)({},this.hotKeysHandler,{},G.a.pick(t.hotKeysHandler,["MOVE_TO_NEXT_TAB","MOVE_TO_PREVIOUS_TAB"]));return s.a.createElement("div",{style:Object(h.a)({padding:10},this.props.style),className:"scrollView"},s.a.createElement(q.GlobalHotKeys,{keyMap:X.global,handlers:e}),this.getLayout())}}]),n}(s.a.Component);ut.defaultProps={className:"layout",rowHeight:30,onLayoutChange:function(){},cols:{lg:12,md:10,sm:6,xs:4,xxs:2}},ut.newPlotLayout=function(t,e){return{x:t.grid_dims[0]*e.lg.length,y:2,w:t.grid_dims[0],h:t.grid_dims[1],i:t.id}};var pt={setSessionTabs:b,setTabPlots:function(t,e){return{type:"SET_TAB_PLOTS",tabID:t,plots:e}}},dt=Object(d.b)((function(t){return{plots:t.plots,structures:t.structures,tabs:t.tabs,active:t.active,session:t.session}}),pt)(Object(q.withHotKeys)(ut)),ht=(n(334),function(t){Object(u.a)(n,t);var e=Object(c.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).state={},a}return Object(l.a)(n,[{key:"render",value:function(){return s.a.createElement("div",{className:"structTag "+(this.props.struct.selected?"active":""),onClick:this.props.toggleStruct,"data-tip":this.props.struct.path,"data-effect":"solid"},s.a.createElement("div",null,this.props.struct.name.replace(".fdf","")),s.a.createElement("div",{style:{fontSize:"0.7em",color:"gray"}},".../"+this.props.struct.path.split("/").slice(-2,-1)[0]))}}]),n}(a.Component)),gt=function(t){Object(u.a)(n,t);var e=Object(c.a)(n);function n(){var t;Object(i.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).hotKeysHandler={SAVE_SESSION:function(){return t.saveCurrentSession()},LOAD_SESSION:function(){return t.loadSession()}},t.syncWithSession=function(t){document.dispatchEvent(new CustomEvent("syncWithSession",{detail:{session:t}}))},t.showPage=function(e){t.props.setActivePage(e)},t.saveCurrentSession=function(){var e=prompt("Please provide the path to save the session.\n\nRoot directory:\n"+t.props.session.settings.rootDir);e&&g.saveSession({path:e},(function(){$.b.success("Session saved","success")}))},t.loadSession=function(){var e=prompt("Please provide the path of the saved session.\n\nRoot directory:\n"+t.props.session.settings.rootDir);e&&g.loadSession({path:e},(function(e){console.log("Session loaded",e),t.syncWithSession(e)}))},t}return Object(l.a)(n,[{key:"render",value:function(){var t={marginRight:20};return s.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:10,marginTop:10}},s.a.createElement(q.GlobalHotKeys,{keyMap:K,handlers:this.hotKeysHandler}),s.a.createElement(Ot,{to:"plots",style:t}),s.a.createElement(Ot,{to:"settings",style:t}),s.a.createElement(p.Button,{"data-tip":"Save session",style:t,floating:!0,icon:s.a.createElement(p.Icon,null,"save"),onClick:this.saveCurrentSession,className:"yellow darken-1"}),s.a.createElement(p.Button,{"data-tip":"Load session",style:t,floating:!0,icon:s.a.createElement(p.Icon,null,"open_in_new"),onClick:this.loadSession,className:"green"}))}}]),n}(a.Component),ft=function(t){Object(u.a)(n,t);var e=Object(c.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return s.a.createElement(p.Button,{"data-tip":this.props.tooltip,style:this.props.style,floating:!0,icon:s.a.createElement(p.Icon,null,this.props.icon),onClick:this.props.onClick,className:this.props.className})}}]),n}(a.Component),mt={setActivePage:C},vt=Object(d.b)((function(t){return{session:t.session}}),mt)(gt),bt={settings:{icon:"settings",color:"grey",hotKey:"Shift + s"},plots:{icon:"tv",color:"grey",hotKey:"Shift + d"}},yt=function(t){Object(u.a)(n,t);var e=Object(c.a)(n);function n(){var t;Object(i.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).showPage=function(){t.props.setActivePage(t.props.to)},t}return Object(l.a)(n,[{key:"render",value:function(){var t=bt[this.props.to];return s.a.createElement(ft,Object.assign({icon:t.icon,className:t.color,tooltip:"Go to "+this.props.to+" ("+t.hotKey+")",onClick:this.showPage},this.props))}}]),n}(a.Component),Et={setActivePage:C},Ot=Object(d.b)(null,Et)(yt),St=function(t){Object(u.a)(n,t);var e=Object(c.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).state={},a}return Object(l.a)(n,[{key:"render",value:function(){return s.a.createElement("div",{className:"plotableTag "+(this.props.plotable.selected?"active":""),onClick:this.props.togglePlotable,"data-tip":this.props.plotable.path,"data-effect":"solid"},s.a.createElement("div",null,this.props.plotable.name),s.a.createElement("div",{style:{fontSize:"0.7em",color:"gray"}},".../"+this.props.plotable.path.split("/").slice(-2,-1)[0]))}}]),n}(a.Component);var jt=function(t){Object(u.a)(n,t);var e=Object(c.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).togglePlotInitializer=function(t,e){var n,a;console.warn([].concat(Object(D.a)(t),Object(D.a)(e))),0!=[].concat(Object(D.a)(t),Object(D.a)(e)).length?n=!0:a=!0,document.dispatchEvent(new CustomEvent("togglePlotInitializer",{detail:{forceShow:n,forceHide:a}}))},a.selectStructs=function(t){a.props.setActiveStructs(t),a.togglePlotInitializer(t,a.selectedPlotables)},a.selectPlotables=function(t){a.props.setActivePlotables(t),a.togglePlotInitializer(a.selectedStructs,t)},a.toggleStruct=function(t){var e=t.id;a.selectStructs(G.a.xor(a.selectedStructs,[e]))},a.togglePlotable=function(t){var e=t.id;a.selectPlotables(G.a.xor(a.selectedPlotables,[e]))},a.toggleStructDisplay=function(){a.setState({displayStructures:!a.state.displayStructures})},a.togglePlotablesDisplay=function(){a.setState({displayPlotables:!a.state.displayPlotables})},a.toggleAlphabeticSorting=function(){var t,e=(t={},Object(L.a)(t,!1,"asc"),Object(L.a)(t,"asc","desc"),Object(L.a)(t,"desc",!1),t);a.setState({alphabeticSorting:e[a.state.alphabeticSorting]})},a.toggleSearchByFolder=function(){a.setState({searchByFolder:!a.state.searchByFolder})},a.toggleSelectedSorting=function(){a.setState({selectedSorting:!a.state.selectedSorting})},a.toggleAll=function(){var t=Object.keys(a.filterStructs()),e=0==G.a.intersection([].concat(Object(D.a)(a.selectedStructs),Object(D.a)(a.selectedPlotables)),t).length,n=G.a.intersection(Object.keys(a.props.structures),t),s=G.a.intersection(Object.keys(a.props.plotables),t);a.selectStructs(e?[].concat(Object(D.a)(n),Object(D.a)(a.selectedStructs)):a.selectedStructs.filter((function(t){return!n.includes(t)}))),a.selectPlotables(e?[].concat(Object(D.a)(s),Object(D.a)(a.selectedPlotables)):a.selectedPlotables.filter((function(t){return!s.includes(t)})))},a.filterStructs=function(t){t=(t=t||a.state.searchString).includes("*")||t.includes("?")?t:"*"+t+"*";var e={},n=[a.state.displayStructures,a.state.displayPlotables];return[a.props.structures,a.props.plotables].forEach((function(s,r){if(n[r]){var o=1==r,i=Object.keys(s).reduce((function(e,n){var r,i=s[n],l=a.state.searchByFolder?i.path.split("/").slice(-2,-1)[0]:i.name.replace(".fdf","");return r=l,new RegExp("^".concat(t.replace(/\*/g,".*").replace(/\?/g,"."),"$"),"i").test(r)&&(e[n]=Object(h.a)({},i,{selected:[].concat(Object(D.a)(a.selectedStructs),Object(D.a)(a.selectedPlotables)).includes(n),isPlotable:o,id:n})),e}),{});e=Object(h.a)({},e,{},i)}})),e},a.newSearchString=function(t){a.setState({searchString:t})},a.noStructuresMessage=function(){return s.a.createElement("div",null,s.a.createElement("div",{style:{color:"darkred"}},"No structures in the search scope right now."),s.a.createElement("div",null,"Try to change file system settings or initialize the GUI from a different directory"),s.a.createElement(Ot,{to:"settings",style:{marginTop:10}}))},a.noMatchingStructuresMessage=function(){return s.a.createElement("div",null,s.a.createElement("div",{style:{color:"darkred"}},"No structure that matches your search."),s.a.createElement("div",null,"Try to change file system settings or initialize the GUI from a different directory"),s.a.createElement(Ot,{to:"settings",style:{marginTop:10}}))},a.state={searchString:"",alphabeticSorting:!1,selectedSorting:!1,searchByFolder:!1,displayStructures:!0,displayPlotables:!1},a}return Object(l.a)(n,[{key:"render",value:function(){var t=this,e=this.filterStructs();return this.state.alphabeticSorting&&(e=G.a.orderBy(e,"name",this.state.alphabeticSorting)),this.state.selectedSorting&&(e=G.a.orderBy(e,"selected","desc")),s.a.createElement("div",{style:{height:"100vh",overflow:"hidden",display:"flex",flexDirection:"column"}},s.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"}},s.a.createElement(p.TextInput,{noLayout:!0,autocomplete:"off",style:{marginBottom:0},value:this.state.searchString,onChange:function(e){return t.newSearchString(e.target.value)}}),s.a.createElement("div",{style:{width:20}}),s.a.createElement("div",{"data-tip":"Search by folder",className:"structPickerToggle "+(this.state.searchByFolder?"active":""),onClick:this.toggleSearchByFolder,style:{cursor:"pointer"}},s.a.createElement(p.Icon,null,"folder"))),s.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:5}},s.a.createElement("span",{"data-tip":"Show structures",className:"structPickerToggle "+(this.state.displayStructures?"active":""),onClick:this.toggleStructDisplay,style:{cursor:"pointer"}},"Struct"),s.a.createElement("span",{"data-tip":"Show plotables",className:"structPickerToggle "+(this.state.displayPlotables?"active":""),onClick:this.togglePlotablesDisplay,style:{cursor:"pointer"}},"Plotables")),s.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:5}},s.a.createElement("span",{className:"structPickerToggle "+(this.state.alphabeticSorting?"active":""),onClick:this.toggleAlphabeticSorting,style:{cursor:"pointer"}},"A-Z"),s.a.createElement("span",{"data-tip":"Show selected first",className:"structPickerToggle "+(this.state.selectedSorting?"active":""),onClick:this.toggleSelectedSorting,style:{cursor:"pointer"}},"sel"),s.a.createElement("span",{className:"structPickerToggle",onClick:this.toggleAll,style:{cursor:"pointer"}},"All")),0==Object.keys(Object(h.a)({},this.props.structures,{},this.props.plotables)).length?this.noStructuresMessage():0==Object.values(e).length?this.noMatchingStructuresMessage():null,s.a.createElement("div",{className:"scrollView",style:{flex:1}},Object.values(e).map((function(e){return e.isPlotable?s.a.createElement(St,{id:e.id,plotable:e,togglePlotable:function(){return t.togglePlotable(e)}}):s.a.createElement(ht,{id:e.id,struct:e,toggleStruct:function(){return t.toggleStruct(e)}})}))))}},{key:"selectedStructs",get:function(){return this.props.activeStructs||[]}},{key:"selectedPlotables",get:function(){return this.props.activePlotables||[]}}]),n}(a.Component),Tt={setActiveStructs:O,setActivePlotables:P},Ct=Object(d.b)((function(t){return{activeStructs:t.active.structs,activePlotables:t.active.plotables,plotables:t.plotables}}),Tt)(jt),Pt=n(156),kt=n(41),At=n(107),wt={},It=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_SESSION":console.log("REDUX: Setting current session...");var n=e.session;return console.log(n),n;case"CHANGE_SESSION_SETTINGS":console.log("REDUX: Changing current session settings (not submitting yet)...");n=Object(h.a)({},t,{settings:Object(h.a)({},t.settings,Object(L.a)({},e.settingKey,e.value))});return console.log(n),n;case"CLEAR_SESSION":return wt;default:return t}},_t={},Nt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_t,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_PLOTS":console.log("REDUX: Storing a new plot...");var n=Object(h.a)({},t,{},e.newPlots);return console.log(n),n;case"REMOVE_PLOT":return G.a.omit(t,[e.plotID]);case"CLEAR_SESSION":return _t;default:return t}},Dt={},Lt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_STRUCTURES":console.log("REDUX: Setting the new structures...");var n=Object(h.a)({},e.newStructures);return console.log(n),n;default:return t}},xt=[],Gt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_SESSION_TABS":console.log("REDUX: Setting session tabs...");var n=e.tabs;return console.log(n),n;case"SET_TAB_PLOTS":console.log("REDUX: Setting tab plots...");var a=G.a.findIndex(t,["id",e.tabID]);return(n=G.a.cloneDeep(t))[a]=Object(h.a)({},t[a],{plots:e.plots}),console.log(n),n;case"CLEAR_SESSION":return xt;default:return t}},Rt={plot:void 0,tab:void 0,structs:[],plotables:[],page:"plots"},Bt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_ACTIVE_PLOT":console.log("REDUX: Setting active plot...");var n=Object(h.a)({},t,{plot:e.activePlot});return console.log(n),n;case"CHANGE_PLOT_SETTINGS":console.log("REDUX: Changing plot settings (not submitting yet)...");n=Object(h.a)({},t,{plot:Object(h.a)({},t.plot,{settings:Object(h.a)({},t.plot.settings,Object(L.a)({},e.settingKey,e.value))})});return console.log(n),n;case"SET_ACTIVE_TAB":console.log("REDUX: Setting active tab...");n=Object(h.a)({},t,{tab:e.activeTab});return console.log(n),n;case"SET_ACTIVE_STRUCTS":return n=Object(h.a)({},t,{structs:e.structs});case"SET_STRUCTURES":return Object(h.a)({},t,{structs:[]});case"DEACTIVATE_STRUCT":var a=Array.isArray(e.structID)?e.structID:[e.structID];return n=Object(h.a)({},t,{structs:t.structs.filter((function(t){return!a.includes(t)}))});case"SET_ACTIVE_PAGE":return n=Object(h.a)({},t,{page:e.pageName});case"SET_ACTIVE_PLOTABLES":return n=Object(h.a)({},t,{plotables:e.plotables});case"SET_PLOTABLES":return Object(h.a)({},t,{plotables:[]});case"DEACTIVATE_PLOTABLE":var s=Array.isArray(e.plotableID)?e.plotableID:[e.plotableID];return n=Object(h.a)({},t,{plotables:t.plotables.filter((function(t){return!s.includes(t)}))});case"CLEAR_SESSION":return Rt;default:return t}},Mt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{plots:{}},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"START_LOADING_PLOT":console.log("REDUX: Setting active plot...");var n=Object(h.a)({},t,{plots:Object(h.a)({},t.plots,Object(L.a)({},e.plot.id,Object(h.a)({},e.plot,{from:new Date})))});return console.log(n),n;case"END_LOADING_PLOT":console.log("REDUX: Changing plot settings (not submitting yet)...");n=Object(h.a)({},t,{plots:G.a.omit(t.plots,[e.plotID])});return console.log(n),n;default:return t}},Ut={},Ht=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_PLOTABLES":console.log("REDUX: Setting the new plotables...");var n=Object(h.a)({},e.newPlotables);return console.log(n),n;default:return t}},Ft=n(234),Vt=n.n(Ft),zt=n(106);function qt(t,e,n){return Object(zt.a)({key:t,storage:Vt.a,whitelist:e},n)}var Kt=Object(kt.b)({session:It,plots:Nt,structures:Lt,plotables:Ht,tabs:Gt,loading:qt("loading",["plots"],Mt),active:qt("active",["tab","plot"],Bt),browser:Object(At.a)({small:600,medium:992})}),Wt=function(t){return t.active.structs.map((function(e){return t.structures[e]}))},Xt=function(t){return t.active.plotables.map((function(e){return t.plotables[e]}))},Jt=n(43),Yt=function(t){Object(u.a)(n,t);var e=Object(c.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).state={},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t=this;g.getPlotOptions((function(e){return t.setState({plotOptions:e})}))}},{key:"render",value:function(){var t=this,e=G.a.find(this.state.plotOptions,["value",this.props.value]);return s.a.createElement(Jt.a,{options:this.state.plotOptions,placeholder:"Choose the plot type...",isClearable:!0,isSearchable:!0,isMulti:!0,onChange:function(e){return t.props.onChange(e?e.value||e.map((function(t){return t.value})):void 0)},value:e})}}]),n}(a.Component),Qt=Object(d.b)((function(t){return{tabs:t.tabs,active:t.active}}),null)(Yt),$t=function(t){Object(u.a)(n,t);var e=Object(c.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var t=this,e=this.props.tabs.map((function(t){return{label:t.name,value:t.id}})),n=G.a.find(e,["value",this.props.value]);return s.a.createElement(Jt.a,{placeholder:"Choose a tab...",options:e,defaultValue:this.props.active.tab&&G.a.find(this.props.tabs,["id",this.props.active.tab])?{label:G.a.find(this.props.tabs,["id",this.props.active.tab]).name,value:this.props.active.tab}:null,isSearchable:!0,onChange:function(e){return t.props.onChange(e?e.value:void 0)},value:n})}}]),n}(a.Component),Zt=Object(d.b)((function(t){return{tabs:t.tabs,active:t.active}}),null)($t),te=n(48),ee=n.n(te),ne=function(t){Object(u.a)(n,t);var e=Object(c.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var t=this,e=this.props.structure,n=this.props.groupActive;return s.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",marginTop:10,marginBottom:10}},s.a.createElement("div",{style:{color:"darkred",cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center"},onClick:function(){return t.props.deactivateStruct(e.id)}},s.a.createElement(ee.a,null,"remove")),s.a.createElement("div",{style:{cursor:n?"default":"pointer",marginRight:20,marginLeft:20,padding:10,backgroundColor:n?"whitesmoke":"#ccc",borderRadius:3},onClick:n?void 0:this.props.moveStructToActiveGroup},e.name.replace(".fdf","")),s.a.createElement("div",{"data-tip":e.path},".../"+e.path.split("/").slice(-2,-1)[0]))}}]),n}(a.Component),ae={deactivateStruct:S,setActiveStructs:O},se=Object(d.b)((function(t){return{active:t.active}}),ae)(ne),re=[{label:"Plot individually",value:"separatePlot"},{label:"Merge in single plot",value:"jointPlot"},{label:"Build animation",value:"jointAnimation"},{label:"Animation for each",value:"separateAnimation"}],oe=function(t){Object(u.a)(n,t);var e=Object(c.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).state={},a}return Object(l.a)(n,[{key:"render",value:function(){var t=this;return s.a.createElement(Jt.a,{options:re,defaultValue:re[0],placeholder:"Choose the plotting method...",isSearchable:!0,onChange:function(e){return t.props.onChange(e?e.value||e.map((function(t){return t.value})):void 0)},value:G.a.find(re,["value",this.props.value])})}}]),n}(a.Component),ie=Object(d.b)((function(t){return{}}),null)(oe),le=function(t){Object(u.a)(n,t);var e=Object(c.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var t=this,e=this.props.initializingOptions,n=e.tabID,a=e.plotClasses,r=e.mergeMethod,o=this.props.active?{backgroundColor:"#ccc"}:{backgroundColor:"whitesmoke"};return s.a.createElement("div",null,s.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},s.a.createElement("div",{className:"structGroupAction",style:o,onClick:this.props.splitGroup},"Split"),s.a.createElement("div",{className:"structGroupAction",style:o,onClick:this.props.removeGroup},"Remove"),this.props.active?null:s.a.createElement("div",{className:"structGroupAction",style:o,onClick:this.props.setGroupAsActive},"Mark as receptive"),s.a.createElement("div",{style:{flex:1}})),s.a.createElement("div",{className:"row",style:Object(h.a)({transition:"all 300ms",display:"flex",flexWrap:"wrap",padding:20,marginTop:0,marginBottom:20,borderRadius:5,borderTopLeftRadius:0,justifyContent:"center",alignItems:"center"},o)},s.a.createElement("div",{className:"col s12 m4 l3"},this.props.structs.map((function(e){return s.a.createElement(se,{structure:e,groupActive:t.props.active,moveStructToActiveGroup:function(){return t.props.moveStructToActiveGroup(e.id)}})}))),s.a.createElement("div",{className:"col s12 m4 l3"},s.a.createElement(Qt,{value:a,onChange:function(e){return t.props.onInitParamChange("plotClasses",e)}})),s.a.createElement("div",{className:"col s12 m4 l3"},s.a.createElement(Zt,{value:n,onChange:function(e){return t.props.onInitParamChange("tabID",e)}})),s.a.createElement("div",{className:"col s12 m4 l3"},s.a.createElement(ie,{value:r,onChange:function(e){return t.props.onInitParamChange("mergeMethod",e)}}))))}}]),n}(a.Component),ce={deactivateStruct:S},ue=Object(d.b)(null,ce)(le),pe=function(t){Object(u.a)(n,t);var e=Object(c.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).onStructsUpdate=function(t){var e=[],n=a.selectedStructs.filter((function(e){var n=e.id;return!t.includes(n)}));if(0==a.state.structureGroups.length)e=a.markActiveGroup(0,[a.newGroup(a.selectedStructs)]);else{var s=G.a.findIndex(a.state.structureGroups,"active"),r=a.state.structureGroups[s];e=[].concat(Object(D.a)(a.state.structureGroups.slice(0,s)),[Object(h.a)({},r,{structs:[].concat(Object(D.a)(r.structs),Object(D.a)(n))})],Object(D.a)(a.state.structureGroups.slice(s+1)))}e=a.cleanUnselectedFromGroups(e),G.a.find(e,"active")||(e=a.markActiveGroup(e.length-1,e)),a.setState({structureGroups:e})},a.cleanUnselectedFromGroups=function(t){return t.reduce((function(t,e){return(e=Object(h.a)({},e,{structs:e.structs.filter((function(t){var e=t.id;return a.props.active.structs.includes(e)}))})).structs.length>0&&t.push(e),t}),[])},a.newGroup=function(t,e){return Object(h.a)({structs:t||[],initializingOptions:{tabID:a.defaultTabID,plotClasses:[],mergeMethod:"separatePlot"}},e)},a.addGroup=function(t){var e=t.structs,n=a.markActiveGroup(a.state.structureGroups.length,[].concat(Object(D.a)(a.state.structureGroups),[a.newGroup(e)]));a.setState({structureGroups:n})},a.removeGroup=function(t){var e=a.state.structureGroups[t];if(e.structs.length>0)a.props.deactivateStruct(e.structs.map((function(t){return t.id})));else{var n=a.state.structureGroups.filter((function(e,n){return n!=t}));e.active&&(n=a.markActiveGroup(n.length-1,n)),a.setState({structureGroups:n})}},a.splitGroup=function(t){var e=a.state.structureGroups[t],n=e.structs.map((function(t){return a.newGroup([t],G.a.omit(e,["structs"]))})),s=a.state.structureGroups.filter((function(e,n){return n!=t}));s=[].concat(Object(D.a)(s.slice(0,t)),Object(D.a)(n),Object(D.a)(s.slice(t))),e.active&&(s=a.markActiveGroup(t,s)),a.setState({structureGroups:s})},a.markActiveGroup=function(t,e){return(e=e||a.state.structureGroups).map((function(e,n){return Object(h.a)({},e,{active:n==t})}))},a.setGroupAsActive=function(t){a.setState({structureGroups:a.markActiveGroup(t)})},a.moveStructToActiveGroup=function(t){var e=G.a.find(a.selectedStructs,["id",t]),n=a.state.structureGroups.map((function(n){var a=n.active?[].concat(Object(D.a)(n.structs),[e]):n.structs.filter((function(e){return e.id!=t}));return Object(h.a)({},n,{structs:a})}));a.setState({structureGroups:n})},a.updateGroupInitParams=function(t,e,n){var s=a.state.structureGroups.map((function(a,s){return s==t?Object(h.a)({},a,{initializingOptions:Object(h.a)({},a.initializingOptions,Object(L.a)({},e,n))}):a}));a.setState({structureGroups:s})},a.toggleVisibility=function(){document.dispatchEvent(new Event("togglePlotInitializer"))},a.updateInitializingOptions=function(t,e){a.setState(Object(L.a)({},t,e))},a.afterPlot=function(t,e,n){a.props.addPlots(Object(L.a)({},t.id,t)),a.props.informLoadedPlot(n),document.dispatchEvent(new Event("newPlot"))},a.getNewPlot=function(){a.selectedPlotables.forEach((function(t){var e=Object(Pt.v4)();a.props.informLoadingPlot({id:e,name:t.name}),g.getNewPlot({tabID:a.defaultTabID,plotableID:t.id},(function(t,n){return a.afterPlot(t,n,e)}))})),a.state.structureGroups.forEach((function(t){var e=t.structs,n=t.initializingOptions;if(n.mergeMethod.includes("separate")){var s=n.mergeMethod.includes("Animation");e.forEach((function(t){n.plotClasses.forEach((function(e){var r=Object(Pt.v4)();a.props.informLoadingPlot({id:r,struct:t,plotClass:e}),g.getNewPlot({tabID:n.tabID,structID:t.id,animation:s,plotClass:e},(function(t,e){return a.afterPlot(t,e,r)}))}))}))}})),a.toggleVisibility(),a.props.setActiveStructs([]),a.props.setActivePlotables([])},a.renderPlotable=function(t){return s.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",marginTop:10}},s.a.createElement("div",{style:{color:"darkred",cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center"},onClick:function(){return a.props.deactivatePlotable(t.id)}},s.a.createElement(p.Icon,null,"remove")),s.a.createElement("div",{style:{marginRight:20,marginLeft:20,padding:10,backgroundColor:"whitesmoke",borderRadius:3}},t.name),s.a.createElement("div",{"data-tip":t.path},".../"+t.path.split("/").slice(-2,-1)[0]))},a.nothingToPlotMessage=function(){return s.a.createElement("div",null,s.a.createElement("div",{style:{color:"darkred",fontSize:"1.3em",fontWeight:"bold"}},"There's nothing to plot currently"),s.a.createElement("div",null,"Select a structure or plotable to begin."))},a.state={structureGroups:[],plotables:[]},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.onStructsUpdate([])}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidUpdate",value:function(t){G.a.isEqual(t.active.structs,this.props.active.structs)||this.onStructsUpdate(t.active.structs)}},{key:"render",value:function(){var t=this;if(0==this.props.tabs.length)return null;var e=G.a.groupBy(this.selectedPlotables,"plot");return s.a.createElement("div",{className:"plotInitializer",style:this.props.style},s.a.createElement(p.Card,{style:{marginLeft:20,marginRight:20,background:"aliceblue"},actions:s.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"}},s.a.createElement("a",{className:"btn-flat black-text initPlotBtn",onClick:this.toggleVisibility},"Dismiss",s.a.createElement(p.Icon,{right:!0},"close")),s.a.createElement("a",{className:"btn-flat black-text initPlotBtn",onClick:this.getNewPlot},"Initialize plots",s.a.createElement(p.Icon,{right:!0},"done")),s.a.createElement("a",{className:"btn-flat black-text initPlotBtn"},s.a.createElement(p.Icon,null,"refresh")))},this.selectedStructs.length>0?s.a.createElement("div",null,s.a.createElement("div",{className:"sectionHeader"},"Structures"),this.state.structureGroups.map((function(e,n){return s.a.createElement(ue,Object.assign({},e,{onInitParamChange:function(e,a){return t.updateGroupInitParams(n,e,a)},setGroupAsActive:function(){return t.setGroupAsActive(n)},removeGroup:function(){return t.removeGroup(n)},splitGroup:function(){return t.splitGroup(n)},moveStructToActiveGroup:t.moveStructToActiveGroup}))})),s.a.createElement("div",{onClick:this.addGroup},"New Group")):null,this.selectedPlotables.length>0?s.a.createElement("div",{className:"sectionHeader"},"Plotables"):null,Object.keys(e).map((function(n){return s.a.createElement("div",null,s.a.createElement("div",{style:{textAlign:"left",fontSize:"1.1em",marginTop:20}},n),s.a.createElement("div",{style:{marginLeft:30,paddingLeft:20,borderLeftStyle:"solid",borderWidth:1,borderColor:"#ccc"}},e[n].map((function(e){return t.renderPlotable(e)}))))})),0==[].concat(Object(D.a)(this.selectedPlotables),Object(D.a)(this.selectedStructs)).length?this.nothingToPlotMessage():null))}},{key:"selectedStructs",get:function(){return this.props.activeStructs||[]}},{key:"selectedPlotables",get:function(){return this.props.activePlotables||[]}},{key:"defaultTabID",get:function(){return this.props.active.tab?this.props.active.tab:this.props.tabs.length&&this.props.tabs.length>0?this.props.tabs[0].id:void 0}}]),n}(a.Component),de={setActiveTab:E,addPlots:m,setActiveStructs:O,setActivePlotables:P,informLoadingPlot:j,informLoadedPlot:T,deactivateStruct:S,deactivatePlotable:function(t){return{type:"DEACTIVATE_PLOTABLE",plotableID:t}}},he=Object(d.b)((function(t){return{activeStructs:Wt(t),activePlotables:Xt(t),tabs:t.tabs,active:t.active}}),de)(pe),ge=n(157),fe=n.n(ge),me=function(t){Object(u.a)(n,t);var e=Object(c.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).getLoadingTime=function(t){return fe()(fe()().diff(t)).format("mm:ss")},a.state={time:Date.now()},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.interval=setInterval((function(){return t.setState({time:Date.now()})}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var t=this;console.warn(this.props.info);var e=this.props.info.name;!e&&this.props.info.struct&&(e=this.props.info.struct.name?[this.props.info.struct.name.replace(".fdf",""),this.props.info.plotClass].join(" "):"No name");var n=this.getLoadingTime(this.props.info.from);return s.a.createElement("div",{className:"loadingChip"},s.a.createElement("span",{style:{paddingRight:10}},e),s.a.createElement("span",null,n),s.a.createElement("span",{className:"removeTabBut",onClick:function(){return t.props.informLoadedPlot(t.props.info.id)}},"X"))}}]),n}(a.Component),ve={informLoadedPlot:T},be=Object(d.b)(null,ve)(me),ye=function(t){Object(u.a)(n,t);var e=Object(c.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return s.a.createElement("div",{className:"loadingTracker"+(0==Object.values(this.props.loading.plots).length?" empty":"")},Object.values(this.props.loading.plots).map((function(t){return s.a.createElement(be,{info:t})})))}}]),n}(a.Component),Ee=Object(d.b)((function(t){return{loading:t.loading}}),null)(ye),Oe=n(70),Se=n.n(Oe),je=function(t){Object(u.a)(n,t);var e=Object(c.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var t=this,e=this.props.value||"";return s.a.createElement(Se.a,Object.assign({noLayout:!0,value:e,onChange:function(e){return t.props.onChange(e.target.value)},label:this.props.setting.name},this.props.inputField.params))}}]),n}(a.Component),Te=n(151),Ce=n.n(Te),Pe=function(t){Object(u.a)(n,t);var e=Object(c.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var t=this;return s.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},s.a.createElement("div",{style:{paddingBottom:10}},this.props.setting.name),s.a.createElement(Ce.a,Object.assign({id:this.props.setting.key,checked:this.props.value,onChange:function(e){return t.props.onChange(e.target.checked)}},this.props.inputField.params)))}}]),n}(a.Component),ke=function(t){Object(u.a)(n,t);var e=Object(c.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var t=this;return s.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},s.a.createElement("div",{style:{paddingRight:20}},this.props.setting.name+":"),s.a.createElement("div",{style:{flex:1}},s.a.createElement(Jt.a,Object.assign({value:Array.isArray(this.props.value)?this.props.value.map((function(e){return G.a.find(t.props.inputField.params.options,{value:e})})):G.a.find(this.props.inputField.params.options,{value:this.props.value}),onChange:function(e){return t.props.onChange(Array.isArray(e)?e.map((function(t){return t.value})):e?e.value:null)}},this.props.inputField.params))))}}]),n}(a.Component),Ae=n(104),we=function(t){Object(u.a)(n,t);var e=Object(c.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).toggleColorPicker=function(){a.setState({displayColorPicker:!a.state.displayColorPicker})},a.state={tempcolor:void 0},a}return Object(l.a)(n,[{key:"render",value:function(){var t=this,e=this.state.displayColorPicker?s.a.createElement("div",{style:{position:"absolute",bottom:60}},s.a.createElement(Ae.ChromePicker,Object.assign({color:this.state.tempcolor||this.props.value||"black",onChange:function(e){t.setState({tempcolor:e.hex})},onChangeComplete:function(e){t.props.onChange(e.hex),t.setState({tempcolor:void 0})}},this.props.inputField.params))):null;return s.a.createElement("div",{style:{position:"relative",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},s.a.createElement("div",{style:{paddingBottom:10}},this.props.setting.name),s.a.createElement("div",{className:"z-depth-2",onClick:this.toggleColorPicker,style:{width:30,height:30,borderRadius:30,background:this.props.value}}),e)}}]),n}(a.Component),Ie=n(105),_e=(n(217),function(t){Object(u.a)(n,t);var e=Object(c.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var t=this,e=this.props.value||[0,0];return s.a.createElement("div",{style:{paddingLeft:"10%",paddingRight:"10%"}},s.a.createElement("div",{style:{paddingBottom:10}},this.props.setting.name),s.a.createElement(Ie.a,Object.assign({value:e,onChange:function(e){return t.props.onChange(e)}},this.props.inputField.params)))}}]),n}(a.Component)),Ne=function(t){Object(u.a)(n,t);var e=Object(c.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var t=this,e=null!=this.props.value?this.props.value:["",""];return s.a.createElement("div",null,s.a.createElement("div",{style:{paddingBottom:10}},this.props.setting.name),s.a.createElement("div",{style:{display:"flex"}},s.a.createElement("input",Object.assign({style:{marginRight:30,flex:1},type:"number",value:e[0],onChange:function(n){return e[1]>=Number(n.target.value)?t.props.onChange([Be.number(n.target.value),e[1]]):null}},this.props.inputField.params)),s.a.createElement("input",Object.assign({style:{marginLeft:30,flex:1},type:"number",value:e[1],onChange:function(n){return Number(n.target.value)>=e[0]?t.props.onChange([e[0],Be.number(n.target.value)]):null}},this.props.inputField.params))))}}]),n}(a.Component),De=function(t){Object(u.a)(n,t);var e=Object(c.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var t=this,e=this.props.inputField?this.props.inputField.params:{},n=this.props.value||"";return s.a.createElement("div",null,this.props.setting?s.a.createElement("div",{style:{paddingBottom:10}},this.props.setting.name):null,s.a.createElement("input",Object.assign({type:"number",value:n,onChange:function(e){return t.props.onChange(Be.number(e.target.value))},style:this.props.style},e)))}}]),n}(a.Component),Le=function(t){Object(u.a)(n,t);var e=Object(c.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).toggleColorPicker=function(t){a.setState({displayColorPicker:Object(h.a)({},a.state.displayColorPicker,Object(L.a)({},t,!a.state.displayColorPicker[t]))})},a.addQuery=function(){var t=a.props.setting.inputField.queryForm.reduce((function(t,e){return t[e.key]=e.default||null,t}),{});t.active=!0,a.props.onChange([].concat(Object(D.a)(a.props.value),[t]))},a.changeSettingValue=function(t,e,n){var s=G.a.cloneDeep(a.props.value);s[t]=Object(h.a)({},s[t],Object(L.a)({},e,n)),a.props.onChange(s)},a.renderInputField=function(t,e,n){var r,o=t.inputField;if(!o)return null;if("textinput"==o.type)r=s.a.createElement(p.TextInput,Object.assign({noLayout:!0,value:e,onChange:function(e){return a.changeSettingValue(n,t.key,e.target.value)},label:t.name},o.params));else if("switch"==o.type)r=s.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},s.a.createElement("div",{style:{paddingBottom:10}},t.name),s.a.createElement(p.Switch,Object.assign({id:n+t.key,checked:e,onChange:function(e){return a.changeSettingValue(n,t.key,e.target.checked)}},o.params)));else if("dropdown"==o.type)r=s.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},s.a.createElement("div",{style:{paddingRight:20}},t.name+":"),s.a.createElement(Jt.a,Object.assign({className:"querySelect",value:Array.isArray(e)?e.map((function(t){return G.a.find(o.params.options,{value:t})})):G.a.find(o.params.options,{value:e}),onChange:function(e){return a.changeSettingValue(n,t.key,Array.isArray(e)?e.map((function(t){return t.value})):e?e.value:null)}},o.params)));else if("color"==o.type){var i=String(n)+t.key,l=a.state.displayColorPicker&&a.state.displayColorPicker[i]?s.a.createElement("div",{style:{position:"absolute",bottom:60}},s.a.createElement(Ae.ChromePicker,Object.assign({color:e||"#00F0F8FF",onChangeComplete:function(e){return a.changeSettingValue(n,t.key,e.hex)}},o.params))):null;r=s.a.createElement("div",{style:{position:"relative",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},s.a.createElement("div",{style:{paddingBottom:10}},t.name),s.a.createElement("div",{className:"z-depth-2",onClick:function(){return a.toggleColorPicker(i)},style:{width:30,height:30,borderRadius:30,background:e}}),l)}else"rangeslider"==o.type?r=s.a.createElement("div",{style:{paddingLeft:"10%",paddingRight:"10%"}},s.a.createElement("div",{style:{paddingBottom:10}},t.name),s.a.createElement(Ie.a,Object.assign({value:e,onChange:function(e){return a.changeSettingValue(n,t.key,e)}},o.params))):"number"==o.type&&(r=s.a.createElement("div",null,s.a.createElement("div",{style:{paddingBottom:10}},t.name),s.a.createElement("input",Object.assign({type:"number",value:e,onChange:function(e){return a.changeSettingValue(n,t.key,Be.number(e.target.value))}},o.params))));return s.a.createElement("div",{style:Object(h.a)({marginBottom:5,marginTop:5,paddingLeft:10,paddingRight:10,width:a.props.w(o.width)},o.style)},r)},a.renderQuery=function(t,e){return s.a.createElement("div",{key:e,style:{display:"flex",justifyContent:"center",alignItems:"center"}},s.a.createElement(p.Switch,{id:e+"active",checked:t.active,onChange:function(t){return a.changeSettingValue(e,"active",t.target.checked)}}),s.a.createElement(p.Card,{className:"queryCard",style:{flex:1,background:t.active?"#CBFFC0":"#ffc3cd",borderRadius:10}},s.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-around"}},a.props.setting.inputField.queryForm.map((function(n){return a.renderInputField(n,t[n.key],e)})))))},a.state={displayColorPicker:{}},a}return Object(l.a)(n,[{key:"render",value:function(){var t=this;return s.a.createElement("div",null,s.a.createElement("div",{style:{paddingBottom:10}},this.props.setting.name),s.a.createElement("div",null,this.props.value.map((function(e,n){return t.renderQuery(e,n)})),s.a.createElement(p.Button,{"data-tip":"Add a new query",onClick:this.addQuery},"Add Query")))}}]),n}(a.Component),xe=function(t){Object(u.a)(n,t);var e=Object(c.a)(n);function n(){var t;Object(i.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).changeValue=function(e,n){var a=G.a.cloneDeep(t.props.value);a[n]=e,t.props.onChange(a)},t}return Object(l.a)(n,[{key:"render",value:function(){var t=this,e=this.props.inputField.params.vertical?{marginLeft:20,marginRight:20,marginBottom:0,width:70}:{marginLeft:5,marginRight:5,paddingLeft:10,marginBottom:0,width:50},n=Object(h.a)({},e,{paddingLeft:10,textAlign:"center",borderStyle:"solid",borderWidth:1,borderColor:"black"});return s.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},s.a.createElement("div",{style:{paddingBottom:10}},this.props.setting.name),s.a.createElement("div",{style:{display:"flex",flexDirection:this.props.inputField.params.vertical?"column":"row",justifyContent:"center",alignItems:"center"},className:"arrayContainer"},this.props.value.map((function(e,a){return s.a.createElement(De,{value:e,onChange:function(e){return t.changeValue(e,a)},style:n})}))))}}]),n}(a.Component),Ge={textinput:je,switch:Pe,dropdown:ke,color:we,rangeslider:_e,range:Ne,number:De,queries:Le,vector:xe},Re=function(t){Object(u.a)(n,t);var e=Object(c.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).w=function(t){if(t)for(var e=["s","m","l"].map((function(e){return t.indexOf(e)>=0})),n=["small","medium","infinity"].indexOf(a.props.browser.mediaType);n>-1;n--){if(e[n])return G.a.find(t.split(" "),(function(t){return t.indexOf(["s","m","l"][n])>=0})).substr(1)}},a.changeSettingValue=function(t){a.props.changeSettings(a.props.onSettingChangeType,a.props.setting.key,t)},a.state={},a}return Object(l.a)(n,[{key:"render",value:function(){var t=this,e=this.props.setting.inputField,n=Ge[e.type];if(!n)return null;var a=s.a.createElement(n,Object.assign({},this.props,{inputField:e,onChange:function(e){return t.changeSettingValue(e)},w:this.w})),r={"data-tip":(this.props.setting.help?this.props.setting.help+"<br>":"")+"Default: "+(this.props.setting.default||"None"),"data-multiline":!0,"data-effect":"solid","data-place":"color"==e.type?"bottom":"top"},o=null==this.props.value?"rgba(230,230,230,0.4)":void 0;return s.a.createElement("div",Object.assign({onClick:function(e){return e.ctrlKey?t.changeSettingValue(null==t.props.value?t.props.setting.default:null):null},style:Object(h.a)({backgroundColor:o,paddingTop:10,paddingBottom:10,paddingLeft:20,paddingRight:20,borderRadius:3,marginTop:20,marginBottom:20,width:this.w(e.width)},e.style)},r),a)}}]),n}(a.Component);Re.number=function(t){return["","-"].includes(t)?t:Number(t)};var Be=Object(d.b)((function(t){return{browser:t.browser}}),(function(t){return{changeSettings:function(e,n,a){return t(function(t,e,n){return{type:t,settingKey:e,value:n}}(e,n,a))}}}))(Re),Me=n(238),Ue=n.n(Me),He=function(t){Object(u.a)(n,t);var e=Object(c.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).hotKeysHandlers={MOVE_EXPANDED_UP:function(){return a.moveExpanded("up")},MOVE_EXPANDED_DOWN:function(){return a.moveExpanded("down")}},a.moveExpanded=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"down";"up"==e?t=0!=a.state.expanded?a.state.expanded-1:2:"down"==e&&(t=2!=a.state.expanded?a.state.expanded+1:0),console.warn(a.refs),a.setState({expanded:t})},a.renderSettingsGroup=function(t){return t.map((function(t){return t.inputField?s.a.createElement(Be,{key:t.key,setting:t,value:a.props.settings[t.key],onSettingChangeType:a.props.onSettingChangeType}):null}))},a.renderSettingsGroups=function(t){return a.props.paramGroups.map((function(e,n){var r=e.key?e.key:"null",o=t[r];if(!o)return null;var i=G.a.groupBy(o,"subGroup"),l=(e.subGroups?[{key:"null",name:null}].concat(Object(D.a)(e.subGroups)):[{key:"null",name:null}]).map((function(t){var e=t.key,n=t.name;return i[e]?s.a.createElement("div",{key:e},s.a.createElement("div",{style:{paddingBottom:20,fontWeight:"bold",fontSize:"1.3em",textAlign:"left"}},n),s.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",alignItems:"center"}},a.renderSettingsGroup(i[e]))):null})),c=function(){return a.props.submitSettings(o.reduce((function(t,e){return t[e.key]=a.props.settings[e.key],t}),{}))},u={SUBMIT_SETTINGS:c,UNDO_SETTINGS:a.props.undoSettings};return s.a.createElement(p.CollapsibleItem,{key:r,header:e.name,icon:s.a.createElement(p.Icon,null,e.icon)},s.a.createElement(q.HotKeys,{keyMap:Y,handlers:u},s.a.createElement(q.ObserveKeys,null,s.a.createElement("blockquote",{style:{textAlign:"left"}},Ue()(e.description)),l,s.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-around"}},s.a.createElement(p.Button,{onClick:a.props.undoSettings,"data-tip":"This will roll back to previous settings.<br> IT AFFECTS ALL GROUPS OF PARAMETERS, not only this one.",className:"orange",style:{margin:20}},s.a.createElement(p.Icon,{left:!0},"arrow_back_ios"),"Previous settings"),s.a.createElement(p.Button,{"data-tip":"This will restore all settings to the plot's defaults",className:"red",style:{margin:20}},s.a.createElement(p.Icon,{left:!0},"refresh"),"Restore defaults"),s.a.createElement(p.Button,{"data-tip":"This will change the settings and will update everything accordingly.<br> IT ONLY AFFECTS THIS GROUP OF SETTINGS, not all settings",onClick:c,className:"blue",style:{margin:20}},"Submit settings",s.a.createElement(p.Icon,{right:!0},"arrow_forward_ios"))))))}))},a}return Object(l.a)(n,[{key:"render",value:function(){var t=G.a.groupBy(this.props.params,"group");return s.a.createElement(p.Collapsible,{popout:!0,defaultActiveKey:this.props.defaultActiveKey||0},this.renderSettingsGroups(t))}}]),n}(a.Component),Fe=function(t){Object(u.a)(n,t);var e=Object(c.a)(n);function n(){var t;Object(i.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).hotKeysHandlers={UNDO_SETTINGS:function(){return t.undoSettings()},SUBMIT_ALL_SETTINGS:function(){return t.submitSettings("all")}},t.submitSettings=function(e){(e="all")&&(e=t.props.active.plot.settings),t.props.informLoadingPlot(Object(h.a)({id:t.props.active.plot.id},t.props.active.plot,{struct:{name:t.props.active.plot.struct}})),g.updatePlotSettings(t.props.active.plot.id,e,(function(e){t.props.addPlots(Object(L.a)({},e.id,e)),t.props.active.plot.id==e.id&&t.props.setActivePlot(e),$.b.success("Settings submitted"),t.props.informLoadedPlot(e.id),document.dispatchEvent(new Event("newPlot"))}))},t.undoSettings=function(){g.undoPlotSettings(t.props.active.plot.id,(function(e){t.props.addPlots(Object(L.a)({},e.id,e)),t.props.active.plot.id==e.id&&t.props.setActivePlot(e),$.b.success("Rolled back settings")}))},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t=this;g.getSessionSettings((function(e){return t.props.setCurrentSession(e)}))}},{key:"render",value:function(){if(!this.props.active.plot)return null;var t=s.a.createElement(He,{settings:this.props.active.plot.settings,params:this.props.active.plot.params,paramGroups:this.props.active.plot.paramGroups,onSettingChangeType:"CHANGE_PLOT_SETTINGS",submitSettings:this.submitSettings,undoSettings:this.undoSettings});return s.a.createElement("div",{style:Object(h.a)({},this.props.style)},s.a.createElement(q.GlobalHotKeys,{keyMap:Q.global,handlers:this.hotKeysHandlers}),s.a.createElement(p.Row,null,s.a.createElement(p.Col,{className:"s12 l4",style:{height:"90vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},s.a.createElement(et,{plot:this.props.active.plot,style:{height:"80vh"}})),s.a.createElement(p.Col,{className:"s12 l8"},"infinity"==this.props.browser.mediaType?s.a.createElement("div",{className:"scrollView",style:{maxHeight:"90vh"}},t):t)),s.a.createElement(R.a,{multiline:!0,disable:!!this.props.session.settings&&!this.props.session.settings.showTooltips}))}}]),n}(a.Component),Ve={setCurrentSession:f,addPlots:m,setActivePlot:y,setNewStructures:v,informLoadedPlot:T,informLoadingPlot:j},ze=Object(d.b)((function(t){return{plots:t.plots,structures:t.structures,active:t.active,session:t.session,browser:t.browser}}),Ve)(Fe),qe=function(t){Object(u.a)(n,t);var e=Object(c.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).submitSettings=function(t){g.updateSessionSettings(a.props.session.id,t,(function(t){a.props.setCurrentSession(t),document.dispatchEvent(new CustomEvent("syncWithSession",{detail:{session:t}})),$.b.success("Session settings have been updated")}))},a.undoSettings=function(){g.undoSessionSettings(a.props.session.id,(function(t){a.props.setCurrentSession(t),document.dispatchEvent(new CustomEvent("syncWithSession",{detail:{session:t}})),$.b.success("Session settings have been rolled back")}))},a.state={},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t=this;g.getSessionSettings((function(e){return t.props.setCurrentSession(e)}))}},{key:"render",value:function(){return G.a.isEmpty(this.props.session)?null:s.a.createElement("div",{style:Object(h.a)({},this.props.style,{padding:20})},s.a.createElement(He,{defaultActiveKey:1,settings:this.props.session.settings,params:this.props.session.params,paramGroups:this.props.session.paramGroups,onSettingChangeType:"CHANGE_SESSION_SETTINGS",submitSettings:this.submitSettings,undoSettings:this.undoSettings}),s.a.createElement(R.a,{multiline:!0,disable:!!this.props.session.settings&&!this.props.session.settings.showTooltips}))}}]),n}(a.Component),Ke=Object(d.b)((function(t){return{session:t.session}}),(function(t){return{setCurrentSession:function(e){return t(f(e))}}}))(qe),We=n(239),Xe=n.n(We),Je=n(240),Ye=function(t){Object(u.a)(n,t);var e=Object(c.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).applyMethod=function(){},a.renderDetails=function(){return s.a.createElement("div",{style:{transition:"all 1s",maxHeight:a.state.showingDetails?void 0:0,overflow:"hidden"}},s.a.createElement("div",{style:{padding:20,fontSize:13}},s.a.createElement(Xe.a,{source:"All the help\n\n blalbalbal \n\n Parameters\n---------"})),s.a.createElement("div",{onClick:a.applyMethod,style:{cursor:"pointer"}},"APPLY METHOD"))},a.state={showingDetails:!1},a}return Object(l.a)(n,[{key:"render",value:function(){var t=this,e=this.state.showingDetails?"rotate(180deg)":"rotate(0)",n=this.state.showingDetails?"#ccc":"whitesmoke";return s.a.createElement("div",null,s.a.createElement("div",{className:"hoverable",style:{display:"flex",padding:20,cursor:"pointer",justifyContent:"space-between",alignItems:"center",backgroundColor:n,transition:"all 500ms"},onClick:function(){return t.setState({showingDetails:!t.state.showingDetails})}},s.a.createElement("div",null,s.a.createElement("span",{style:{color:"gray",marginRight:10}},"(ctrl+z)"),s.a.createElement("span",{style:{fontWeight:"bold"}},"Method name")),s.a.createElement(Je.a,{style:{transition:"all 500ms",transform:e}})),this.renderDetails())}}]),n}(a.Component),Qe=function(t){Object(u.a)(n,t);var e=Object(c.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return s.a.createElement("div",{style:{textAlign:"left",backgroundColor:"white",borderRadius:3,overflow:"hidden"}},[1,2,3,4].map((function(t){return s.a.createElement(Ye,null)})))}}]),n}(a.Component),$e=function(t){Object(u.a)(n,t);var e=Object(c.a)(n);function n(){var t;Object(i.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).hotKeysHandlers={},t}return Object(l.a)(n,[{key:"render",value:function(){return this.props.active.plot?s.a.createElement("div",{style:Object(h.a)({},this.props.style)},s.a.createElement(q.GlobalHotKeys,{keyMap:Q.global,handlers:this.hotKeysHandlers}),s.a.createElement(p.Row,null,s.a.createElement(p.Col,{className:"s12 l4",style:{height:"90vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},s.a.createElement(et,{plot:this.props.active.plot,style:{height:"80vh"}})),s.a.createElement(p.Col,{className:"s12 l8",style:{paddingTop:100}},s.a.createElement(Qe,{plot:this.props.active.plot}))),s.a.createElement(R.a,{multiline:!0,disable:!!this.props.session.settings&&!this.props.session.settings.showTooltips})):null}}]),n}(a.Component),Ze={setCurrentSession:f,addPlots:m,setActivePlot:y,setNewStructures:v,informLoadedPlot:T,informLoadingPlot:j},tn=Object(d.b)((function(t){return{plots:t.plots,structures:t.structures,active:t.active,session:t.session,browser:t.browser}}),Ze)($e),en=function(t){Object(u.a)(n,t);var e=Object(c.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).hotKeysHandlers={GO_TO_SETTINGS:function(){return a.props.setActivePage("settings")},GO_TO_DASHBOARD:function(){return a.props.setActivePage("plots")},SHOW_AVAIL_HOTKEYS:function(){return console.warn(Object(q.getApplicationKeyMap)())}},a.syncWithSession=function(t){a.updateTabs(),g.getPlotOptions((function(t){return a.setState({plotOptions:t})})),g.getAvailableStructs((function(t,e){var n=e.plotables;a.props.setNewStructures(t),a.props.setNewPlotables(n)})),t?a.props.setCurrentSession(t):g.getSessionSettings((function(t){return a.props.setCurrentSession(t)}))},a.hotKeysListener=function(){},a.updateTabs=function(t){t?a.props.setSessionTabs(t):g.getSessionTabs((function(t){a.props.setSessionTabs(t),G.a.find(t,["id",a.props.active.tab])||a.props.setActiveTab(t.length>0?t[0].id:void 0)}))},a.getNewPlot=function(){a.setState({isLoading:!0}),g.getNewPlot(Object(h.a)({tabID:a.props.active.tab},a.state.plotToInitialize),(function(t,e){a.updateTabs(),a.props.addPlots(Object(L.a)({},t.id,t)),a.togglePlotInitializer(),a.props.setActiveTab(e.tabID),a.setState({isLoading:!1})}))},a.togglePlotInitializer=function(t){var e="plotInitializer"==a.props.active.page;void 0!=t&void 0!=t.detail?(t.detail.forceShow&&!e&&a.props.setActivePage("plotInitializer"),t.detail.forceHide&&e&&a.props.setActivePage("plots")):a.props.setActivePage(e?"plots":"plotInitializer")},a.state={displayPlotInitializer:!1,plotToInitialize:{struct:!1,animation:!1},loadingPlots:[],plotOptions:[]},a.syncWithSession(),document.addEventListener("syncWithSession",(function(t){return a.syncWithSession(t.detail.session)})),document.addEventListener("updateTabs",(function(t){return a.updateTabs(t.detail.tabs)})),document.addEventListener("newPlot",(function(){return a.updateTabs()})),document.addEventListener("sessionUpdate",(function(t){t.detail.justUpdated.forEach((function(t){console.log(t),a.setState({loadingPlots:[].concat(Object(D.a)(a.state.loadingPlots),[t])}),g.getPlot(t,(function(e){a.props.addPlots(Object(L.a)({},e.id,e)),a.setState({loadingPlots:a.state.loadingPlots.filter((function(e){return e!=t}))})}))}))})),a.hotKeysListener(),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.setActivePlot(void 0),this.listener=document.addEventListener("togglePlotInitializer",this.togglePlotInitializer)}},{key:"componentDidUpdate",value:function(){var t=this,e=G.a.find(this.props.tabs,["id",this.props.active.tab]);e&&e.plots.forEach((function(e){t.props.plots[e]||-1!=t.state.loadingPlots.indexOf(e)||(t.setState({loadingPlots:[].concat(Object(D.a)(t.state.loadingPlots),[e])}),g.getPlot(e,(function(n){t.props.addPlots(Object(L.a)({},n.id,n)),t.setState({loadingPlots:t.state.loadingPlots.filter((function(t){return t!=e}))})})))}))}},{key:"render",value:function(){var t={plots:dt,settings:Ke,plotTweaking:ze,plotMethods:tn,plotInitializer:he}[this.props.active.page];return s.a.createElement("div",{style:{marginBottom:0,display:"flex",flexWrap:"wrap"}},s.a.createElement(q.GlobalHotKeys,{keyMap:Object(h.a)({},K),handlers:this.hotKeysHandlers}),s.a.createElement("div",{style:{marginLeft:15,marginRight:15,width:"10vw",minWidth:150}},s.a.createElement(Ct,{structures:this.props.structures})),s.a.createElement("div",{style:{flex:1,height:"100vh",display:"flex",flexDirection:"column"}},s.a.createElement(Ee,null),"plots"==this.props.active.page?s.a.createElement(lt,null):null,s.a.createElement(t,{style:{flex:1}}),s.a.createElement(vt,null)),s.a.createElement($.a,null),s.a.createElement(R.a,{multiline:!0,disable:!!this.props.session.settings&&!this.props.session.settings.showTooltips}))}}]),n}(a.Component),nn={setCurrentSession:f,setActiveTab:E,setSessionTabs:b,setActivePlot:y,addPlots:m,setNewStructures:v,setNewPlotables:function(t){return{type:"SET_PLOTABLES",newPlotables:t}},setActivePage:C},an=Object(d.b)((function(t){return{plots:t.plots,structures:t.structures,tabs:t.tabs,active:t.active,session:t.session}}),nn)(en);function sn(){return s.a.createElement(A.d,null,s.a.createElement(N,{path:"/plots",exact:!0,component:an}),s.a.createElement(N,{path:"/settings",component:Ke}),s.a.createElement(N,{path:"/plotTweaking",component:ze}),s.a.createElement(N,{component:an}))}var rn=n(241),on=function(){var t=Object(kt.c)(Kt,At.b);return{store:t,persistor:Object(zt.b)(t)}}(),ln=on.store,cn=on.persistor;var un=function(){return s.a.createElement(d.a,{store:ln},s.a.createElement(rn.a,{persistor:cn},s.a.createElement("div",{className:"App",style:{display:"flex",flexDirection:"column"}},s.a.createElement("div",{className:"appContent",style:{height:"100vh"}},s.a.createElement(A.c,{history:I},s.a.createElement(sn,null))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(un,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[243,1,2]]]);
//# sourceMappingURL=main.92056909.chunk.js.map