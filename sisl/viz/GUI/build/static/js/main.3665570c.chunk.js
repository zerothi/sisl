(this.webpackJsonpui=this.webpackJsonpui||[]).push([[0],{1438:function(t,e,n){"use strict";n.r(e);var a=n(1),o=n.n(a),s=n(14),r=n.n(s),i=(n(529),n(530),n(87)),l=n(230),c=n(229),u=n(16),p=n.n(u),d=n(17),h=n(10),m={},g=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_SESSION":console.log("REDUX: Setting current session...");var n=e.session;return console.log(n),n;case"CHANGE_SESSION_SETTINGS":console.log("REDUX: Changing current session settings (not submitting yet)...");n=Object(h.a)({},t,{settings:Object(h.a)({},t.settings,Object(d.a)({},e.settingKey,e.value))});return console.log(n),n;case"CLEAR_SESSION":return m;default:return t}},f=n(59),v={},b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_PLOTS":console.log("REDUX: Storing a new plot...");var n=Object(h.a)({},t,{},e.newPlots);return console.log(n),n;case"REMOVE_PLOT":return p.a.omit(t,[e.plotID]);case"CHANGE_PLOT_SETTINGS":console.log("REDUX: Changing plot settings (not submitting yet)...");var a=e.extraParams.plotID;if(!t[a])return f.b.error("You are trying to change the settings of a plot that does not exist"),t;n=Object(h.a)({},t,Object(d.a)({},a,Object(h.a)({},t[a],{unsubmittedSettings:Object(h.a)({},t[a].unsubmittedSettings,Object(d.a)({},e.settingKey,e.value))})));return console.log(n),n;case"CLEAR_SESSION":return v;default:return t}},y={plot:void 0,tab:void 0,structs:[],plotables:[],page:"plots"},E=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_ACTIVE_PLOT":console.log("REDUX: Setting active plot...");var n=Object(h.a)({},t,{plot:e.plotID});return console.log(n),n;case"SET_ACTIVE_TAB":console.log("REDUX: Setting active tab...");n=Object(h.a)({},t,{tab:e.activeTab});return console.log(n),n;case"SET_SESSION":var a=p.a.find(e.session.tabs,["id",t.tab]),o=e.session.tabs.length>0;return a?t:o?Object(h.a)({},t,{tab:e.session.tabs[0].id}):Object(h.a)({},t,{tab:null});case"SET_ACTIVE_STRUCTS":return n=Object(h.a)({},t,{structs:e.structs});case"SET_STRUCTURES":return Object(h.a)({},t,{structs:[]});case"DEACTIVATE_STRUCT":var s=Array.isArray(e.structID)?e.structID:[e.structID];return n=Object(h.a)({},t,{structs:t.structs.filter((function(t){return!s.includes(t)}))});case"SET_ACTIVE_PAGE":return n=Object(h.a)({},t,{page:e.pageName});case"SET_ACTIVE_PLOTABLES":return n=Object(h.a)({},t,{plotables:e.plotables});case"SET_PLOTABLES":return Object(h.a)({},t,{plotables:[]});case"DEACTIVATE_PLOTABLE":var r=Array.isArray(e.plotableID)?e.plotableID:[e.plotableID];return n=Object(h.a)({},t,{plotables:t.plotables.filter((function(t){return!r.includes(t)}))});case"CLEAR_SESSION":return y;default:return t}},O=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{plots:{}},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"START_LOADING_PLOT":console.log("REDUX: Setting active plot...");var n=Object(h.a)({},t,{plots:Object(h.a)({},t.plots,Object(d.a)({},e.plot.id,Object(h.a)({},e.plot,{from:new Date})))});return console.log(n),n;case"END_LOADING_PLOT":console.log("REDUX: Changing plot settings (not submitting yet)...");n=Object(h.a)({},t,{plots:p.a.omit(t.plots,[e.plotID])});return console.log(n),n;default:return t}},S=n(487),j=n.n(S);function T(t,e,n){return Object(c.a)({key:t,storage:j.a,whitelist:e},n)}var C=Object(i.b)({session:g,plots:b,loading:T("loading",["plots"],O),active:T("active",["tab","plot"],E),browser:Object(l.a)({small:600,medium:992})}),P=function(t){return t.active.structs.map((function(e){return t.session.structures[e]}))},k=function(t){return t.active.plotables.map((function(e){return t.session.plotables[e]}))},A=function(t){return t.plots[t.active.plot]},_=n(25),w=n(488),I=n(22),D=n(9),G=n(13),x=n(12),N=n(11),L=n(74),M=n(489),R=n.n(M),V=n(1486),B=n(125),z=n(123),U=n(47),F=n(0),H=(n(538),function(t){return{type:"SET_SESSION",session:t}}),K=function(t,e){return{type:"ADD_PLOTS",newPlots:t,tabsIDs:e}},W=function(t){return{type:"SET_STRUCTURES",newStructures:t}},q=function(t){return{type:"SET_SESSION_TABS",tabs:t}},Y=function(t){return{type:"SET_ACTIVE_PLOT",plotID:t?"string"==typeof t?t:t.id:void 0}},X=function(t){return{type:"SET_ACTIVE_TAB",activeTab:t}},Q=function(t){return{type:"SET_ACTIVE_STRUCTS",structs:t}},J=function(t){return{type:"DEACTIVATE_STRUCT",structID:t}},Z=function(t){return{type:"START_LOADING_PLOT",plot:t}},$=function(t){return{type:"END_LOADING_PLOT",plotID:t}},tt=function(t){return{type:"SET_ACTIVE_PAGE",pageName:t}},et=function(t){return{type:"SET_ACTIVE_PLOTABLES",plotables:t}},nt=n(490),at=n.n(nt),ot=n(491),st=n(1494),rt=function(t){Object(N.a)(n,t);var e=Object(x.a)(n);function n(){return Object(D.a)(this,n),e.apply(this,arguments)}return Object(G.a)(n,[{key:"render",value:function(){var t=this,e=this.props.value||"",n=this.props.label||(this.props.setting?this.props.setting.name:"");return o.a.createElement(st.a,Object.assign({variant:"outlined",value:e,onChange:function(e){return t.props.onChange(e.target.value)},label:n,style:Object(h.a)({width:"100%"},this.props.style)},this.props.inputField?this.props.inputField.params:this.props.params))}}]),n}(a.Component),it=n(1485),lt=function(t){Object(N.a)(n,t);var e=Object(x.a)(n);function n(t){var a;return Object(D.a)(this,n),(a=e.call(this,t)).state={value:""},t.controlClose&&t.controlClose(t.closeToast),a}return Object(G.a)(n,[{key:"componentWillUnmount",value:function(){this.props.callback(this.state.value)}},{key:"render",value:function(){var t=this;return o.a.createElement("div",null,o.a.createElement("div",{style:{paddingBottom:10}},this.props.content),o.a.createElement(rt,{value:this.state.value,onChange:function(e){t.setState({value:e})},label:this.props.inputProps.label}),o.a.createElement(it.a,{onClick:this.props.closeToast},"Submit"))}}]),n}(a.Component),ct=function(t,e,n){Object(f.b)(o.a.createElement(lt,Object.assign({content:t,callback:e},n)),{autoClose:!1,closeOnClick:!1,onClose:function(t){console.warn(t)}})},ut=ct,pt=new function t(){var e=this;Object(D.a)(this,t),this.connect=function(t){t&&(e.apiAddress=t),e.socket=at()(e.apiAddress),e.setupListeners(),e.connectionTimeOut=setTimeout((function(){var t,n,a;t=e.apiAddress,n=function(t){t&&(e.apiAddress=t.trim()),e.socket.connected||(e.disconnect(),e.connect())},a={controlClose:function(t){return e.onConnect(t)}},ct(o.a.createElement("div",null,o.a.createElement("div",null,"Couldn't connect to "+t),o.a.createElement("div",null,"Do you want to specify a different address for the API?"),o.a.createElement("div",null," (http(s)://host:port)")),n,Object(h.a)({inputProps:{label:"New address"}},a))}),3e3),e.socket.connect()},this.disconnect=function(){e.socket.disconnect()},this.on=function(){var t;(t=e.socket).on.apply(t,arguments)},this.onConnect=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];e.on.apply(e,["connect"].concat(n))},this.onDisconnect=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];e.on.apply(e,["disconnect"].concat(n))},this.setupListeners=function(){e.on("connect",(function(){clearTimeout(e.connectionTimeOut),e.requestSession()})),e.on("disconnect",(function(){e.disconnect(),e.connect()})),e.on("auth_required",e.askForAuth),e.on("logged_in",e.requestSession),e.on("error",(function(t){return e.handleError(t,"socket")})),e.on("server_error",(function(t){return e.handleError(t,"server")})),e.on("current_session",(function(t){document.dispatchEvent(new CustomEvent("syncWithSession",{detail:{session:t}}))})),e.on("loading_plot",(function(t){document.dispatchEvent(new CustomEvent("loadingPlot",{detail:t}))})),e.on("plot",(function(t){document.dispatchEvent(new CustomEvent("plot",{detail:{plot:t}}))}))},this.handleError=function(t,e){"server"==e?f.b.error("THERE WAS A PYTHON ERROR:\n"+t):f.b.error(t)},this.askForAuth=function(){e.authenticating||(e.authenticating=!0,ut((function(t){e.socket.emit("login",t),e.authenticating=!1})))},this.requestSession=function(t){e.socket.emit("request_session",t)},this.loadSession=function(t){e.requestSession(t)},this.newProcessId=ot.v4,this._sessionMethod=function(t,n,a){for(var o,s=arguments.length,r=new Array(s>3?s-3:0),i=3;i<s;i++)r[i-3]=arguments[i];(o=e.socket).emit.apply(o,["apply_method_on_session",t,n].concat(r))},this.updateSessionSettings=function(t){e._sessionMethod("update_settings",t)},this.undoSessionSettings=function(){e._sessionMethod("undo_settings")},this.addTab=function(t){e._sessionMethod("add_tab",{name:t})},this.removeTab=function(t){e._sessionMethod("remove_tab",{tabID:t})},this.updateTab=function(t,n){e._sessionMethod("update_tab",{tabID:t,newParams:n})},this.setTabLayouts=function(t,n){e.updateTab(t,{layouts:n})},this.saveSession=function(t){e._sessionMethod("save",{path:t})},this.getPlot=function(t){document.dispatchEvent(new CustomEvent("updatingPlot",{detail:{plot_id:t}})),e.socket.emit("get_plot",t)},this.newPlot=function(t){e._sessionMethod("new_plot",t)},this.removePlot=function(t){e._sessionMethod("remove_plot",null,null,t)},this.movePlot=function(t,n){e._sessionMethod("move_plot",null,null,t,n)},this.mergePlots=function(t,n){e._sessionMethod("merge_plots",{to:n},null,t)},this._plotMethod=function(t,n,a,o){for(var s=arguments.length,r=new Array(s>4?s-4:0),i=4;i<s;i++)r[i-4]=arguments[i];e._sessionMethod.apply(e,["_run_plot_method",a,o,t,n].concat(r))},this.showPlotFullScreen=function(t){e._plotMethod(t,"show")},this.updatePlotSettings=function(t,n){e._plotMethod(t,"update_settings",n)},this.undoPlotSettings=function(t){e._plotMethod(t,"undo_settings")},this.updatePlotLayout=function(t,n){e._plotMethod(t,"update_layout",n)},this.updateFigure=function(t,n){var a=n.layout,o=n.data,s=n.frames,r=n.overwrite;e._plotMethod(t,"update",{layout:a,data:o,frames:s,overwrite:r})},this.callPlotShortcut=function(t,n){e._plotMethod(t,"call_shortcut",null,null,n)},this.dispatchPlotEvent=function(t,n,a){e._plotMethod(t,"dispatch_event",a,null,n)},this.sendFile=function(t){e.socket.emit("upload_file",t,t.name)},this.apiAddress="http://localhost:4000",this.user=void 0,this.connect(),document.api=this},dt=n(46),ht={SHOW_AVAIL_HOTKEYS:{name:"Show available hotkeys",sequence:"shift+?"},GO_TO_SETTINGS:{name:"Go to settings",sequence:"shift+s"},GO_TO_DASHBOARD:{name:"Go to the plot's dashboard",sequence:"shift+d"},GO_TO_MOLECULEVIEWER:{name:"Go to the molecule viewer",sequence:"shift+m"},SAVE_SESSION:{name:"Save session",sequences:["ctrl+shift+s","ctrl+alt+s"]},LOAD_SESSION:{name:"Load session",sequences:["ctrl+shift+l","ctrl+alt+l"]}},mt={global:{MOVE_TO_NEXT_TAB:{name:"Move to next tab",sequence:"shift+t+right"},MOVE_TO_PREVIOUS_TAB:{name:"Move to previous tab",sequence:"shift+t+left"},NEW_TAB:{name:"New tab",sequence:"shift+t",action:"keyup"},TRY:"shift+t+r"}},gt={global:{MOVE_TO_NEXT_TAB:{name:"Move to next tab",sequence:"shift+right"},MOVE_TO_PREVIOUS_TAB:{name:"Move to previous tab",sequence:"shift+left"}}},ft={GO_TO_PLOT_SETTINGSEDITING:{name:"Edit current plot's settings",sequence:"s"},GO_TO_PLOT_LAYOUTEDITING:{name:"Edit current plot's layout",sequence:"e"},GO_TO_PLOT_METHODS:{name:"Go to current plot methods",sequence:"m"},FULL_SCREEN:{name:"See current plot in full screen in a different browser's tab",sequence:"f"},REMOVE_PLOT:{name:"Remove current plot",sequences:["del","backspace"]},UNDO_PLOT_SETTINGS:{name:"Undo current plot settings",sequence:"ctrl+z"}},vt={SUBMIT_SETTINGS:{name:"Submit this group's settings",sequence:"shift+enter"}},bt={global:{UNDO_SETTINGS:{name:"Undo settings",sequence:"ctrl+z"},SUBMIT_ALL_SETTINGS:{name:"Submit all settings",sequence:"shift+enter"}}},yt=function(t){Object(N.a)(n,t);var e=Object(x.a)(n);function n(t){var a;return Object(D.a)(this,n),(a=e.call(this,t)).hotKeys=function(){return document.querySelectorAll(".plotCardHotKeys")},a.hotKeysHandlers={GO_TO_PLOT_LAYOUTEDITING:function(){return a.goToPlotLayoutEditing()},GO_TO_PLOT_SETTINGSEDITING:function(){return a.goToPlotSettingsEditing()},GO_TO_PLOT_METHODS:function(){return a.goToPlotMethods()},FULL_SCREEN:function(){return a.showPlotFullScreen()},UNDO_PLOT_SETTINGS:function(){return a.undoSettings()},REMOVE_PLOT:function(){return a.removePlot()}},a.callPlotShortcut=function(t){f.b.warn("Applying "+a.props.plot.shortcuts[t].name+" shortcut"),pt.callPlotShortcut(a.props.plot.id,t)},a.handlePlotClick=function(t){var e=t.points,n=p.a.omit(e[0],["data","fullData","xaxis","yaxis"]);console.warn(n),pt.dispatchPlotEvent(a.props.plot.id,"click",n)},a.handlePlotRelayout=function(t){if(!t["scene.camera"]){var e=Object.keys(t);e.includes("autosize")||0!=e.length&&pt.updatePlotLayout(a.props.plot.id,t)}},a.undoSettings=function(){pt.undoPlotSettings(a.props.plot.id)},a.removePlot=function(){pt.removePlot(a.props.plot.id)},a.goToPlotSettingsEditing=function(){a.setPlotAsActive(),a.props.setActivePage("plotTweaking")},a.goToPlotLayoutEditing=function(){a.setPlotAsActive(),a.props.setActivePage("plotLayoutEditor")},a.goToPlotMethods=function(){a.setPlotAsActive(),a.props.setActivePage("plotMethods")},a.setPlotAsActive=function(){a.props.setActivePlot(a.props.plot)},a.togglePlotAsActive=function(){a.isActivePlot?a.props.setActivePlot(void 0):a.setPlotAsActive()},a.showPlotFullScreen=function(){pt.showPlotFullScreen(a.props.plot.id)},a.state={isLoading:!1},a}return Object(G.a)(n,[{key:"componentDidMount",value:function(){var t=this;document.addEventListener("plotResize",(function(e){e.detail.id!=t.props.plot.id&&"all"!=e.detail.id||t.setState({cou:Math.random()})}))}},{key:"render",value:function(){var t=this;if(this.state.isLoading||!this.props.plot)return o.a.createElement(V.a,{className:"plotcard",style:{borderRadius:15}},o.a.createElement("div",null,"We are working hard to load your plot."));var e=this.props.plot.figure.layout,n=e.paper_bgcolor||"white",a=Object(h.a)({},ft,{TESTING:"shift+r"},Object.keys(this.props.plot.shortcuts).reduce((function(e,n){var a=t.props.plot.shortcuts[n];return["ctrl+z","ctrl+alt+l"].includes(n)||(e[a.name.replace(/ /g,"_")]=Object(h.a)({sequence:n},a)),e}),{})),s=Object(h.a)({},this.hotKeysHandlers,{TESTING:function(){return console.warn("YEEEY")}},Object.keys(this.props.plot.shortcuts).reduce((function(e,n){var a=t.props.plot.shortcuts[n];return["ctrl+z","ctrl+alt+l"].includes(n)||(e[a.name.replace(/ /g,"_")]=function(){return t.callPlotShortcut(n)}),e}),{})),r=(this.isActivePlot,{});return o.a.createElement(dt.HotKeys,{className:"plotCardHotKeys",component:V.a,elevation:this.props.elevation||1,keyMap:a,handlers:s,allowChanges:!0,style:Object(h.a)({width:"100%",height:"100%",display:"flex",flexDirection:"column",borderRadius:3,overflow:"hidden",background:n,paddingTop:5},r,{},this.props.style)},o.a.createElement("div",{style:{flex:1}},o.a.createElement(R.a,{ref:function(e){t.plotlyRef=e},useResizeHandler:!0,style:{width:"100%",height:"100%"},data:this.props.plot.figure.data,layout:Object(h.a)({autosize:!0},e),frames:this.props.plot.figure.frames,onClick:this.handlePlotClick,onRelayout:this.handlePlotRelayout,onUpdate:function(t){},config:{editable:!0,responsive:!0}})),o.a.createElement("div",{style:{display:"flex",paddingLeft:10,paddingRight:20,background:n},className:"card-action"},o.a.createElement(F.b.Provider,{value:{size:25,style:{margin:5},color:"#6eb6ff"}},o.a.createElement("div",{style:{flex:1,textAlign:"left"}},o.a.createElement("a",{"data-tip":"Full screen (f)",href:"#",onClick:this.showPlotFullScreen},o.a.createElement(B.d,null))),o.a.createElement("div",null,o.a.createElement("a",{"data-tip":"Settings (s)",href:"#",onClick:this.goToPlotSettingsEditing},o.a.createElement(U.k,null)),o.a.createElement("a",{"data-tip":"Methods (m)",href:"#",onClick:this.goToPlotMethods},o.a.createElement(z.c,null)),o.a.createElement("a",{"data-tip":"Edit layout (e)",href:"#",onClick:this.goToPlotLayoutEditing},o.a.createElement(B.b,null)),o.a.createElement("span",{"data-tip":"Export data (comming soon)",href:"#"},o.a.createElement(B.c,{color:"#ccc"})),o.a.createElement("a",{"data-tip":"Remove (supr)",href:"#",onClick:this.removePlot},o.a.createElement(B.a,{color:"red"})))),o.a.createElement(L.a,{disable:!!this.props.session.settings&&!this.props.session.settings.showTooltips})))}},{key:"isActivePlot",get:function(){return this.props.plot.id==this.props.active.plot}}]),n}(a.Component),Et={setSessionTabs:q,setActivePlot:Y,removePlot:function(t,e){return{type:"REMOVE_PLOT",plotID:t,tabID:e}},setActivePage:tt,addPlots:K},Ot=Object(_.b)((function(t){return{plots:t.plots,active:t.active,session:t.session}}),Et)(yt),St=n(315),jt=n(1441),Tt=(n(583),n(584),function(t){Object(N.a)(n,t);var e=Object(x.a)(n);function n(){var t;Object(D.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))).updateTabs=function(t){document.dispatchEvent(new CustomEvent("updateTabs",{detail:{tabs:t}}))},t.updateTabParams=function(t,e){pt.updateTab(t,e)},t.removeTab=function(t){pt.removeTab(t)},t.updateTabName=function(e){e.target.blur(),t.updateTabParams(e.target.id,{name:e.target.textContent})},t}return Object(G.a)(n,[{key:"render",value:function(){var t=this,e=this.props.tab,n=e.id,a=e.name,s=n==this.props.active.tab;return o.a.createElement("div",{key:n,className:s?"active plotTab":"plotTab",onClick:s?null:function(){return t.props.setActiveTab(n)}},o.a.createElement("div",{id:n,contentEditable:s,onBlur:this.updateTabName,onKeyUp:function(e){13===e.keyCode&&t.updateTabName(e)}},a),s?o.a.createElement("div",{className:"removeTabBut",onClick:function(){return t.removeTab(n)}},o.a.createElement(U.i,{size:20})):null)}}]),n}(a.Component)),Ct={setActiveTab:X},Pt=Object(_.b)((function(t){return{active:t.active,tabs:t.tabs}}),Ct)(Tt),kt=function(t){Object(N.a)(n,t);var e=Object(x.a)(n);function n(){var t;Object(D.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).hotKeysHandlers={MOVE_TO_NEXT_TAB:function(){return t.moveThroughTabs("right")},MOVE_TO_PREVIOUS_TAB:function(){return t.moveThroughTabs("left")},NEW_TAB:function(){return t.newTab()},TRY:function(){return console.warn("YES")}},t.moveThroughTabs=function(e){var n,a=t.props.tabs,o=p.a.findIndex(a,["id",t.props.active.tab]);"left"==e?n=0!=o?o-1:a.length-1:"right"==e&&(n=o!=a.length-1?o+1:0),t.props.setActiveTab(a[n].id)},t.updateTabs=function(t){document.dispatchEvent(new CustomEvent("updateTabs",{detail:{tabs:t}}))},t.newTab=function(){pt.addTab()},t.noTabsMessage=function(){return o.a.createElement("div",{style:{paddingLeft:20}},o.a.createElement("span",{style:{color:"darkred"}},"You don't seem to have any tab. "),"That's wierd, but if that's what you want...")},t}return Object(G.a)(n,[{key:"render",value:function(){var t=this.props.tabs||[];return o.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",marginTop:10,marginBottom:5}},o.a.createElement(dt.GlobalHotKeys,{keyMap:mt.global,handlers:this.hotKeysHandlers}),0==t.length?this.noTabsMessage():t.map((function(t){return o.a.createElement(Pt,{tab:t})})),o.a.createElement(U.a,{onClick:this.newTab,"data-tip":"New tab","data-place":"right",color:"green",size:20,className:"newTabIcon"}))}}]),n}(a.Component),At={setActiveTab:X},_t=Object(_.b)((function(t){return{tabs:t.session.tabs,active:t.active}}),At)(kt),wt=Object(St.WidthProvider)(St.Responsive),It={backgroundColor:"#757eff",paddingTop:5,marginTop:-5},Dt=function(t){Object(N.a)(n,t);var e=Object(x.a)(n);function n(t){var a;return Object(D.a)(this,n),(a=e.call(this,t)).state={currentBreakpoint:"lg",compactType:"vertical",mounted:!1,layouts:{lg:[]}},a.emptyDashboard=function(){return null},a.noTabsMessage=function(){return null},a.noPlotsMessage=function(){return o.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"}},o.a.createElement("div",{style:{fontSize:"5em",fontWeight:"bold"}},"This is the plots dashboard."),o.a.createElement("div",{style:{fontSize:"1.2em"}},"We would like to display your plots here, but currently you don't seem to have any"),o.a.createElement("div",{style:{backgroundColor:"white",fontSize:"2em",margin:20,padding:20,paddingLeft:50,paddingRight:50,borderRadius:70}}," You can try to create one by clicking on your structures"))},a.toggleSelected=function(t){var e;e=a.state.selected.includes(t)?a.state.selected.filter((function(e){return e!=t})):[].concat(Object(I.a)(a.state.selected),[t]),a.setState({selected:e})},a.onBreakpointChange=function(t){document.dispatchEvent(new CustomEvent("plotResize",{detail:{id:"all"}}))},a.onResizeStop=function(t,e,n){document.dispatchEvent(new CustomEvent("plotResize",{detail:{id:n.i,higher:e.h>n.h}}))},a.shouldComponentUpdate=function(t){if(!a._plotsInLayout)return!0;var e,n=t.active.tab!=a.props.active.tab;if(!n){var o=p.a.find(a.props.tabs,["id",a.props.active.tab]),s=p.a.find(t.tabs,["id",t.active.tab]);if(!o||!s)return!0;if(!o.layouts||!s.layouts)return!0;if(p.a.isEqual(o.layouts,s.layouts))return!0;if(!p.a.isEqual(a._plotsInLayout,s.plots))return!0;e=!p.a.isEqual(o.plots,s.plots)}return n||e},a.onLayoutChange=function(t,e){a.props.onLayoutChange(t,e),pt.setTabLayouts(a.props.active.tab,e)},a.onDrop=function(t){alert("Element parameters: ".concat(JSON.stringify(t)))},a.getLayout=function(){if(!a.props.active.tab)return a.noTabsMessage();var t=p.a.find(a.props.tabs,["id",a.props.active.tab]);if(!t)return a.noTabsMessage();if(0==t.plots.length)return a.noPlotsMessage();var e=t.plots.map((function(t){return a.props.plots[t]}));if((e=e.filter((function(t){return t}))).length!=t.plots.length)return null;var s=t.layouts;return s.lg.length!=e.length&&(s.lg=e.map((function(t){return p.a.find(s.lg,["i",t.id])||n.newPlotLayout(t,s)}))),a._plotsInLayout=t.plots,o.a.createElement(wt,Object.assign({},a.props,{layouts:s,onBreakpointChange:a.onBreakpointChange,onLayoutChange:a.onLayoutChange,onDrop:a.onDrop,onResizeStop:a.onResizeStop,draggableCancel:".infolayer, .draglayer, .shapelayer, #scene",measureBeforeMount:!1,useCSSTransforms:a.state.mounted,compactType:a.state.compactType,preventCollision:!a.state.compactType,rowHeight:10}),a.generateDOM(s.lg,e,a.state.selected,a.toggleSelected))},a.mergePlots=function(t){pt.mergePlots(a.state.selected,t),a.setState({selected:[]})},a.removePlots=function(){a.state.selected.forEach((function(t){return pt.removePlot(t)})),a.setState({selected:[]})},a.movePlots=function(){var t=p.a.findIndex(a.props.tabs,["id",a.props.active.tab])+1;a.props.tabs.length==t&&(t=0),console.warn(t),a.state.selected.forEach((function(e){return pt.movePlot(e,a.props.tabs[t].id)})),a.setState({selected:[]})},a.renderSelectedManager=function(){var t=a.state.selected.length;if(0==t)return null;return o.a.createElement(jt.a,{style:{padding:10,marginBottom:10},elevation:3},"You have ".concat(t," plots selected. What do you want to do?"),o.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},t>1?[{to:"multiple"},{to:"subplots"},{to:"animation"}].map((function(t){return o.a.createElement(it.a,{onClick:function(){return a.mergePlots(t.to)}},"Merge as ".concat(t.to))})):null,o.a.createElement(it.a,{onClick:a.removePlots},"Remove"),o.a.createElement(it.a,{onClick:a.movePlots},"Move to other tab")))},a._plotsInLayout=!1,a.state={selected:[]},a}return Object(G.a)(n,[{key:"componentDidMount",value:function(){this.setState({mounted:!0}),this.props.setActivePlot(void 0)}},{key:"generateDOM",value:function(t,e,n,a){return p.a.map(t,(function(t,s){return o.a.createElement("div",{key:e[s].id,onClick:function(t){return t.ctrlKey?a(e[s].id):null}},o.a.createElement(Ot,{plot:e[s],style:n.includes(e[s].id)?It:{}}))}))}},{key:"render",value:function(){var t=o.a.createElement(_t,null),e=Object(h.a)({},this.hotKeysHandler,{},p.a.pick(t.hotKeysHandler,["MOVE_TO_NEXT_TAB","MOVE_TO_PREVIOUS_TAB"]));return o.a.createElement("div",{style:Object(h.a)({padding:10},this.props.style),className:"scrollView"},o.a.createElement(dt.GlobalHotKeys,{keyMap:gt.global,handlers:e}),this.renderSelectedManager(),this.getLayout())}}]),n}(o.a.Component);Dt.defaultProps={className:"layout",rowHeight:30,onLayoutChange:function(){},cols:{lg:12,md:12,sm:6,xs:4,xxs:2}},Dt.newPlotLayout=function(t,e){return{x:t.grid_dims[0]*e.lg.length,y:2,w:t.grid_dims[0],h:t.grid_dims[1],i:t.id}};var Gt={setSessionTabs:q,setTabPlots:function(t,e){return{type:"SET_TAB_PLOTS",tabID:t,plots:e}},setActivePlot:Y},xt=Object(_.b)((function(t){return{plots:t.plots,structures:t.session.structures,tabs:t.session.tabs,active:t.active,session:t.session}}),Gt)(Object(dt.withHotKeys)(Dt)),Nt=(n(585),function(t){Object(N.a)(n,t);var e=Object(x.a)(n);function n(t){var a;return Object(D.a)(this,n),(a=e.call(this,t)).state={},a}return Object(G.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{className:"structTag "+(this.props.struct.selected?"active":""),onClick:this.props.toggleStruct,"data-tip":this.props.struct.path,"data-effect":"solid"},o.a.createElement("div",null,this.props.struct.name.replace(".fdf","")),o.a.createElement("div",{style:{fontSize:"0.7em",color:"gray"}},".../"+this.props.struct.path.split("/").slice(-2,-1)[0]))}}]),n}(a.Component)),Lt=n(43),Mt=n(1497),Rt=n(1498),Vt=n(1495),Bt=n(1487),zt=Object(Bt.a)((function(t){return{root:{transform:"translateZ(0px)",flexGrow:1},exampleWrapper:{position:"relative",marginTop:t.spacing(3)},radioGroup:{margin:t.spacing(1,0)},speedDial:{position:"absolute","&.MuiSpeedDial-directionUp, &.MuiSpeedDial-directionLeft":{bottom:t.spacing(2),right:t.spacing(2)},"&.MuiSpeedDial-directionDown, &.MuiSpeedDial-directionRight":{top:t.spacing(2),left:t.spacing(2)}}}}));function Ut(t){var e=zt(),n=o.a.useState("left"),a=Object(Lt.a)(n,2),s=a[0],r=(a[1],o.a.useState(!1)),i=Object(Lt.a)(r,2),l=i[0],c=i[1],u=o.a.useState(!1),p=Object(Lt.a)(u,2),d=p[0];p[1];return o.a.createElement(Mt.a,{ariaLabel:"SpeedDial example",className:e.speedDial,hidden:d,icon:o.a.createElement(Rt.a,null),onClose:function(){c(!1)},onOpen:function(){c(!0)},open:l,direction:s},t.actions.map((function(t){return o.a.createElement(Vt.a,{key:t.name,icon:t.icon,tooltipTitle:t.tip||t.name,tooltipPlacement:"top",onClick:t.onClick})})))}var Ft=function(t){Object(N.a)(n,t);var e=Object(x.a)(n);function n(){var t;Object(D.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))).hotKeysHandler={SAVE_SESSION:function(){return t.saveCurrentSession()},LOAD_SESSION:function(){return t.loadSession()}},t.syncWithSession=function(t){document.dispatchEvent(new CustomEvent("syncWithSession",{detail:{session:t}}))},t.showPage=function(e){t.props.setActivePage(e)},t.saveCurrentSession=function(){var e=prompt("Please provide the path to save the session.\n\nRoot directory:\n"+t.props.session.settings.rootDir);e&&pt.saveSession(e)},t.loadSession=function(){var e=prompt("Please provide the path of the saved session.\n\nRoot directory:\n"+t.props.session.settings.rootDir);e&&pt.loadSession(e)},t}return Object(G.a)(n,[{key:"render",value:function(){var t=[{name:"Save session",icon:o.a.createElement(z.d,{size:20}),onClick:this.saveCurrentSession},{name:"Load session",icon:o.a.createElement(B.e,{size:20}),onClick:this.loadSession}];return o.a.createElement(Ut,{actions:t})}}]),n}(a.Component),Ht=function(t){Object(N.a)(n,t);var e=Object(x.a)(n);function n(){return Object(D.a)(this,n),e.apply(this,arguments)}return Object(G.a)(n,[{key:"render",value:function(){return o.a.createElement(it.a,{"data-tip":this.props.tooltip,style:this.props.style,floating:!0,icon:this.props.icon,onClick:this.props.onClick,className:this.props.className})}}]),n}(a.Component),Kt={setActivePage:tt},Wt=Object(_.b)((function(t){return{session:t.session}}),Kt)(Ft),qt=n(143),Yt={settings:{name:"Settings",icon:o.a.createElement(qt.c,{size:20}),color:"grey",hotKey:"Shift + s"},plots:{name:"Dashboard",icon:o.a.createElement(U.c,null),color:"grey",hotKey:"Shift + d"}},Xt=function(t){Object(N.a)(n,t);var e=Object(x.a)(n);function n(){var t;Object(D.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))).showPage=function(){t.props.setActivePage(t.props.to)},t}return Object(G.a)(n,[{key:"render",value:function(){var t=Yt[this.props.to];return o.a.createElement(Ht,Object.assign({icon:t.icon,className:t.color,tooltip:"Go to "+this.props.to+" ("+t.hotKey+")",onClick:this.showPage},this.props))}}]),n}(a.Component),Qt={setActivePage:tt},Jt=Object(_.b)(null,Qt)(Xt),Zt=function(t){Object(N.a)(n,t);var e=Object(x.a)(n);function n(t){var a;return Object(D.a)(this,n),(a=e.call(this,t)).state={},a}return Object(G.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{className:"plotableTag "+(this.props.plotable.selected?"active":""),onClick:this.props.togglePlotable,"data-tip":this.props.plotable.path,"data-effect":"solid"},o.a.createElement("div",null,this.props.plotable.name),o.a.createElement("div",{style:{fontSize:"0.7em",color:"gray"}},".../"+this.props.plotable.path.split("/").slice(-2,-1)[0]))}}]),n}(a.Component);var $t=function(t){Object(N.a)(n,t);var e=Object(x.a)(n);function n(t){var a;return Object(D.a)(this,n),(a=e.call(this,t)).togglePlotInitializer=function(t,e){var n,a;0!=[].concat(Object(I.a)(t),Object(I.a)(e)).length?n=!0:a=!0,document.dispatchEvent(new CustomEvent("togglePlotInitializer",{detail:{forceShow:n,forceHide:a}}))},a.selectStructs=function(t){a.props.setActiveStructs(t),a.togglePlotInitializer(t,a.selectedPlotables)},a.selectPlotables=function(t){a.props.setActivePlotables(t),a.togglePlotInitializer(a.selectedStructs,t)},a.toggleStruct=function(t){var e=t.id;a.selectStructs(p.a.xor(a.selectedStructs,[e]))},a.togglePlotable=function(t){var e=t.id;a.selectPlotables(p.a.xor(a.selectedPlotables,[e]))},a.toggleStructDisplay=function(){a.setState({displayStructures:!a.state.displayStructures})},a.togglePlotablesDisplay=function(){a.setState({displayPlotables:!a.state.displayPlotables})},a.toggleAlphabeticSorting=function(){var t,e=(t={},Object(d.a)(t,!1,"asc"),Object(d.a)(t,"asc","desc"),Object(d.a)(t,"desc",!1),t);a.setState({alphabeticSorting:e[a.state.alphabeticSorting]})},a.toggleSearchByFolder=function(){a.setState({searchByFolder:!a.state.searchByFolder})},a.toggleSelectedSorting=function(){a.setState({selectedSorting:!a.state.selectedSorting})},a.toggleAll=function(){var t=Object.keys(a.filterStructs()),e=0==p.a.intersection([].concat(Object(I.a)(a.selectedStructs),Object(I.a)(a.selectedPlotables)),t).length,n=p.a.intersection(Object.keys(a.props.structures),t),o=p.a.intersection(Object.keys(a.props.plotables),t);a.selectStructs(e?[].concat(Object(I.a)(n),Object(I.a)(a.selectedStructs)):a.selectedStructs.filter((function(t){return!n.includes(t)}))),a.selectPlotables(e?[].concat(Object(I.a)(o),Object(I.a)(a.selectedPlotables)):a.selectedPlotables.filter((function(t){return!o.includes(t)})))},a.filterStructs=function(t){t=t||a.state.searchString,console.warn(t),t=t.includes("*")||t.includes("?")?t:"*"+t+"*";var e={},n=[a.state.displayStructures,a.state.displayPlotables];return[a.props.structures||[],a.props.plotables||[]].forEach((function(o,s){if(n[s]){var r=1==s,i=Object.keys(o).reduce((function(e,n){var s,i=o[n],l=a.state.searchByFolder?i.path.split("/").slice(-2,-1)[0]:i.name.replace(".fdf","");return s=l,new RegExp("^".concat(t.replace(/\*/g,".*").replace(/\?/g,"."),"$"),"i").test(s)&&(e[n]=Object(h.a)({},i,{selected:[].concat(Object(I.a)(a.selectedStructs),Object(I.a)(a.selectedPlotables)).includes(n),isPlotable:r,id:n})),e}),{});e=Object(h.a)({},e,{},i)}})),e},a.newSearchString=function(t){a.setState({searchString:t})},a.noStructuresMessage=function(){return o.a.createElement("div",null,o.a.createElement("div",{style:{color:"darkred"}},"No structures in the search scope right now."),o.a.createElement("div",null,"Try to change file system settings or initialize the GUI from a different directory"),o.a.createElement(Jt,{to:"settings",style:{marginTop:10}}))},a.noMatchingStructuresMessage=function(){return o.a.createElement("div",null,o.a.createElement("div",{style:{color:"darkred"}},"No structure that matches your search."),o.a.createElement("div",null,"Try to change file system settings or initialize the GUI from a different directory"),o.a.createElement(Jt,{to:"settings",style:{marginTop:10}}))},a.state={searchString:"",alphabeticSorting:!1,selectedSorting:!1,searchByFolder:!1,displayStructures:!0,displayPlotables:!1},a}return Object(G.a)(n,[{key:"render",value:function(){var t=this,e=this.filterStructs();return this.state.alphabeticSorting&&(e=p.a.orderBy(e,"name",this.state.alphabeticSorting)),this.state.selectedSorting&&(e=p.a.orderBy(e,"selected","desc")),o.a.createElement("div",{style:Object(h.a)({height:"100vh",overflow:"hidden",display:"flex",flexDirection:"column",backgroundColor:"white"},this.props.style)},o.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginTop:20,marginBottom:20}},o.a.createElement(rt,{label:"Search string",autocomplete:"off",placeholder:"Enter your search string...",style:{marginRight:10},value:this.state.searchString,onChange:this.newSearchString}),o.a.createElement("div",{"data-tip":"Search by folder",className:"structPickerToggle "+(this.state.searchByFolder?"active":""),onClick:this.toggleSearchByFolder,style:{cursor:"pointer"}},this.state.searchByFolder?o.a.createElement(U.f,null):o.a.createElement(U.g,null))),o.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:5}},o.a.createElement("span",{"data-tip":"Show structures",className:"structPickerToggle "+(this.state.displayStructures?"active":""),onClick:this.toggleStructDisplay,style:{cursor:"pointer"}},"Struct"),o.a.createElement("span",{"data-tip":"Show plotables",className:"structPickerToggle "+(this.state.displayPlotables?"active":""),onClick:this.togglePlotablesDisplay,style:{cursor:"pointer"}},"Plotables")),o.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:5}},o.a.createElement("span",{className:"structPickerToggle "+(this.state.alphabeticSorting?"active":""),onClick:this.toggleAlphabeticSorting,style:{cursor:"pointer"}},"A-Z"),o.a.createElement("span",{"data-tip":"Show selected first",className:"structPickerToggle "+(this.state.selectedSorting?"active":""),onClick:this.toggleSelectedSorting,style:{cursor:"pointer"}},"sel"),o.a.createElement("span",{className:"structPickerToggle",onClick:this.toggleAll,style:{cursor:"pointer"}},"All")),0==Object.keys(Object(h.a)({},this.props.structures,{},this.props.plotables)).length?this.noStructuresMessage():0==Object.values(e).length?this.noMatchingStructuresMessage():null,o.a.createElement("div",{className:"scrollView",style:{flex:1}},Object.values(e).map((function(e){return e.isPlotable?o.a.createElement(Zt,{id:e.id,plotable:e,togglePlotable:function(){return t.togglePlotable(e)}}):o.a.createElement(Nt,{id:e.id,struct:e,toggleStruct:function(){return t.toggleStruct(e)}})}))))}},{key:"selectedStructs",get:function(){return this.props.activeStructs||[]}},{key:"selectedPlotables",get:function(){return this.props.activePlotables||[]}}]),n}(a.Component),te={setActiveStructs:Q,setActivePlotables:et},ee=Object(_.b)((function(t){return{activeStructs:t.active.structs,activePlotables:t.active.plotables,plotables:t.session.plotables,structures:t.session.structures}}),te)($t),ne=n(106),ae=function(t){Object(N.a)(n,t);var e=Object(x.a)(n);function n(){return Object(D.a)(this,n),e.apply(this,arguments)}return Object(G.a)(n,[{key:"render",value:function(){var t=this,e=this.props.session.plotOptions,n=p.a.find(e,["value",this.props.value]);return o.a.createElement(ne.a,{options:e,placeholder:"Choose the plot type...",isClearable:!0,isSearchable:!0,isMulti:!0,onChange:function(e){return t.props.onChange(e?e.value||e.map((function(t){return t.value})):void 0)},value:n})}}]),n}(a.Component),oe=Object(_.b)((function(t){return{tabs:t.tabs,active:t.active,session:t.session}}),null)(ae),se=function(t){Object(N.a)(n,t);var e=Object(x.a)(n);function n(){return Object(D.a)(this,n),e.apply(this,arguments)}return Object(G.a)(n,[{key:"render",value:function(){var t=this,e=this.props.tabs.map((function(t){return{label:t.name,value:t.id}})),n=p.a.find(e,["value",this.props.value]);return o.a.createElement(ne.a,{placeholder:"Choose a tab...",options:e,defaultValue:this.props.active.tab&&p.a.find(this.props.tabs,["id",this.props.active.tab])?{label:p.a.find(this.props.tabs,["id",this.props.active.tab]).name,value:this.props.active.tab}:null,isSearchable:!0,onChange:function(e){return t.props.onChange(e?e.value:void 0)},value:n})}}]),n}(a.Component),re=Object(_.b)((function(t){return{tabs:t.session.tabs,active:t.active}}),null)(se),ie=function(t){Object(N.a)(n,t);var e=Object(x.a)(n);function n(){return Object(D.a)(this,n),e.apply(this,arguments)}return Object(G.a)(n,[{key:"render",value:function(){var t=this,e=this.props.structure,n=this.props.groupActive;return o.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",marginTop:10,marginBottom:10}},o.a.createElement("div",{style:{color:"darkred",cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center"},onClick:function(){return t.props.deactivateStruct(e.id)}},o.a.createElement(U.h,null)),o.a.createElement("div",{style:{cursor:n?"default":"pointer",marginRight:20,marginLeft:20,padding:10,backgroundColor:n?"whitesmoke":"#ccc",borderRadius:3},onClick:n?void 0:this.props.moveStructToActiveGroup},e.name.replace(".fdf","")),o.a.createElement("div",{"data-tip":e.path},".../"+e.path.split("/").slice(-2,-1)[0]))}}]),n}(a.Component),le={deactivateStruct:J,setActiveStructs:Q},ce=Object(_.b)((function(t){return{active:t.active}}),le)(ie),ue=[{label:"Plot individually",value:"separatePlot"},{label:"Merge in single plot",value:"jointPlot"},{label:"Build animation",value:"jointAnimation"},{label:"Animation for each",value:"separateAnimation"}],pe=function(t){Object(N.a)(n,t);var e=Object(x.a)(n);function n(t){var a;return Object(D.a)(this,n),(a=e.call(this,t)).state={},a}return Object(G.a)(n,[{key:"render",value:function(){var t=this;return o.a.createElement(ne.a,{options:ue,defaultValue:ue[0],placeholder:"Choose the plotting method...",isSearchable:!0,onChange:function(e){return t.props.onChange(e?e.value||e.map((function(t){return t.value})):void 0)},value:p.a.find(ue,["value",this.props.value])})}}]),n}(a.Component),de=Object(_.b)((function(t){return{}}),null)(pe),he=n(1489),me=function(t){Object(N.a)(n,t);var e=Object(x.a)(n);function n(){return Object(D.a)(this,n),e.apply(this,arguments)}return Object(G.a)(n,[{key:"render",value:function(){var t=this,e=this.props.initializingOptions,n=e.tabID,a=e.plotClasses,s=e.mergeMethod,r=this.props.active?{backgroundColor:"#ccc"}:{backgroundColor:"whitesmoke"};return o.a.createElement("div",null,o.a.createElement("div",{style:{display:"flex",flexDirection:"row",margin:-4}},o.a.createElement("div",{className:"structGroupAction",style:r,onClick:this.props.splitGroup},"Split"),o.a.createElement("div",{className:"structGroupAction",style:r,onClick:this.props.removeGroup},"Remove"),this.props.active?null:o.a.createElement("div",{className:"structGroupAction",style:r,onClick:this.props.setGroupAsActive},"Mark as receptive"),o.a.createElement("div",{style:{flex:1}})),o.a.createElement(he.a,{container:!0,spacing:1,style:Object(h.a)({transition:"all 300ms",display:"flex",flexWrap:"wrap",padding:20,marginTop:0,marginBottom:20,borderRadius:5,borderTopLeftRadius:0,justifyContent:"center",alignItems:"center"},r)},o.a.createElement(he.a,{item:!0,sm:12,md:4,lg:3},this.props.structs.map((function(e){return o.a.createElement(ce,{structure:e,groupActive:t.props.active,moveStructToActiveGroup:function(){return t.props.moveStructToActiveGroup(e.id)}})}))),o.a.createElement(he.a,{item:!0,sm:12,md:4,lg:3},o.a.createElement(oe,{value:a,onChange:function(e){return t.props.onInitParamChange("plotClasses",e)}})),o.a.createElement(he.a,{item:!0,sm:12,md:4,lg:3},o.a.createElement(re,{value:n,onChange:function(e){return t.props.onInitParamChange("tabID",e)}})),o.a.createElement(he.a,{item:!0,sm:12,md:4,lg:3},o.a.createElement(de,{value:s,onChange:function(e){return t.props.onInitParamChange("mergeMethod",e)}}))))}}]),n}(a.Component),ge={deactivateStruct:J},fe=Object(_.b)(null,ge)(me),ve=function(t){Object(N.a)(n,t);var e=Object(x.a)(n);function n(t){var a;return Object(D.a)(this,n),(a=e.call(this,t)).onStructsUpdate=function(t){var e=[],n=a.selectedStructs.filter((function(e){var n=e.id;return!t.includes(n)}));if(0==a.state.structureGroups.length)e=a.markActiveGroup(0,[a.newGroup(a.selectedStructs)]);else{var o=p.a.findIndex(a.state.structureGroups,"active"),s=a.state.structureGroups[o];e=[].concat(Object(I.a)(a.state.structureGroups.slice(0,o)),[Object(h.a)({},s,{structs:[].concat(Object(I.a)(s.structs),Object(I.a)(n))})],Object(I.a)(a.state.structureGroups.slice(o+1)))}e=a.cleanUnselectedFromGroups(e),p.a.find(e,"active")||(e=a.markActiveGroup(e.length-1,e)),a.setState({structureGroups:e})},a.cleanUnselectedFromGroups=function(t){return t.reduce((function(t,e){return(e=Object(h.a)({},e,{structs:e.structs.filter((function(t){var e=t.id;return a.props.active.structs.includes(e)}))})).structs.length>0&&t.push(e),t}),[])},a.newGroup=function(t,e){return Object(h.a)({structs:t||[],initializingOptions:{tabID:a.defaultTabID,plotClasses:[],mergeMethod:"separatePlot"}},e)},a.addGroup=function(t){var e=t.structs,n=a.markActiveGroup(a.state.structureGroups.length,[].concat(Object(I.a)(a.state.structureGroups),[a.newGroup(e)]));a.setState({structureGroups:n})},a.removeGroup=function(t){var e=a.state.structureGroups[t];if(e.structs.length>0)a.props.deactivateStruct(e.structs.map((function(t){return t.id})));else{var n=a.state.structureGroups.filter((function(e,n){return n!=t}));e.active&&(n=a.markActiveGroup(n.length-1,n)),a.setState({structureGroups:n})}},a.splitGroup=function(t){var e=a.state.structureGroups[t],n=e.structs.map((function(t){return a.newGroup([t],p.a.omit(e,["structs"]))})),o=a.state.structureGroups.filter((function(e,n){return n!=t}));o=[].concat(Object(I.a)(o.slice(0,t)),Object(I.a)(n),Object(I.a)(o.slice(t))),e.active&&(o=a.markActiveGroup(t,o)),a.setState({structureGroups:o})},a.markActiveGroup=function(t,e){return(e=e||a.state.structureGroups).map((function(e,n){return Object(h.a)({},e,{active:n==t})}))},a.setGroupAsActive=function(t){a.setState({structureGroups:a.markActiveGroup(t)})},a.moveStructToActiveGroup=function(t){var e=p.a.find(a.selectedStructs,["id",t]),n=a.state.structureGroups.map((function(n){var a=n.active?[].concat(Object(I.a)(n.structs),[e]):n.structs.filter((function(e){return e.id!=t}));return Object(h.a)({},n,{structs:a})}));a.setState({structureGroups:n})},a.updateGroupInitParams=function(t,e,n){var o=a.state.structureGroups.map((function(a,o){return o==t?Object(h.a)({},a,{initializingOptions:Object(h.a)({},a.initializingOptions,Object(d.a)({},e,n))}):a}));a.setState({structureGroups:o})},a.toggleVisibility=function(){document.dispatchEvent(new Event("togglePlotInitializer"))},a.updateInitializingOptions=function(t,e){a.setState(Object(d.a)({},t,e))},a.getNewPlot=function(){a.selectedPlotables.forEach((function(t){pt.newPlot({tabID:a.defaultTabID,plotableID:t.id})})),a.state.structureGroups.forEach((function(t){var e=t.structs,n=t.initializingOptions;if(n.mergeMethod.includes("separate")){var a=n.mergeMethod.includes("Animation");e.forEach((function(t){n.plotClasses.forEach((function(e){pt.newPlot({tabID:n.tabID,structID:t.id,animation:a,plotClass:e})}))}))}})),a.toggleVisibility(),a.props.setActiveStructs([]),a.props.setActivePlotables([])},a.renderPlotable=function(t){return o.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",marginTop:10}},o.a.createElement("div",{style:{color:"darkred",cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center"},onClick:function(){return a.props.deactivatePlotable(t.id)}},o.a.createElement(U.h,null)),o.a.createElement("div",{style:{marginRight:20,marginLeft:20,padding:10,backgroundColor:"whitesmoke",borderRadius:3}},t.name),o.a.createElement("div",{"data-tip":t.path},".../"+t.path.split("/").slice(-2,-1)[0]))},a.nothingToPlotMessage=function(){return o.a.createElement("div",null,o.a.createElement("div",{style:{color:"darkred",fontSize:"1.3em",fontWeight:"bold"}},"There's nothing to plot currently"),o.a.createElement("div",null,"Select a structure or plotable to begin."))},a.state={structureGroups:[],plotables:[]},a}return Object(G.a)(n,[{key:"componentDidMount",value:function(){this.onStructsUpdate([])}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidUpdate",value:function(t){p.a.isEqual(t.active.structs,this.props.active.structs)||this.onStructsUpdate(t.active.structs)}},{key:"render",value:function(){var t=this;if(0==this.props.tabs.length)return null;var e=p.a.groupBy(this.selectedPlotables,"plot");return o.a.createElement("div",{className:"plotInitializer",style:this.props.style},o.a.createElement(V.a,{style:{margin:20,padding:20,background:"aliceblue",overflow:"visible"}},this.selectedStructs.length>0?o.a.createElement("div",null,o.a.createElement("div",{className:"sectionHeader"},"Structures"),this.state.structureGroups.map((function(e,n){return o.a.createElement(fe,Object.assign({},e,{onInitParamChange:function(e,a){return t.updateGroupInitParams(n,e,a)},setGroupAsActive:function(){return t.setGroupAsActive(n)},removeGroup:function(){return t.removeGroup(n)},splitGroup:function(){return t.splitGroup(n)},moveStructToActiveGroup:t.moveStructToActiveGroup}))})),o.a.createElement("div",{onClick:this.addGroup},"New Group")):null,this.selectedPlotables.length>0?o.a.createElement("div",{className:"sectionHeader"},"Plotables"):null,Object.keys(e).map((function(n){return o.a.createElement("div",null,o.a.createElement("div",{style:{textAlign:"left",fontSize:"1.1em",marginTop:20}},n),o.a.createElement("div",{style:{marginLeft:30,paddingLeft:20,borderLeftStyle:"solid",borderWidth:1,borderColor:"#ccc"}},e[n].map((function(e){return t.renderPlotable(e)}))))})),0==[].concat(Object(I.a)(this.selectedPlotables),Object(I.a)(this.selectedStructs)).length?this.nothingToPlotMessage():null,o.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",paddingTop:20}},o.a.createElement(it.a,{style:{marginRight:20},onClick:this.toggleVisibility,endIcon:o.a.createElement(U.b,null)},"Dismiss"),o.a.createElement(it.a,{style:{marginLeft:20},onClick:this.getNewPlot,endIcon:o.a.createElement(U.d,null)},"Initialize plots"))))}},{key:"selectedStructs",get:function(){return this.props.activeStructs||[]}},{key:"selectedPlotables",get:function(){return this.props.activePlotables||[]}},{key:"defaultTabID",get:function(){return this.props.active.tab?this.props.active.tab:this.props.tabs.length&&this.props.tabs.length>0?this.props.tabs[0].id:void 0}}]),n}(a.Component),be={setActiveTab:X,addPlots:K,setActiveStructs:Q,setActivePlotables:et,informLoadingPlot:Z,informLoadedPlot:$,deactivateStruct:J,deactivatePlotable:function(t){return{type:"DEACTIVATE_PLOTABLE",plotableID:t}}},ye=Object(_.b)((function(t){return{activeStructs:P(t),activePlotables:k(t),tabs:t.session.tabs,active:t.active}}),be)(ve),Ee=n(1491),Oe=n(1496),Se=n(1490),je=n(1492),Te=n(1499),Ce=function(t){Object(N.a)(n,t);var e=Object(x.a)(n);function n(){return Object(D.a)(this,n),e.apply(this,arguments)}return Object(G.a)(n,[{key:"render",value:function(){var t=this;return o.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},o.a.createElement("div",{style:{paddingBottom:10}},this.props.setting.name),o.a.createElement(Te.a,Object.assign({id:this.props.id||this.props.setting.key,checked:this.props.value,onChange:function(e){return t.props.onChange(e.target.checked)}},this.props.inputField.params)))}}]),n}(a.Component),Pe=n(513),ke=n(33),Ae=ke.z.ValueContainer,_e=ke.z.Placeholder,we=function(t){var e=t.children,n=Object(Pe.a)(t,["children"]);return o.a.createElement(Ae,n,o.a.createElement(_e,Object.assign({},n,{isFocused:n.isFocused}),n.selectProps.placeholder),o.a.Children.map(e,(function(t){return t&&t.type!==_e?t:null})))},Ie=function(t){Object(N.a)(n,t);var e=Object(x.a)(n);function n(){return Object(D.a)(this,n),e.apply(this,arguments)}return Object(G.a)(n,[{key:"render",value:function(){var t=this,e=this.props.label||(this.props.setting?this.props.setting.name:"");return o.a.createElement(ne.a,Object.assign({value:Array.isArray(this.props.value)?this.props.value.map((function(e){return p.a.find(t.props.inputField.params.options,{value:e})})):p.a.find(this.props.inputField.params.options,{value:this.props.value}),onChange:function(e){return t.props.onChange(Array.isArray(e)?e.map((function(t){return t.value})):e?e.value:null)}},this.props.inputField.params,{components:{ValueContainer:we},styles:{container:function(t,e){return Object(h.a)({},t,{marginTop:20,marginBottom:20})},valueContainer:function(t,e){return Object(h.a)({},t,{overflow:"visible"})},placeholder:function(t,e){return Object(h.a)({},t,{position:"absolute",top:e.hasValue||e.selectProps.inputValue?-15:"50%",transition:"top 0.1s, font-size 0.1s",fontSize:(e.hasValue||e.selectProps.inputValue)&&13,color:e.hasValue||e.selectProps.inputValue?"blue":"#ccc",marginLeft:e.hasValue||e.selectProps.inputValue?-5:0})}},placeholder:e}))}}]),n}(a.Component),De=n(495),Ge=function(t){Object(N.a)(n,t);var e=Object(x.a)(n);function n(t){var a;return Object(D.a)(this,n),(a=e.call(this,t)).toggleColorPicker=function(){a.setState({displayColorPicker:!a.state.displayColorPicker})},a.state={tempcolor:void 0},a}return Object(G.a)(n,[{key:"render",value:function(){var t=this,e=this.state.displayColorPicker?o.a.createElement("div",{style:{position:"absolute",bottom:60}},o.a.createElement(De.ChromePicker,Object.assign({color:this.state.tempcolor||this.props.value||"black",onChange:function(e){t.setState({tempcolor:e.hex})},onChangeComplete:function(e){t.props.onChange(e.hex),t.setState({tempcolor:void 0})}},this.props.inputField.params))):null;return o.a.createElement("div",{style:{position:"relative",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},o.a.createElement("div",{style:{paddingBottom:10}},this.props.setting.name),o.a.createElement("div",{className:"z-depth-2",onClick:this.toggleColorPicker,style:{width:30,height:30,borderRadius:30,background:this.props.value}}),e)}}]),n}(a.Component),xe=n(510),Ne=(n(396),function(t){Object(N.a)(n,t);var e=Object(x.a)(n);function n(){return Object(D.a)(this,n),e.apply(this,arguments)}return Object(G.a)(n,[{key:"render",value:function(){var t=this,e=this.props.value||[0,0];return o.a.createElement("div",{style:{paddingLeft:"10%",paddingRight:"10%"}},o.a.createElement("div",{style:{paddingBottom:10}},this.props.setting.name),o.a.createElement(xe.a,Object.assign({value:e,onChange:function(e){return t.props.onChange(e)}},this.props.inputField.params)))}}]),n}(a.Component)),Le=function(t){Object(N.a)(n,t);var e=Object(x.a)(n);function n(){return Object(D.a)(this,n),e.apply(this,arguments)}return Object(G.a)(n,[{key:"render",value:function(){var t=this,e=null!=this.props.value?this.props.value:["",""];return o.a.createElement("div",null,o.a.createElement("div",{style:{paddingBottom:10}},this.props.setting.name),o.a.createElement("div",{style:{display:"flex"}},o.a.createElement(st.a,Object.assign({style:{marginRight:30,flex:1},type:"number",variant:"outlined",value:e[0],onChange:function(n){return e[1]>=Number(n.target.value)?t.props.onChange([Ye.number(n.target.value),e[1]]):null}},this.props.inputField.params)),o.a.createElement(st.a,Object.assign({style:{marginLeft:30,flex:1},type:"number",variant:"outlined",value:e[1],onChange:function(n){return Number(n.target.value)>=e[0]?t.props.onChange([e[0],Ye.number(n.target.value)]):null}},this.props.inputField.params))))}}]),n}(a.Component),Me=function(t){Object(N.a)(n,t);var e=Object(x.a)(n);function n(){return Object(D.a)(this,n),e.apply(this,arguments)}return Object(G.a)(n,[{key:"render",value:function(){var t=this,e=this.props.inputField?this.props.inputField.params:{},n=this.props.value||"",a=this.props.label||(this.props.setting?this.props.setting.name:"");return o.a.createElement("div",null,o.a.createElement(st.a,Object.assign({type:"number",label:a,value:n,onChange:function(e){return t.props.onChange(Ye.number(e.target.value))},style:this.props.style,variant:"outlined"},e)))}}]),n}(a.Component),Re=function(t){Object(N.a)(n,t);var e=Object(x.a)(n);function n(t){var a;return Object(D.a)(this,n),(a=e.call(this,t)).addQuery=function(){var t=a.props.setting.inputField.queryForm.reduce((function(t,e){return t[e.key]=e.default||null,t}),{});t.active=!0,a.props.onChange([].concat(Object(I.a)(a.props.value),[t]))},a.changeSettingValue=function(t,e,n){var o=p.a.cloneDeep(a.props.value);o[t]=Object(h.a)({},o[t],Object(d.a)({},e,n)),a.props.onChange(o)},a.renderQuery=function(t,e){return o.a.createElement("div",{key:e,style:{display:"flex",justifyContent:"center",alignItems:"center",marginBottom:10}},o.a.createElement(Te.a,{id:e+"active",checked:t.active,onChange:function(t){return a.changeSettingValue(e,"active",t.target.checked)}}),o.a.createElement(V.a,{className:"queryCard",style:{flex:1,background:t.active?"#CBFFC0":"#ffc3cd",borderRadius:10}},o.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-around"}},a.props.setting.inputField.queryForm.map((function(n){return o.a.createElement(Ye,{id:String(e)+n.key,setting:n,value:t[n.key],onValueChange:function(t){return a.changeSettingValue(e,n.key,t)}})})))))},a.state={displayColorPicker:{}},a}return Object(G.a)(n,[{key:"render",value:function(){var t=this;return o.a.createElement("div",null,o.a.createElement("div",{style:{paddingBottom:10}},this.props.setting.name),o.a.createElement("div",null,this.props.value.map((function(e,n){return t.renderQuery(e,n)})),o.a.createElement(it.a,{"data-tip":"Add a new query",onClick:this.addQuery},"Add Query")))}}]),n}(a.Component),Ve=function(t){Object(N.a)(n,t);var e=Object(x.a)(n);function n(){var t;Object(D.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))).changeValue=function(e,n){var a=p.a.cloneDeep(t.props.value);a||(a=t.handleNone()),a[n]=e,t.props.onChange(a)},t.handleNone=function(){return Array(t.props.inputField.params.shape[0]).fill(null)},t}return Object(G.a)(n,[{key:"render",value:function(){var t=this,e=this.props.inputField.params.vertical?{marginLeft:20,marginRight:20,marginBottom:0,width:70}:{marginLeft:5,marginRight:5,marginBottom:0,width:100},n=Object(h.a)({},e,{textAlign:"center"}),a=this.props.value;return a||(a=this.handleNone()),o.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},o.a.createElement("div",{style:{paddingBottom:10}},this.props.setting.name),o.a.createElement("div",{style:{display:"flex",flexDirection:this.props.inputField.params.vertical?"column":"row",justifyContent:"center",alignItems:"center"},className:"arrayContainer"},a.map((function(e,a){return o.a.createElement(Me,{value:e,onChange:function(e){return t.changeValue(e,a)},style:n})}))))}}]),n}(a.Component),Be=n(170),ze=Object(Be.d)((function(){return o.a.createElement(U.e,{size:20,color:"gray"})})),Ue=Object(Be.c)((function(t){return o.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},t.sortable?o.a.createElement(ze,null):null,o.a.createElement(Ye,t),t.remove?o.a.createElement(qt.b,{color:"darkred",size:20,onClick:t.remove}):null)})),Fe=Object(Be.b)((function(t){var e=t.children;return o.a.createElement("div",null,e)})),He=function(t){Object(N.a)(n,t);var e=Object(x.a)(n);function n(){var t;Object(D.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))).changeValue=function(e,n){var a=p.a.cloneDeep(t.sanitizeVal());a[n]=e,t.props.onChange(a)},t.sanitizeVal=function(){return t.props.value?t.props.value:t.handleNone()},t.handleNone=function(){return[]},t.addItem=function(){t.props.onChange([].concat(Object(I.a)(t.sanitizeVal()),[null]))},t.removeItem=function(e){t.props.onChange(t.sanitizeVal().filter((function(t,n){return n!=e})))},t.onSortEnd=function(e){var n=e.oldIndex,a=e.newIndex;t.props.onChange(Object(Be.a)(t.sanitizeVal(),n,a))},t}return Object(G.a)(n,[{key:"render",value:function(){var t=this,e=this.sanitizeVal();return o.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},o.a.createElement("div",{style:{paddingBottom:10}},this.props.setting.name),o.a.createElement(Fe,{onSortEnd:this.onSortEnd,useDragHandle:!0},e.map((function(e,n){return o.a.createElement(Ue,{key:"item-".concat(n),index:n,value:e,onValueChange:function(e){return t.changeValue(e,n)},remove:function(){return t.removeItem(n)},sortable:t.props.setting.inputField.params.sortable,setting:t.props.setting.inputField.params.itemInput})}))),o.a.createElement(qt.a,{"data-tip":"Add a new item",onClick:this.addItem,size:20,color:"green"}))}}]),n}(a.Component),Ke={textinput:rt,switch:Ce,dropdown:Ie,color:Ge,rangeslider:Ne,range:Le,number:Me,queries:Re,vector:Ve,list:He},We=function(t){Object(N.a)(n,t);var e=Object(x.a)(n);function n(t){var a;return Object(D.a)(this,n),(a=e.call(this,t)).w=function(t){if(t)for(var e=["s","m","l"].map((function(e){return t.indexOf(e)>=0})),n=["small","medium","infinity"].indexOf(a.props.browser.mediaType);n>-1;n--){if(e[n])return p.a.find(t.split(" "),(function(t){return t.indexOf(["s","m","l"][n])>=0})).substr(1)}},a.changeSettingValue=function(t){a.props.onValueChange?a.props.onValueChange(t):a.props.changeSettings(a.props.onSettingChangeType,a.props.setting.key,t,a.props.onSettingChangeExtraParams)},a.state={},a}return Object(G.a)(n,[{key:"render",value:function(){var t=this,e=this.props.setting.inputField,n=Ke[e.type];if(!n)return null;var a=o.a.createElement(n,Object.assign({},this.props,{inputField:e,onChange:function(e){return t.changeSettingValue(e)}})),s={"data-tip":(this.props.setting.help?this.props.setting.help+"<br>":"")+"Default: "+(this.props.setting.default||"None"),"data-multiline":!0,"data-effect":"solid","data-place":"color"==e.type?"bottom":"top"},r=null==this.props.value?"rgba(230,230,230,0.4)":void 0;return o.a.createElement("div",Object.assign({onClick:function(n){return"queries"!=e.type&&n.ctrlKey?t.changeSettingValue(null==t.props.value?t.props.setting.default:null):null},style:Object(h.a)({backgroundColor:r,paddingTop:10,paddingBottom:10,paddingLeft:20,paddingRight:20,borderRadius:3,marginTop:20,marginBottom:20,width:this.w(e.width)},e.style)},s),a)}}]),n}(a.Component);We.number=function(t){return["","-"].includes(t)?t:Number(t)};var qe={changeSettings:function(t,e,n,a){return{type:t,settingKey:e,value:n,extraParams:a}}},Ye=Object(_.b)((function(t){return{browser:t.browser}}),qe)(We),Xe=n(498),Qe=n.n(Xe),Je=function(t){Object(N.a)(n,t);var e=Object(x.a)(n);function n(t){var a;return Object(D.a)(this,n),(a=e.call(this,t)).hotKeysHandlers={MOVE_EXPANDED_UP:function(){return a.moveExpanded("up")},MOVE_EXPANDED_DOWN:function(){return a.moveExpanded("down")}},a.moveExpanded=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"down";"up"==e?t=0!=a.state.expanded?a.state.expanded-1:2:"down"==e&&(t=2!=a.state.expanded?a.state.expanded+1:0),a.setState({expanded:t})},a.renderSettingsGroup=function(t){return t.map((function(t){return t.inputField?o.a.createElement(Ye,{key:t.key,setting:t,value:a.props.settings[t.key],onSettingChangeType:a.props.onSettingChangeType,onSettingChangeExtraParams:a.props.onSettingChangeExtraParams}):null}))},a.renderSettingsGroups=function(t){return a.props.paramGroups.map((function(e,n){var s=e.key?e.key:"null",r=t[s];if(!r)return null;var i=p.a.groupBy(r,"subGroup"),l=(e.subGroups?[{key:"null",name:null}].concat(Object(I.a)(e.subGroups)):[{key:"null",name:null}]).map((function(t){var e=t.key,n=t.name;return i[e]?o.a.createElement("div",{key:e},o.a.createElement("div",{style:{paddingBottom:20,fontWeight:"bold",fontSize:"1.3em",textAlign:"left"}},n),o.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",alignItems:"center"}},a.renderSettingsGroup(i[e]))):null})),c=function(){return a.props.submitSettings(r.reduce((function(t,e){return t[e.key]=a.props.settings[e.key],t}),{}))},u={SUBMIT_SETTINGS:c,UNDO_SETTINGS:a.props.undoSettings};return o.a.createElement(Oe.a,{key:s},o.a.createElement(Se.a,{style:{display:"flex",justifyContent:"center",alignItems:"center"}},o.a.createElement(Ee.a,null,e.icon),o.a.createElement("span",{style:{paddingLeft:10}},e.name)),o.a.createElement(je.a,null,o.a.createElement(dt.HotKeys,{keyMap:vt,handlers:u},o.a.createElement(dt.ObserveKeys,null,o.a.createElement("blockquote",{style:{textAlign:"left"}},Qe()(e.description)),l,o.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-around"}},o.a.createElement(it.a,{onClick:a.props.undoSettings,"data-tip":"This will roll back to previous settings.<br> IT AFFECTS ALL GROUPS OF PARAMETERS, not only this one.",className:"orange",style:{margin:20}},o.a.createElement(z.a,null),"Previous settings"),o.a.createElement(it.a,{"data-tip":"This will restore all settings to the plot's defaults",className:"red",style:{margin:20}},o.a.createElement(U.j,null),"Restore defaults"),o.a.createElement(it.a,{"data-tip":"This will change the settings and will update everything accordingly.<br> IT ONLY AFFECTS THIS GROUP OF SETTINGS, not all settings",onClick:c,className:"blue",style:{margin:20}},"Submit settings",o.a.createElement(z.b,null)))))))}))},a}return Object(G.a)(n,[{key:"render",value:function(){var t=p.a.groupBy(this.props.params,"group");return o.a.createElement("div",{style:this.props.style},this.renderSettingsGroups(t))}}]),n}(a.Component),Ze=function(t){Object(N.a)(n,t);var e=Object(x.a)(n);function n(){var t;Object(D.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))).hotKeysHandlers={UNDO_SETTINGS:function(){return t.undoSettings()},SUBMIT_ALL_SETTINGS:function(){return t.submitSettings("all")}},t.submitSettings=function(e){(e="all")&&(e=t.props.activePlot.unsubmittedSettings),pt.updatePlotSettings(t.props.activePlot.id,e)},t.undoSettings=function(){pt.undoPlotSettings(t.props.activePlot.id)},t}return Object(G.a)(n,[{key:"render",value:function(){var t=this.props.activePlot;if(!t)return null;var e=Object(h.a)({},t.settings,{},t.unsubmittedSettings),n=o.a.createElement(Je,{settings:e,params:t.params,paramGroups:t.paramGroups,onSettingChangeType:"CHANGE_PLOT_SETTINGS",onSettingChangeExtraParams:{plotID:t.id},submitSettings:this.submitSettings,undoSettings:this.undoSettings});return o.a.createElement("div",{style:Object(h.a)({},this.props.style)},o.a.createElement(dt.GlobalHotKeys,{keyMap:bt.global,handlers:this.hotKeysHandlers}),o.a.createElement(he.a,{container:!0},o.a.createElement(he.a,{item:!0,sm:12,md:4,style:{height:"90vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},o.a.createElement(Ot,{plot:t,style:{height:"80vh"}})),o.a.createElement(he.a,{item:!0,sm:12,md:8,style:{padding:20,display:"flex",flexDirection:"column"}},"infinity"==this.props.browser.mediaType?o.a.createElement("div",{className:"scrollView",style:{maxHeight:"90vh"}},n):n)),o.a.createElement(L.a,{multiline:!0,disable:!!this.props.session.settings&&!this.props.session.settings.showTooltips}))}}]),n}(a.Component),$e={setCurrentSession:H,addPlots:K,setActivePlot:Y,setNewStructures:W,informLoadedPlot:$,informLoadingPlot:Z},tn=Object(_.b)((function(t){return{plots:t.plots,structures:t.structures,active:t.active,activePlot:A(t),session:t.session,browser:t.browser}}),$e)(Ze),en=function(t){Object(N.a)(n,t);var e=Object(x.a)(n);function n(t){var a;return Object(D.a)(this,n),(a=e.call(this,t)).submitSettings=function(t){pt.updateSessionSettings(t)},a.undoSettings=function(){pt.undoSessionSettings()},a.state={},a}return Object(G.a)(n,[{key:"render",value:function(){return p.a.isEmpty(this.props.session)?null:o.a.createElement("div",{className:"scrollView",style:Object(h.a)({},this.props.style,{padding:20})},o.a.createElement(Je,{defaultActiveKey:1,settings:this.props.session.settings,params:this.props.session.params,paramGroups:this.props.session.paramGroups,onSettingChangeType:"CHANGE_SESSION_SETTINGS",submitSettings:this.submitSettings,undoSettings:this.undoSettings}),o.a.createElement(L.a,{multiline:!0,disable:!!this.props.session.settings&&!this.props.session.settings.showTooltips}))}}]),n}(a.Component),nn=Object(_.b)((function(t){return{session:t.session}}),(function(t){return{setCurrentSession:function(e){return t(H(e))}}}))(en),an=n(499),on=n.n(an),sn=n(1493),rn=function(t){Object(N.a)(n,t);var e=Object(x.a)(n);function n(t){var a;return Object(D.a)(this,n),(a=e.call(this,t)).applyMethod=function(){pt.callPlotShortcut(a.props.plot.id,a.props.shortcut)},a.renderDetails=function(){},a.state={showingDetails:!1},a}return Object(G.a)(n,[{key:"render",value:function(){return o.a.createElement(Oe.a,null,o.a.createElement(Se.a,{style:{display:"flex",cursor:"pointer",justifyContent:"space-between",alignItems:"center"}},o.a.createElement("span",{style:{color:"gray",marginRight:10}},this.props.shortcut),o.a.createElement("span",{style:{fontWeight:"bold"}},this.props.info.name)),o.a.createElement(je.a,{style:{fontSize:13}},o.a.createElement(on.a,{source:this.props.info.description})),o.a.createElement(sn.a,null,o.a.createElement(it.a,{onClick:this.applyMethod},"APPLY METHOD")))}}]),n}(a.Component),ln=function(t){Object(N.a)(n,t);var e=Object(x.a)(n);function n(){return Object(D.a)(this,n),e.apply(this,arguments)}return Object(G.a)(n,[{key:"render",value:function(){var t=this;return o.a.createElement("div",{className:"scrollView",style:{textAlign:"left",borderRadius:3,maxHeight:"90vh"}},Object.keys(this.props.plot.shortcuts).map((function(e){return o.a.createElement(rn,{plot:t.props.plot,shortcut:e,info:t.props.plot.shortcuts[e]})})))}}]),n}(a.Component),cn=function(t){Object(N.a)(n,t);var e=Object(x.a)(n);function n(){var t;Object(D.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))).hotKeysHandlers={},t}return Object(G.a)(n,[{key:"render",value:function(){return this.props.activePlot?o.a.createElement("div",{style:Object(h.a)({},this.props.style)},o.a.createElement(dt.GlobalHotKeys,{keyMap:bt.global,handlers:this.hotKeysHandlers}),o.a.createElement(he.a,{container:!0},o.a.createElement(he.a,{item:!0,sm:12,md:4,style:{height:"90vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},o.a.createElement(Ot,{plot:this.props.activePlot,style:{height:"80vh"}})),o.a.createElement(he.a,{item:!0,sm:12,md:8,style:{padding:20,display:"flex",flexDirection:"column"}},o.a.createElement(ln,{plot:this.props.activePlot}))),o.a.createElement(L.a,{multiline:!0,disable:!!this.props.session.settings&&!this.props.session.settings.showTooltips})):null}}]),n}(a.Component),un={setCurrentSession:H,addPlots:K,setActivePlot:Y,setNewStructures:W,informLoadedPlot:$,informLoadingPlot:Z},pn=Object(_.b)((function(t){return{plots:t.plots,structures:t.structures,active:t.active,activePlot:A(t),session:t.session,browser:t.browser}}),un)(cn),dn=n(313);var hn=function(){var t=Object(a.useCallback)((function(t){t.forEach((function(t){pt.sendFile(t)}))}),[]),e=Object(dn.useDropzone)({onDrop:t}),n=e.getRootProps,s=e.getInputProps;return o.a.createElement("div",n(),o.a.createElement("input",s()),o.a.createElement("p",null,"Drag 'n' drop some files here, or click to select files"))},mn=n(316),gn=function(t){Object(N.a)(n,t);var e=Object(x.a)(n);function n(t){var a;return Object(D.a)(this,n),(a=e.call(this,t)).state={connected:pt.socket.connected},a}return Object(G.a)(n,[{key:"componentDidMount",value:function(){var t=this;pt.onConnect((function(){return t.setState({connected:!0})})),pt.onDisconnect((function(){return t.setState({connected:!1})}))}},{key:"render",value:function(){var t=this.state.connected?{backgroundColor:"lightgreen"}:{backgroundColor:"salmon"};return o.a.createElement("div",Object.assign({},this.props,{style:Object(h.a)({},t,{},this.props.style),"data-tip":this.state.connected?"Connected to ".concat(pt.apiAddress):"Currently not connected","data-place":"left","data-background-color":t.backgroundColor}),this.state.connected?o.a.createElement(mn.a,{color:"green",size:20}):o.a.createElement(mn.b,{color:"darkred",size:20}))}}]),n}(a.Component),fn=n(501),vn=n.n(fn),bn=function(t){Object(N.a)(n,t);var e=Object(x.a)(n);function n(){return Object(D.a)(this,n),e.apply(this,arguments)}return Object(G.a)(n,[{key:"componentDidMount",value:function(){new vn.a({canvasContainerID:"speck-root",canvasID:"speck-canvas"})}},{key:"render",value:function(){return o.a.createElement("div",{id:"speck-root",style:Object(h.a)({},this.props.style,{justifyContent:"center",alignItems:"center",display:"flex"})},o.a.createElement("canvas",{id:"speck-canvas",style:{width:800,height:800}}))}}]),n}(a.Component),yn=n(312),En=n.n(yn),On=n(502),Sn=n.n(On),jn=(n(1435),{editable:!0}),Tn=function(t){Object(N.a)(n,t);var e=Object(x.a)(n);function n(t){var a;Object(D.a)(this,n),(a=e.call(this,t)).hotKeysHandlers={UNDO_SETTINGS:function(){return a.undoSettings()},SUBMIT_ALL_SETTINGS:function(){return a.submitSettings("all")}},a.submitSettings=function(t){(t="all")&&(t=a.props.activePlot.unsubmittedSettings),pt.updatePlotSettings(a.props.activePlot.id,t)},a.undoSettings=function(){pt.undoPlotSettings(a.props.activePlot.id)};var o=t.activePlot;return a.state=o.figure,a}return Object(G.a)(n,[{key:"componentWillUnmount",value:function(){pt.updateFigure(this.props.activePlot.id,Object(h.a)({},this.state,{overwrite:!0}))}},{key:"render",value:function(){var t=this;return this.props.activePlot?o.a.createElement(Sn.a,{data:this.state.data,layout:this.state.layout,config:jn,frames:this.state.frames,plotly:En.a,style:Object(h.a)({},this.props.style),onUpdate:function(e,n,a){return t.setState({data:e,layout:n,frames:a})},useResizeHandler:!0,debug:!0,advancedTraceTypeSelector:!0}):null}}]),n}(a.Component),Cn=Object(_.b)((function(t){return{activePlot:A(t)}}),null)(Tn),Pn=n(318);function kn(t){var e=Object(a.useRef)(),n=Object(a.useState)(!1),s=Object(Lt.a)(n,2),r=s[0],i=s[1],l=Object(a.useState)(!1),c=Object(Lt.a)(l,2),u=c[0],p=c[1];return Object(Pn.b)((function(){e.current.rotation.x=e.current.rotation.y+=.01})),o.a.createElement("mesh",Object.assign({},t,{ref:e,scale:u?[1.5,1.5,1.5]:[1,1,1],onClick:function(t){return p(!u)},onPointerOver:function(t){return i(!0)},onPointerOut:function(t){return i(!1)}}),o.a.createElement("boxBufferGeometry",{attach:"geometry",args:[1,1,1]}),o.a.createElement("meshStandardMaterial",{attach:"material",color:r?"hotpink":"orange"}))}function An(t){return o.a.createElement(Pn.a,Object.assign({style:t.style},t),o.a.createElement("ambientLight",null),o.a.createElement("pointLight",{position:[10,10,10]}),o.a.createElement(kn,{position:[-1.2,0,0],sign:-1}),o.a.createElement(kn,{position:[1.2,0,0]}))}Object(dt.configure)({logLevel:"debug",simulateMissingKeyPressEvents:!1});var _n=function(t){Object(N.a)(n,t);var e=Object(x.a)(n);function n(t){var a;return Object(D.a)(this,n),(a=e.call(this,t)).hotKeysHandlers={GO_TO_SETTINGS:function(){return a.props.setActivePage("settings")},GO_TO_DASHBOARD:function(){return a.props.setActivePage("plots")},GO_TO_MOLECULEVIEWER:function(){return a.props.setActivePage("moleculeViewer")},SHOW_AVAIL_HOTKEYS:function(){return console.warn(Object(dt.getApplicationKeyMap)())}},a.syncWithSession=function(t){if(!t)return pt.askForSession();a.props.setCurrentSession(t)},a.getNewPlot=function(){pt.newPlot(Object(h.a)({tabID:a.props.active.tab},a.state.plotToInitialize)),a.togglePlotInitializer()},a.togglePlotInitializer=function(t){var e="plotInitializer"==a.props.active.page;void 0!=t&void 0!=t.detail?(t.detail.forceShow&&!e&&a.props.setActivePage("plotInitializer"),t.detail.forceHide&&e&&a.props.setActivePage("plots")):a.props.setActivePage(e?"plots":"plotInitializer")},a.state={connected:pt.socket.connected,loadingPlots:[]},pt.onConnect((function(){a.setState({connected:!0})})),document.addEventListener("syncWithSession",(function(t){return a.syncWithSession(t.detail.session)})),document.addEventListener("updateTabs",(function(){return a.syncWithSession()})),document.addEventListener("loadingPlot",(function(t){a.setState({loadingPlots:[].concat(Object(I.a)(a.state.loadingPlots),[t.detail.plot_id])})})),document.addEventListener("plot",(function(e){var n=e.detail.plot;t.addPlots(Object(d.a)({},n.id,n)),a.setState({loadingPlots:a.state.loadingPlots.filter((function(t){return t!=n.id}))})})),document.addEventListener("newPlot",(function(){return a.syncWithSession()})),document.addEventListener("sessionUpdate",(function(t){t.detail.justUpdated.forEach((function(t){pt.getPlot(t)}))})),a}return Object(G.a)(n,[{key:"componentDidMount",value:function(){this.props.setActivePlot(void 0),this.listener=document.addEventListener("togglePlotInitializer",this.togglePlotInitializer)}},{key:"componentDidUpdate",value:function(){var t=this,e=p.a.find(this.props.tabs,["id",this.props.active.tab]);e&&e.plots.forEach((function(e){t.props.plots[e]||-1!=t.state.loadingPlots.indexOf(e)||pt.getPlot(e)}))}},{key:"render",value:function(){var t={plots:xt,settings:nn,plotLayoutEditor:Cn,plotTweaking:tn,plotMethods:pn,plotInitializer:ye,moleculeViewer:bn}[this.props.active.page];return this.state.connected?"plotLayoutEditor"==this.props.active.page?o.a.createElement("div",{style:{marginBottom:0,display:"flex",flexWrap:"wrap",height:"100vh",position:"relative"}},o.a.createElement(dt.GlobalHotKeys,{keyMap:Object(h.a)({},ht),handlers:this.hotKeysHandlers}),o.a.createElement(t,null),o.a.createElement(Wt,{style:{position:"absolute",bottom:0,right:0}}),o.a.createElement(f.a,null),o.a.createElement(gn,{connectedProps:{style:{backgroundColor:"lightgreen"}},style:{position:"absolute",right:0,top:0,margin:20,width:40,height:40,borderRadius:40,display:"flex",justifyContent:"center",alignItems:"center"}}),o.a.createElement(L.a,{multiline:!0,disable:!!this.props.session.settings&&!this.props.session.settings.showTooltips})):o.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},o.a.createElement(dt.GlobalHotKeys,{keyMap:Object(h.a)({},ht),handlers:this.hotKeysHandlers}),o.a.createElement(ee,{style:{paddingLeft:15,paddingRight:15,width:"10vw",minWidth:200,borderRight:"#ccc solid 1px"}}),o.a.createElement("div",{style:{flex:1,paddingLeft:20,height:"100vh",display:"flex",flexDirection:"column"}},"plots"==this.props.active.page?o.a.createElement(_t,null):null,o.a.createElement(t,{style:{flex:1}}),o.a.createElement(hn,null)),o.a.createElement(Wt,null),o.a.createElement(f.a,null),o.a.createElement(gn,{connectedProps:{style:{backgroundColor:"lightgreen"}},style:{position:"absolute",right:0,top:0,margin:20,width:40,height:40,borderRadius:40,display:"flex",justifyContent:"center",alignItems:"center"}}),o.a.createElement(L.a,{multiline:!0,disable:!!this.props.session.settings&&!this.props.session.settings.showTooltips})):o.a.createElement("div",{style:{height:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},o.a.createElement("div",{style:{paddingTop:100}},o.a.createElement("div",{style:{fontSize:"2.5em",fontWeight:"bold"}},"We are trying to connect to the sisl API.")),o.a.createElement(An,{camera:{position:[0,0,5]}}),o.a.createElement("div",{style:{paddingBottom:100,fontSize:"1.2em"}}," Meanwhile you can have fun with these two moving cubes. "),o.a.createElement(gn,{connectedProps:{style:{backgroundColor:"lightgreen"}},style:{position:"absolute",right:0,top:0,margin:20,width:40,height:40,borderRadius:40,display:"flex",justifyContent:"center",alignItems:"center"}}),o.a.createElement(f.a,null),o.a.createElement(L.a,{multiline:!0,disable:!!this.props.session.settings&&!this.props.session.settings.showTooltips}))}}]),n}(a.Component),wn={setCurrentSession:H,setActiveTab:X,setSessionTabs:q,setActivePlot:Y,addPlots:K,setNewStructures:W,setNewPlotables:function(t){return{type:"SET_PLOTABLES",newPlotables:t}},setActivePage:tt},In=Object(_.b)((function(t){return{plots:t.plots,structures:t.session.structures,tabs:t.session.tabs,active:t.active,session:t.session}}),wn)(_n),Dn=function(){var t=Object(i.c)(C,l.b);return{store:t,persistor:Object(c.b)(t)}}(),Gn=Dn.store,xn=Dn.persistor;var Nn=function(){return o.a.createElement(_.a,{store:Gn},o.a.createElement(w.a,{persistor:xn},o.a.createElement("div",{className:"App",style:{display:"flex",flexDirection:"column"}},o.a.createElement("div",{className:"appContent",style:{height:"100vh"}},o.a.createElement(In,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(Nn,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},525:function(t,e,n){t.exports=n(1438)},529:function(t,e,n){},530:function(t,e,n){},569:function(t,e){}},[[525,1,2]]]);
//# sourceMappingURL=main.3665570c.chunk.js.map