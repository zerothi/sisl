{"version":3,"sources":["redux/reducers/session.js","redux/actions/actionTypes.js","redux/reducers/plots.js","redux/reducers/active.js","redux/reducers/loading.js","redux/reducers/persist.js","redux/reducers/index.js","redux/actions/index.js","components/prompts/Prompt.js","apis/PythonApi.js","utils/hotkeys.js","components/plots/PlotCard.js","components/tabs/Tab.js","components/tabs/Tabs.js","components/plots/PlotDashboard.js","components/structures/StructureTag.js","components/controls/Controls.js","components/controls/NavigateButton.js","components/structures/PlotableTag.js","components/structures/StructurePicker.js","components/plotInitializer/PlotTypePicker.js","components/plotInitializer/TabPicker.js","components/plotInitializer/StructureRow.js","components/plotInitializer/MergeMethodPicker.js","components/plotInitializer/StructuresGroup.js","components/plotInitializer/PlotInitializer.js","components/loading/LoadingChip.js","components/loading/LoadingTracker.js","components/settings/inputFields/TextInput.js","components/settings/inputFields/Switch.js","components/settings/inputFields/Dropdown.js","components/settings/inputFields/ColorPicker.js","components/settings/inputFields/RangeSlider.js","components/settings/inputFields/Range.js","components/settings/inputFields/Numeric.js","components/settings/inputFields/QueriesInput.js","components/settings/inputFields/Array.js","components/settings/InputField.js","components/settings/SettingsContainer.js","pages/PlotTweaking.js","pages/Settings.js","components/pythonMethods/Method.js","components/pythonMethods/Methods.js","pages/PlotMethods.js","pages/Plots.js","redux/store/index.js","App.js","serviceWorker.js","index.js"],"names":["defaultState","session","state","action","type","console","log","newState","settings","settingKey","value","plots","newPlots","_","omit","plotID","plot","undefined","tab","structs","plotables","page","active","activePlot","activeTab","activeTabInSession","find","tabs","anyTabs","length","id","structsToDeactivate","Array","isArray","structID","filter","includes","pageName","plotablesToDeactivate","plotableID","loading","from","Date","persist","key","whitelist","reducer","persistReducer","storage","combineReducers","browser","createResponsiveStateReducer","small","medium","selectActiveStructs","map","structures","selectActivePlotables","setCurrentSession","addPlots","tabsIDs","setNewStructures","newStructures","setSessionTabs","setActivePlot","setActiveTab","setActiveStructs","deactivateStruct","informLoadingPlot","informLoadedPlot","setActivePage","setActivePlotables","Prompt","props","this","callback","content","onChange","e","setState","target","onClick","closeToast","Component","prompt","toast","autoClose","closeOnClick","onClose","arg","warn","connect","address","apiAddress","socket","io","setupListeners","connectionTimeOut","setTimeout","currentAddress","replace","newAddress","on","clearTimeout","requestSession","askForAuth","handleError","document","dispatchEvent","CustomEvent","detail","info","err","error","authenticating","toastPrompt","username","emit","path","loadSession","newProcessId","uuidv4","_sessionMethod","methodName","kwargs","args","updateSessionSettings","newSettings","undoSessionSettings","addTab","tabName","name","removeTab","tabID","updateTab","newParams","setTabLayouts","layouts","saveSession","getPlot","plot_id","newPlot","newPlotKwargs","removePlot","_plotMethod","showPlotFullScreen","updatePlotSettings","undoPlotSettings","callPlotShortcut","sequence","user","GLOBAL_HOT_KEYS","SHOW_AVAIL_HOTKEYS","GO_TO_SETTINGS","GO_TO_DASHBOARD","SAVE_SESSION","sequences","LOAD_SESSION","TABS_HOT_KEYS","global","MOVE_TO_NEXT_TAB","MOVE_TO_PREVIOUS_TAB","NEW_TAB","TRY","PLOTS_HOT_KEYS","PLOT_CARD_HOT_KEYS","GO_TO_PLOT_EDITING","GO_TO_PLOT_METHODS","FULL_SCREEN","REMOVE_PLOT","UNDO_PLOT_SETTINGS","SETTING_GROUP_HOT_KEYS","SUBMIT_SETTINGS","PLOT_TWEAKING_HOT_KEYS","UNDO_SETTINGS","SUBMIT_ALL_SETTINGS","PlotCard","hotKeys","querySelectorAll","hotKeysHandlers","goToPlotEditing","goToPlotMethods","undoSettings","shortcuts","PythonApi","setPlotAsActive","togglePlotAsActive","isActivePlot","isLoading","addEventListener","cou","Math","random","className","style","borderRadius","textAlign","color","layout","figure","backColor","paper_bgcolor","layoutSettings","groupBy","params","reduce","param","nestedLayoutParams","unflatten","delimiter","xaxis","yaxis","hotKeysKeyMap","TESTING","Object","keys","plotShortcuts","shortcut","activeStyles","borderStyle","borderWidth","borderColor","ctrlKey","keyMap","handlers","allowChanges","width","height","display","flexDirection","overflow","background","paddingTop","flex","ref","plotlyRef","useResizeHandler","data","autosize","frames","onUpdate","config","responsive","paddingLeft","paddingRight","Provider","size","margin","data-tip","href","multiline","disable","showTooltips","mapDispatchToProps","Tab","updateTabs","updateTabParams","newTabParams","updateTabName","blur","textContent","contentEditable","onBlur","onKeyUp","keyCode","Tabs","moveThroughTabs","newTab","direction","newI","i","findIndex","noTabsMessage","flexWrap","alignItems","marginTop","marginBottom","ResponsiveReactGridLayout","WidthProvider","Responsive","PlotDashboard","currentBreakpoint","compactType","mounted","lg","emptyDashboard","noPlotsMessage","justifyContent","fontSize","fontWeight","backgroundColor","padding","onBreakpointChange","breakpoint","onResizeStop","finalL","initL","higher","h","shouldComponentUpdate","newProps","_plotsInLayout","hasDifferentPlots","isDifferentTab","isEqual","onLayoutChange","onDrop","elemParams","alert","JSON","stringify","getLayout","newPlotLayout","draggableCancel","measureBeforeMount","useCSSTransforms","preventCollision","rowHeight","generateDOM","l","hotKeysHandler","pick","React","defaultProps","cols","md","sm","xs","xxs","x","grid_dims","y","w","setTabPlots","withHotKeys","StructureTag","struct","selected","toggleStruct","data-effect","split","slice","Controls","saveCurrentSession","syncWithSession","showPage","rootDir","margins","marginRight","to","floating","icon","Control","tooltip","ROUTES","IoMdSettings","hotKey","MdDashboard","NavigateButton","route","PlotableTag","plotable","togglePlotable","StructurePicker","togglePlotInitializer","selectedStructs","selectedPlotables","forceShow","forceHide","selectStructs","selectPlotables","xor","toggleStructDisplay","displayStructures","togglePlotablesDisplay","displayPlotables","toggleAlphabeticSorting","toggles","alphabeticSorting","toggleSearchByFolder","searchByFolder","toggleSelectedSorting","selectedSorting","toggleAll","onDisplay","filterStructs","onDisplaySelected","intersection","displayedStructs","displayedPlotables","searchString","forEach","object","index","isPlotable","newStructs","str","toTest","RegExp","test","newSearchString","noStructuresMessage","noMatchingStructuresMessage","structsAndPlotables","orderBy","noLayout","autocomplete","cursor","values","obj","activeStructs","activePlotables","PlotTypePicker","plotOptions","options","placeholder","isClearable","isSearchable","isMulti","TabPicker","label","defaultValue","StructureRow","structure","groupActive","marginLeft","moveStructToActiveGroup","OPTIONS","MergeMethodPicker","StructuresGroup","initializingOptions","plotClasses","mergeMethod","activenessStyles","splitGroup","removeGroup","setGroupAsActive","transition","borderTopLeftRadius","val","onInitParamChange","PlotInitializer","onStructsUpdate","prevActiveStructs","structureGroups","markActiveGroup","newGroup","activeGroupIndex","activeGroup","cleanUnselectedFromGroups","groups","cleanGroups","group","push","groupParams","defaultTabID","addGroup","iGroup","g","splitted","updateGroupInitParams","toggleVisibility","Event","updateInitializingOptions","getNewPlot","animation","plotClass","renderPlotable","deactivatePlotable","nothingToPlotMessage","prevProps","actions","right","paramName","borderLeftStyle","LoadingChip","getLoadingTime","loadingInit","moment","diff","format","time","now","interval","setInterval","clearInterval","processName","join","elapsed","LoadingTracker","loadingInfo","Text","setting","inputField","SwitchInput","paddingBottom","checked","Dropdown","ColorPicker","toggleColorPicker","displayColorPicker","tempcolor","colorPicker","position","bottom","hex","onChangeComplete","RangeSlider","Range","Number","InputField","number","Numeric","additionalProps","QueriesField","pickerID","addQuery","newQuery","queryForm","queryParam","default","changeSettingValue","iQuery","paramKey","paramValue","newValue","cloneDeep","renderInputField","fieldLayout","String","renderQuery","query","ArrayInput","changeValue","newVal","orientationStyles","vertical","inputStyle","INPUT_FIELDS","textinput","TextInput","switch","Switch","dropdown","rangeslider","range","queries","vector","string","isSizeDefined","sizeLabel","indexOf","mediaType","substr","changeSettings","onSettingChangeType","InputComponent","tooltipParams","help","dispatch","actionType","SettingsContainer","MOVE_EXPANDED_UP","moveExpanded","MOVE_EXPANDED_DOWN","newExpanded","expanded","refs","renderSettingsGroup","settingsGroup","renderSettingsGroups","groupedParams","paramGroups","paramGroup","iParamGroup","groupKey","subGrouped","itemContent","subGroups","submitSettings","folder","sub","charAt","toUpperCase","header","parse","description","popout","defaultActiveKey","PlotTweaking","setsCont","maxHeight","Settings","isEmpty","Method","applyMethod","renderDetails","showingDetails","source","iconRot","headerColor","transform","Methods","PlotMethods","configure","logLevel","simulateMissingKeyPressEvents","Plots","getApplicationKeyMap","askForSession","plotToInitialize","currentlyShowing","displayPlotInitializer","loadingPlots","justUpdated","listener","MainComponent","minWidth","setNewPlotables","newPlotables","store","createStore","rootReducer","responsiveStoreEnhancer","persistor","persistStore","getStoreAndPersistor","App","Boolean","window","location","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.5b5242ce.chunk.js","sourcesContent":["import { CLEAR_SESSION, SET_SESSION, CHANGE_SESSION_SETTINGS} from '../actions/actionTypes'\nimport _ from \"lodash\"\n\nconst defaultState = {}\n\nconst session = (state = defaultState, action) => {\n\n    switch (action.type) {\n        case SET_SESSION:\n            console.log(\"REDUX: Setting current session...\")\n            var newState = action.session\n            console.log(newState)\n\n            return newState\n        \n        case CHANGE_SESSION_SETTINGS:\n            console.log(\"REDUX: Changing current session settings (not submitting yet)...\")\n            var newState = {\n                ...state,\n                settings: {\n                    ...state.settings,\n                    [action.settingKey]: action.value\n                }\n            }\n            console.log(newState)\n            return newState\n\n        \n        case CLEAR_SESSION:\n            return defaultState\n\n        default:\n            return state\n    }\n}\n\nexport default session","export const ADD_PLOTS = 'ADD_PLOTS'\nexport const REMOVE_PLOT = 'REMOVE_PLOT'\nexport const CHANGE_PLOT_SETTINGS = 'CHANGE_PLOT_SETTINGS'\nexport const ADD_TABS = 'ADD_TABS'\nexport const SET_STRUCTURES = 'SET_STRUCTURES'\nexport const SET_PLOTABLES = 'SET_PLOTABLES'\nexport const SET_TAB_PLOTS = 'SET_TAB_PLOTS'\nexport const SET_SESSION_TABS = 'SET_SESSION_TABS'\n//Activate\nexport const SET_ACTIVE_PLOT = 'SET_ACTIVE_PLOT'\nexport const SET_ACTIVE_TAB = 'SET_ACTIVE_TAB'\nexport const SET_ACTIVE_STRUCTS = 'SET_ACTIVE_STRUCTS'\nexport const SET_ACTIVE_PLOTABLES = 'SET_ACTIVE_PLOTABLES'\n//Deactivate\nexport const DEACTIVATE_STRUCT = 'DEACTIVATE_STRUCT'\nexport const DEACTIVATE_PLOTABLE = 'DEACTIVATE_PLOTABLE'\nexport const SET_SESSION = 'SET_SESSION'\nexport const CHANGE_SESSION_SETTINGS = 'CHANGE_SESSION_SETTINGS'\nexport const CLEAR_SESSION = 'CLEAR_SESSION'\nexport const START_LOADING_PLOT = 'START_LOADING_PLOT'\nexport const END_LOADING_PLOT = 'END_LOADING_PLOT'\nexport const SET_ACTIVE_PAGE = 'SET_ACTIVE_PAGE'\n\n\n","import { ADD_PLOTS, CLEAR_SESSION, REMOVE_PLOT } from '../actions/actionTypes'\nimport _ from \"lodash\"\n\nconst defaultState = {};\n\nconst plots = (state = defaultState, action) => {\n    switch (action.type) {\n        case ADD_PLOTS:\n            console.log(\"REDUX: Storing a new plot...\")\n            let newState = {\n                ...state,\n                ...action.newPlots,\n            }\n            console.log(newState)\n            return newState\n        \n        case REMOVE_PLOT:\n            return _.omit(state, [action.plotID])\n        \n        case CLEAR_SESSION:\n            return defaultState\n            \n        default:\n            return state\n    }\n}\n\nexport default plots","import { \n    SET_ACTIVE_PLOT,\n    SET_ACTIVE_TAB,\n    CLEAR_SESSION,\n    CHANGE_PLOT_SETTINGS,\n    SET_ACTIVE_STRUCTS,\n    SET_ACTIVE_PLOTABLES,\n    DEACTIVATE_STRUCT,\n    SET_ACTIVE_PAGE,\n    DEACTIVATE_PLOTABLE,\n    SET_STRUCTURES,\n    SET_PLOTABLES,\n    SET_SESSION\n} from '../actions/actionTypes'\n\nimport _ from \"lodash\"\n\nconst defaultState = {plot: undefined, tab: undefined, structs: [], plotables:[], page: \"plots\"};\n\nconst active = (state = defaultState, action) => {\n    switch (action.type) {\n        case SET_ACTIVE_PLOT:\n            console.log(\"REDUX: Setting active plot...\")\n            var newState = {\n                ...state,\n                plot: action.activePlot,\n            }\n            console.log(newState)\n            return newState\n        \n        case CHANGE_PLOT_SETTINGS:\n            console.log(\"REDUX: Changing plot settings (not submitting yet)...\")\n            var newState = {\n                ...state,\n                plot: {\n                    ...state.plot,\n                    settings: {\n                        ...state.plot.settings,\n                        [action.settingKey]: action.value\n                    }\n                },\n            }\n            console.log(newState)\n            return newState\n\n        case SET_ACTIVE_TAB:\n            console.log(\"REDUX: Setting active tab...\")\n            var newState = {\n                ...state,\n                tab: action.activeTab,\n            }\n            console.log(newState)\n            return newState\n        \n        case SET_SESSION:\n\n            const activeTabInSession = _.find(action.session.tabs, [\"id\", state.tab])\n            const anyTabs = action.session.tabs.length == 0\n            \n            if (activeTabInSession) {\n                return state\n            } else if (anyTabs){\n                return {...state, tab: action.session.tabs[0].id}\n            } else {\n                return { ...state, tab: null}\n            }\n        \n        case SET_ACTIVE_STRUCTS:\n            \n            var newState = {\n                ...state,\n                structs: action.structs,\n            }\n\n            return newState\n        \n        case SET_STRUCTURES:\n\n            return { ...state, structs: []}\n        \n        case DEACTIVATE_STRUCT:\n\n            let structsToDeactivate = Array.isArray(action.structID) ? action.structID : [action.structID]\n\n            var newState = {\n                ...state,\n                structs: state.structs.filter( structID => !structsToDeactivate.includes(structID) ),\n            }\n\n            return newState\n        \n        case SET_ACTIVE_PAGE:\n\n            var newState = {\n                ...state,\n                page: action.pageName,\n            }\n\n            return newState\n        \n        case SET_ACTIVE_PLOTABLES:\n        \n            var newState = {\n                ...state,\n                plotables: action.plotables,\n            }\n\n            return newState\n        \n        case SET_PLOTABLES:\n\n            return { ...state, plotables: [] }\n        \n        case DEACTIVATE_PLOTABLE:\n\n            let plotablesToDeactivate = Array.isArray(action.plotableID) ? action.plotableID : [action.plotableID]\n    \n            var newState = {\n                ...state,\n                plotables: state.plotables.filter( plotableID => !plotablesToDeactivate.includes(plotableID) ),\n            }\n\n            return newState\n        \n        case CLEAR_SESSION:\n            return defaultState\n                \n        default:\n            return state\n    }\n}\n\nexport default active","import { \n    START_LOADING_PLOT,\n    END_LOADING_PLOT\n} from '../actions/actionTypes'\n\nimport _ from 'lodash';\n\nconst loading = (state = {plots:{}}, action) => {\n    switch (action.type) {\n        case START_LOADING_PLOT:\n            console.log(\"REDUX: Setting active plot...\")\n            var newState = {\n                ...state,\n                plots: {\n                    ...state.plots,\n                    [action.plot.id]: {\n                        ...action.plot,\n                        from: new Date()\n                    }\n                }\n            }\n            console.log(newState)\n            return newState\n        \n        case END_LOADING_PLOT:\n            console.log(\"REDUX: Changing plot settings (not submitting yet)...\")\n            var newState = {\n                ...state,\n                plots: _.omit(state.plots, [action.plotID]),\n            }\n            console.log(newState)\n            return newState\n                \n        default:\n            return state\n    }\n}\n\nexport default loading","import storage from \"redux-persist/lib/storage\"\nimport { persistReducer } from 'redux-persist';\nexport function persist(key, whitelist, reducer) {\n    return persistReducer({\n        key,\n        storage,\n        whitelist,\n    }, reducer);\n}","import { combineReducers } from 'redux'\nimport {createResponsiveStateReducer} from 'redux-responsive'\n\nimport session from './session'\nimport plots from './plots'\nimport active from './active'\nimport loading from './loading'\nimport { persist } from './persist'\n\nexport default combineReducers({\n    session,\n    plots,\n    loading: persist('loading', ['plots'], loading),\n    active: persist( 'active', ['tab', 'plot'], active),\n    browser: createResponsiveStateReducer({\n        small: 600,\n        medium: 992,\n    })\n})\n\nexport const selectActiveStructs = (state) => {\n    return state.active.structs.map(structID => state.session.structures[structID])\n}\n\nexport const selectActivePlotables = (state) => {\n    return state.active.plotables.map(plotableID => state.session.plotables[plotableID])\n}","import { \n    ADD_PLOTS,\n    REMOVE_PLOT,\n    ADD_TABS,\n    SET_STRUCTURES,\n    SET_TAB_PLOTS,\n    SET_SESSION_TABS,\n    SET_ACTIVE_PLOT,\n    SET_ACTIVE_TAB,\n    CLEAR_SESSION,\n    SET_SESSION,\n    SET_ACTIVE_STRUCTS,\n    DEACTIVATE_STRUCT,\n    START_LOADING_PLOT,\n    END_LOADING_PLOT,\n    SET_ACTIVE_PAGE,\n    DEACTIVATE_PLOTABLE,\n    SET_ACTIVE_PLOTABLES,\n    SET_PLOTABLES\n} from './actionTypes'\n\nexport const setCurrentSession = (session) => {\n\n    return {\n        type: SET_SESSION,\n        session\n    }\n}\n    \nexport const addPlots = (newPlots, tabsIDs) => ({\n    type: ADD_PLOTS,\n    newPlots,\n    tabsIDs\n})\n\nexport const removePlot = (plotID, tabID) => ({\n    type: REMOVE_PLOT,\n    plotID,\n    tabID\n})\n\nexport const changeSettings = (actionType, settingKey, value) => ({\n    type: actionType, //Valid action types are all of type CHANGE_<something>_SETTINGS\n    settingKey,\n    value\n})\n\nexport const addTabs = (newTabs) => ({\n    type: ADD_TABS,\n    newTabs\n})\n\nexport const setNewStructures = (newStructures) => ({\n    type: SET_STRUCTURES,\n    newStructures\n})\n\nexport const setTabPlots = (tabID, plots) => ({\n    type: SET_TAB_PLOTS,\n    tabID,\n    plots\n})\n\nexport const setSessionTabs = (tabs) => ({\n    type: SET_SESSION_TABS,\n    tabs\n})\n\nexport const setActivePlot = (plot) => ({\n    type: SET_ACTIVE_PLOT,\n    activePlot: plot\n})\n\nexport const setActiveTab = (tab) => ({\n    type: SET_ACTIVE_TAB,\n    activeTab: tab\n})\n\nexport const clearSession = () => ({\n    type: CLEAR_SESSION,\n})\n\nexport const setActiveStructs = (structs) => ({\n    type: SET_ACTIVE_STRUCTS,\n    structs: structs\n})\n\nexport const deactivateStruct = (structID) => ({\n    type: DEACTIVATE_STRUCT,\n    structID\n})\n\nexport const informLoadingPlot = (plot) => ({\n    type: START_LOADING_PLOT,\n    plot\n})\n\nexport const informLoadedPlot = (plotID) => ({\n    type: END_LOADING_PLOT,\n    plotID\n})\n\nexport const setActivePage = (pageName) => ({\n    type: SET_ACTIVE_PAGE,\n    pageName\n})\n\nexport const setNewPlotables = (newPlotables) => ({\n    type: SET_PLOTABLES,\n    newPlotables\n})\n\nexport const setActivePlotables = (plotables) => ({\n    type: SET_ACTIVE_PLOTABLES,\n    plotables\n})\n\nexport const deactivatePlotable = (plotableID) => ({\n    type: DEACTIVATE_PLOTABLE,\n    plotableID\n})\n\n\n\n","import React, { Component } from 'react'\nimport { toast } from 'react-toastify'\n\nexport class Prompt extends Component {\n\n    constructor(props){\n        super(props)\n\n        this.state = {\n            value: \"\"\n        }\n    }\n\n    componentWillUnmount(){\n        this.props.callback(this.state.value)\n    }\n\n    render() {\n        return (\n            <div>\n                <div>{this.props.content}</div>\n                <input value={this.state.value} onChange={(e) => {this.setState({value: e.target.value})}}/>\n                <button onClick={this.props.closeToast}>Submit</button>\n            </div>\n        )\n    }\n\n}\n\nconst prompt = (content, callback, props) => {\n\n    toast(<Prompt content={content} callback={callback} {...props}/>, {autoClose: false, closeOnClick: false, onClose: (arg) => {console.warn(arg)} })\n\n}\n\nexport const connectionPrompt = (currentAddress, callback, props) => {\n\n    const content = <div>\n        <div>{\"Couldn't connect to \" + currentAddress}</div>\n        <div>Do you want to specify a different address for the API? (host:port)</div>\n    </div>\n\n    prompt(content, callback, props)\n\n}\n\nexport const authPrompt = (callback, props) => {\n\n    const content = <div>\n        <div>Authorization is required</div>\n        <div>We need you to provide your username:</div>\n    </div>\n\n    prompt(content, callback, props)\n\n} \n\nexport default prompt;\n","import io from 'socket.io-client';\nimport { toast } from 'react-toastify';\nimport { v4 as uuidv4 } from 'uuid';\nimport toastPrompt, {connectionPrompt} from '../components/prompts/Prompt';\n\nexport class PythonApi {\n\n    constructor() {\n\n        this.apiAddress = 'http://localhost:4000'\n\n        this.user = undefined\n\n        this.connect()\n\n        /*This can be dangerous in the browser if the user let's other websites\n        access this tab. By default it is not possible, one would have to download\n        an extension to make it possible, but still. */ \n        document.session = this\n\n    }\n\n    connect = (address) => {\n\n        if (address) this.apiAddress = address\n\n        this.socket = io(this.apiAddress);\n        this.setupListeners()\n\n        // Timeout to prompt the user for a new api address if the socket fails to connect\n        this.connectionTimeOut = setTimeout(() => {\n\n            connectionPrompt(this.apiAddress.replace(\"http://\", \"\"), (newAddress) => {\n                if (newAddress) {\n                    this.apiAddress = \"http://\" + newAddress\n                }\n                this.connect()\n            })\n            \n        }, 3000)\n\n        this.socket.connect()\n\n    }\n\n    setupListeners = () => {\n\n        this.socket.on('connect', () => {\n            clearTimeout(this.connectionTimeOut)\n            this.requestSession()\n        });\n\n        this.socket.on('auth_required', this.askForAuth)\n\n        this.socket.on('logged_in', this.requestSession)\n\n        this.socket.on('error', this.handleError);\n        \n        this.socket.on('current_session', (session) => {\n            document.dispatchEvent(new CustomEvent(\"syncWithSession\", { detail: { session } }))\n        })\n\n        this.socket.on('loading_plot', (info) => {\n            document.dispatchEvent(new CustomEvent(\"loadingPlot\", { detail: info }))\n        })\n\n        this.socket.on('plot', (plot) => {\n            document.dispatchEvent(new CustomEvent(\"plot\", { detail: { plot } }))\n        })\n\n    }\n\n    handleError = (err) => {\n        toast.error(\"THERE WAS A PYTHON ERROR:\\n\" + err)\n    }\n\n    askForAuth = () => {\n\n        if (this.authenticating) return\n\n        this.authenticating = true\n        toastPrompt((username) => {\n            this.socket.emit(\"login\", username)\n            this.authenticating = false\n        })\n    }\n\n    requestSession = (path) => {\n        this.socket.emit('request_session', path)\n    }\n\n    loadSession = (path) => {\n        this.requestSession(path)\n    }\n\n    newProcessId = uuidv4\n\n    _sessionMethod = (methodName, kwargs, callback, ...args) => {\n        /* With this you can call any session method\n        \n        However this method should not be directly used.\n        A new method should be defined in this class to avoid \n        headaches with changes in method names in sisl.viz.Session\n        \n        You have the possibility to set up a callback, but remember that \n        by default the session will be emitted by the server and its update\n        is automatic. Therefore, only use the callback if you are using a\n        \"getter\" method and you want to act according to the results. You may\n        want also to inform the user that the process has finished. But again,\n        this behavior should also be taken care of automatically.*/\n\n        if (callback) {\n            \n        }\n\n        this.socket.emit(\"apply_method_on_session\", methodName, kwargs, ...args)\n    }\n\n    updateSessionSettings = (newSettings) => {\n        this._sessionMethod(\"update_settings\", newSettings)\n    }\n\n    undoSessionSettings = () => {\n        this._sessionMethod(\"undo_settings\")\n    }\n\n    addTab = (tabName) => {\n        this._sessionMethod(\"add_tab\", {name: tabName})\n    }\n\n    removeTab = (tabID) => {\n        this._sessionMethod(\"remove_tab\", {tabID})\n    }\n\n    updateTab = (tabID, newParams) => {\n        this._sessionMethod(\"update_tab\", { tabID, newParams })\n    }\n\n    setTabLayouts = (tabID, layouts) => {\n        this.updateTab(tabID, {layouts})\n    }\n\n    saveSession = (path) => {\n        this._sessionMethod(\"save\", {path})\n    }\n\n    getPlot = (plotID) => {\n        document.dispatchEvent(new CustomEvent(\"updatingPlot\", {detail: {plot_id: plotID}}))\n        this.socket.emit(\"get_plot\", plotID)\n    }\n\n    newPlot = (newPlotKwargs) => {\n        this._sessionMethod(\"new_plot\", newPlotKwargs)\n    }\n\n    removePlot = (plotID) => {\n        this._sessionMethod(\"remove_plot\", null, null, plotID)\n    }\n\n    _plotMethod = (plotID, methodName, kwargs, callback, ...args) => {\n        this._sessionMethod(\"_run_plot_method\", kwargs, callback, plotID, methodName, ...args)\n    }\n\n    showPlotFullScreen = (plotID) => {\n        this._plotMethod(plotID, \"show\")\n    }\n\n    updatePlotSettings = (plotID, settings) => {\n        this._plotMethod(plotID, \"updateSettings\", settings)\n    }\n\n    undoPlotSettings = (plotID) => {\n        this._plotMethod(plotID, \"undoSettings\")\n    }\n\n    callPlotShortcut = (plotID, sequence) => {\n        this._plotMethod(plotID, \"call_shortcut\", null, null, sequence)\n    }\n\n}\n\nexport default new PythonApi();","import _ from 'lodash'\n\nexport const GLOBAL_HOT_KEYS = {\n\n    //HELP\n    SHOW_AVAIL_HOTKEYS:{\n        name: \"Show available hotkeys\",\n        sequence: \"shift+?\"\n    },\n\n    //NAVIGATION\n    GO_TO_SETTINGS: {\n        name: \"Go to settings\",\n        sequence: \"shift+s\",\n    },\n    GO_TO_DASHBOARD: {\n        name: \"Go to the plot's dashboard\",\n        sequence: \"shift+d\",\n    },\n\n    //SESSION\n    SAVE_SESSION: {\n        name: \"Save session\",\n        sequences: [\"ctrl+shift+s\", \"ctrl+alt+s\"]\n    },\n    LOAD_SESSION: {\n        name: \"Load session\",\n        sequences: [\"ctrl+shift+l\", \"ctrl+alt+l\"]\n    }\n\n}\n\nexport const ADDITIONAL_GLOBAL_HOT_KEYS = {\n    settings: {\n\n    },\n    plots:{\n        \n\n    }\n}\n\nexport const SETTINGS_HOT_KEYS = {\n\n}\n\nexport const TABS_HOT_KEYS = {\n    global: {\n        // TAB NAVIGATION\n        MOVE_TO_NEXT_TAB: {\n            name: \"Move to next tab\",\n            sequence: \"shift+t+right\",\n        },\n        MOVE_TO_PREVIOUS_TAB: {\n            name: \"Move to previous tab\",\n            sequence: \"shift+t+left\",\n        },\n        NEW_TAB: {\n            name: \"New tab\",\n            sequence: \"shift+t\",\n            action: \"keyup\"\n        },\n        TRY: \"shift+t+r\"\n    }\n}\n\nexport const PLOTS_HOT_KEYS = {\n    global: {\n        // TAB NAVIGATION\n        MOVE_TO_NEXT_TAB: {\n            name: \"Move to next tab\",\n            sequence: \"shift+right\",\n        },\n        MOVE_TO_PREVIOUS_TAB: {\n            name: \"Move to previous tab\",\n            sequence: \"shift+left\",\n        },\n    }\n}\n\nexport const PLOT_CARD_HOT_KEYS = {\n\n    GO_TO_PLOT_EDITING: {\n        name: \"Edit current plot\",\n        sequence: \"e\"\n    },\n    GO_TO_PLOT_METHODS: {\n        name: \"Go to current plot methods\",\n        sequence: \"m\"\n    },\n    FULL_SCREEN: {\n        name: \"See current plot in full screen in a different browser's tab\",\n        sequence: \"f\"\n    },\n    REMOVE_PLOT: {\n        name: \"Remove current plot\",\n        sequences: [\"del\",\"backspace\"]\n    },\n    UNDO_PLOT_SETTINGS: {\n        name: \"Undo current plot settings\",\n        sequence: \"ctrl+z\"\n    },\n\n}\n\nexport const STRUCTURE_PICKER_HOT_KEYS = {\n\n}\n\nexport const SETTING_CONTAINER_HOT_KEYS = {\n\n    MOVE_EXPANDED_UP:{\n        name: \"Expand the previous settings group\",\n        sequence: \"up\"\n    },\n    MOVE_EXPANDED_DOWN:{\n        name: \"Expand the next settings group\",\n        sequence: \"down\"\n    }\n\n}\n\nexport const SETTING_GROUP_HOT_KEYS = {\n\n    SUBMIT_SETTINGS:{\n        name: \"Submit this group's settings\",\n        sequence: \"shift+enter\"\n    },\n    \n}\n\nexport const PLOT_TWEAKING_HOT_KEYS = {\n    global:{\n        UNDO_SETTINGS: {\n            name:\"Undo settings\",\n            sequence: \"ctrl+z\"\n        },\n\n        SUBMIT_ALL_SETTINGS: {\n            name: \"Submit all settings\",\n            sequence: \"shift+enter\"\n        }\n    }\n}","import React, { Component } from 'react'\nimport Plot from 'react-plotly.js';\nimport { Card, Row, Icon } from 'react-materialize';\nimport { AiOutlineEdit, AiOutlineDelete, AiOutlineExport, AiOutlineFullscreen } from 'react-icons/ai'\nimport { FaHammer } from 'react-icons/fa'\nimport { IconContext } from 'react-icons'\n\nimport { CircleLoader} from 'react-spinners';\nimport ReactTooltip from \"react-tooltip\"\n\nimport _ from \"lodash\"\nimport {unflatten} from \"flat\"\n\n//--Redux\nimport { connect } from 'react-redux'\nimport { setActivePlot, removePlot, setSessionTabs, setActivePage, addPlots} from \"../../redux/actions\"\nimport PythonApi from '../../apis/PythonApi';\nimport { HotKeys } from 'react-hotkeys';\nimport { PLOT_CARD_HOT_KEYS } from '../../utils/hotkeys';\nimport { toast } from 'react-toastify';\n\nclass PlotCard extends Component {\n\n    constructor(props){\n        super(props)\n        this.state = {\n            isLoading: false,\n        }\n\n    }\n\n    hotKeys = () => document.querySelectorAll(\".plotCardHotKeys\")\n\n    hotKeysHandlers = {\n        GO_TO_PLOT_EDITING: () => this.goToPlotEditing(),\n        GO_TO_PLOT_METHODS: () => this.goToPlotMethods(),\n        FULL_SCREEN: () => this.showPlotFullScreen(),\n        UNDO_PLOT_SETTINGS: () => this.undoSettings(),\n        REMOVE_PLOT: () => this.removePlot(),\n    }\n\n    callPlotShortcut = (sequence) => {\n        toast.warn(\"Applying \" + this.props.plot.shortcuts[sequence].name + \" shortcut\")\n        PythonApi.callPlotShortcut(this.props.plot.id, sequence)\n    }\n\n    undoSettings = () => {\n\n        PythonApi.undoPlotSettings(this.props.plot.id)\n    }\n\n    componentDidMount(){\n        document.addEventListener(\"plotResize\", (e) => {\n            \n            if (e.detail.id == this.props.plot.id || e.detail.id == \"all\"){\n                this.setState({cou: Math.random()})          \n            }\n            \n        })\n    }\n\n    removePlot = () => {\n        PythonApi.removePlot(this.props.plot.id)   \n    }\n\n    goToPlotEditing = () => {\n        this.setPlotAsActive()\n        this.props.setActivePage(\"plotTweaking\")\n    }\n\n    goToPlotMethods = () => {\n        this.setPlotAsActive()\n        this.props.setActivePage(\"plotMethods\")\n    }\n\n    setPlotAsActive = () => {\n        this.props.setActivePlot(this.props.plot)\n    }\n\n    togglePlotAsActive = () => {\n        if (this.isActivePlot){\n            this.props.setActivePlot(undefined)\n        } else {\n            this.setPlotAsActive()\n        }\n    }\n\n    get isActivePlot(){\n        return this.props.active.plot && this.props.plot.id == this.props.active.plot.id\n    }\n\n    showPlotFullScreen = () => {\n        PythonApi.showPlotFullScreen(this.props.plot.id)\n    }\n\n    render() {\n\n        if (this.state.isLoading || !this.props.plot) {\n            return (\n                <Card \n                    className=\"plotcard\"\n                    style={{borderRadius: 15}}>\n                    <Row style={{textAlign: \"center\"}}>\n                        <CircleLoader color=\"#36D7B7\"/>\n                    </Row>\n                    <div>We are working hard to load your plot.</div>\n                </Card>\n            )\n        }\n\n        let layout = this.props.plot.figure.layout;\n        let backColor = this.props.plot.settings.paper_bgcolor || \"white\"\n\n        //If this is the active plot, we are going to overwrite the layout with the settings (so that user is able to see a preview)\n        if (this.props.active.plot && this.props.active.plot.id == this.props.plot.id){\n\n            backColor = this.props.active.plot.settings.paper_bgcolor || \"white\"\n\n            // let layoutSubGroups = _.groupBy( _.groupBy(this.props.active.plot.params, \"group\")[\"layout\"] , \"subGroup\")\n\n            // layout = {\n            //     ...layout,\n            //     ...layoutSubGroups[\"undefined\"].reduce((map, param) => {map[param.key] = this.props.active.plot.settings[param.key]; return map}, {} ),\n            //     \"xaxis\": {\n            //         ...layout.xaxis,\n            //         ...layoutSubGroups[\"xaxis\"].reduce((map, param) => {map[param.key.split(\"_\").pop()] = this.props.active.plot.settings[param.key]; return map}, {}),\n            //     },\n            //     \"yaxis\": {\n            //         ...layout.yaxis,\n            //         ...layoutSubGroups[\"yaxis\"].reduce((map, param) => {map[param.key.split(\"_\").pop()] = this.props.active.plot.settings[param.key]; return map}, {} ),\n            //     }\n\n            // }\n\n            let layoutParams = _.groupBy(this.props.active.plot.params, \"group\")[\"layout\"]\n\n            let layoutSettings = layoutParams.reduce((map,param) => {map[param.key] = this.props.active.plot.settings[param.key]; return map},{})\n\n            let nestedLayoutParams = unflatten( layoutSettings, {delimiter: \"_\"})\n\n\n            layout = {\n                ...layout,\n                ...layoutSettings,\n                \"xaxis\": {\n                    ...layout.xaxis,\n                    ...nestedLayoutParams.xaxis\n                },\n                \"yaxis\": {\n                    ...layout.yaxis,\n                    ...nestedLayoutParams.yaxis\n                }\n\n            }\n            \n        }\n\n        const hotKeysKeyMap = {\n            ...PLOT_CARD_HOT_KEYS,\n            TESTING: \"shift+r\",\n            ...Object.keys(this.props.plot.shortcuts).reduce((plotShortcuts, sequence) => {\n                let shortcut = this.props.plot.shortcuts[sequence]\n                if ([\"ctrl+z\", \"ctrl+alt+l\"].includes(sequence)) return plotShortcuts\n                    plotShortcuts[shortcut.name.replace(/ /g, \"_\")] = {\n                    sequence: sequence,\n                    ...shortcut\n                }\n                return plotShortcuts\n            }, {})\n        }\n\n        const hotKeysHandlers = {\n            ...this.hotKeysHandlers,\n            TESTING: () => console.warn(\"YEEEY\"),\n            ...Object.keys(this.props.plot.shortcuts).reduce((plotShortcuts, sequence) => {\n                let shortcut = this.props.plot.shortcuts[sequence]\n                if ([\"ctrl+z\", \"ctrl+alt+l\"].includes(sequence)) return plotShortcuts\n                plotShortcuts[shortcut.name.replace(/ /g, \"_\")] = () => this.callPlotShortcut(sequence)\n                return plotShortcuts\n            }, {})\n        }\n\n        const activeStyles = this.isActivePlot ? {\n            borderStyle: \"solid\",\n            borderWidth: \"2px\",\n            borderColor: \"black\"\n        } : {}\n\n        return <HotKeys\n                 className=\"plotCardHotKeys\"\n                 onClick={(e) => {if (e.ctrlKey){this.togglePlotAsActive()}}}\n                 keyMap={hotKeysKeyMap} handlers={hotKeysHandlers} allowChanges={true}\n                 style={ {width: \"100%\", height: \"100%\", display: \"flex\", flexDirection: \"column\", borderRadius: 3, overflow:\"hidden\", background: backColor, paddingTop: 5, ...activeStyles, ...this.props.style}}>\n                <div style={{flex:1}}>\n                    <Plot\n                        ref={plotlyRef => {\n                            this.plotlyRef = plotlyRef;\n                        }}\n                        useResizeHandler\n                        style={{ width: \"100%\", height: \"100%\"}}\n                        data={this.props.plot.figure.data}\n                        layout={{autosize: true, ...layout}}\n                        frames={this.props.plot.figure.frames}\n                        onClick={(data) => {}}\n                        onUpdate={(figure) => {}}\n                        config={{responsive: true}}\n                    />\n                </div>\n                \n            <div style={{display: \"flex\", paddingLeft: 10, paddingRight: 20}} className=\"card-action\">\n                <IconContext.Provider value={{size: 25, style:{margin: 5}}}>\n                    <div style={{flex:1, textAlign: \"left\"}}>\n                        <a data-tip=\"Full screen (f)\" href=\"#\" onClick={this.showPlotFullScreen}><AiOutlineFullscreen/></a> \n                    </div>\n\n                    <div>\n                        <a\n                            data-tip=\"Methods (m)\"\n                            href=\"#\"\n                            onClick={this.goToPlotMethods}><FaHammer/></a>\n                        <a\n                            data-tip=\"Edit (e)\"\n                            href=\"#\"\n                            onClick={this.goToPlotEditing}><AiOutlineEdit/></a>\n                        <a data-tip=\"Export data\" href=\"#\"><AiOutlineExport/></a>\n                        <a data-tip=\"Remove (supr)\" href=\"#\" onClick={this.removePlot}><AiOutlineDelete color=\"red\"/></a>\n                    </div> \n                </IconContext.Provider>\n                <ReactTooltip multiline disable={this.props.session.settings ? !this.props.session.settings.showTooltips : false}/>\n            </div>  \n        </HotKeys>\n    }\n}\n\nconst mapStateToProps = state => ({\n    plots: state.plots,\n    active: state.active,\n    session: state.session\n})\n\nconst mapDispatchToProps = {\n    setSessionTabs,\n    setActivePlot,\n    removePlot,\n    setActivePage,\n    addPlots\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PlotCard);\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\n\nimport PythonApi from '../../apis/PythonApi'\nimport { setActiveTab } from '../../redux/actions'\n\nimport { MdRemoveCircle } from 'react-icons/md'\n\nimport _ from \"lodash\"\n\nclass Tab extends Component {\n\n    updateTabs = (tabs) => {\n        document.dispatchEvent(new CustomEvent(\"updateTabs\", {detail: {tabs: tabs}}))\n    }\n\n    updateTabParams = (tabID, newTabParams) => {\n\n        PythonApi.updateTab(tabID, newTabParams)\n    }\n\n    removeTab = (tabID) => {\n\n        PythonApi.removeTab(tabID)\n\n    }\n\n    updateTabName = (e) => {e.target.blur(); this.updateTabParams(e.target.id, {name: e.target.textContent})}\n\n    render() {\n\n        let {id: tabID, name: tabName} = this.props.tab\n\n        let active = tabID == this.props.active.tab\n\n        return (\n            <div\n                    key={tabID}\n                    className={active ? \"active plotTab\" : \"plotTab\"}\n                    onClick={active ? null : ()=> this.props.setActiveTab(tabID)}>\n                <div\n                    id={tabID}\n                    contentEditable={active}\n                    \n                    onBlur={this.updateTabName}\n                    onKeyUp={(e) => {if (e.keyCode === 13) this.updateTabName(e)}}\n                    >{tabName}</div>\n                {active ? <div className=\"removeTabBut\" onClick={() => this.removeTab(tabID)}><MdRemoveCircle size={20}/></div> : null}\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    active: state.active,\n    tabs: state.tabs,\n})\n\nconst mapDispatchToProps = {\n    setActiveTab\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Tab);\n","import React, { Component } from 'react'\nimport Tab from './Tab'\nimport { setActiveTab } from '../../redux/actions'\nimport PythonApi from '../../apis/PythonApi'\nimport { connect } from 'react-redux'\nimport { MdCreateNewFolder } from 'react-icons/md'\n\nimport _ from \"lodash\"\nimport { GlobalHotKeys, HotKeys } from 'react-hotkeys'\nimport { TABS_HOT_KEYS } from '../../utils/hotkeys'\n\nexport class Tabs extends Component {\n\n    hotKeysHandlers = {\n        MOVE_TO_NEXT_TAB: () => this.moveThroughTabs(\"right\"),\n        MOVE_TO_PREVIOUS_TAB: () => this.moveThroughTabs(\"left\"),\n        NEW_TAB: () => this.newTab(),\n        TRY: () => console.warn(\"YES\")\n    }\n    \n    moveThroughTabs = (direction) => {\n\n        const tabs = this.props.tabs\n        const i = _.findIndex(tabs, [\"id\", this.props.active.tab])\n\n        var newI;\n        if (direction == \"left\"){\n            newI = i != 0 ? i-1 : tabs.length -1\n        } else if (direction == \"right\"){\n            newI = i != tabs.length - 1 ? i+1 : 0 \n        }\n\n        this.props.setActiveTab(tabs[newI].id)\n    }\n\n    updateTabs = (tabs) => {\n        document.dispatchEvent(new CustomEvent(\"updateTabs\", {detail: {tabs: tabs}}))\n    }\n\n    newTab = () => {\n\n        PythonApi.addTab()\n        \n    }\n\n    noTabsMessage = () => {\n        return <div style={{paddingLeft: 20}}>\n            <span style={{color: \"darkred\"}}>You don't seem to have any tab. </span>\n            That's wierd, but if that's what you want...\n        </div>\n    }\n\n    render() {\n\n        const tabs = this.props.tabs || []\n\n        return (\n            <div style={{display: \"flex\", flexWrap: \"wrap\", alignItems:\"center\", marginTop: 10, marginBottom: 5}}>\n                <GlobalHotKeys keyMap={TABS_HOT_KEYS.global} handlers={this.hotKeysHandlers}/>\n                <div onClick={this.newTab} data-tip=\"New tab\">\n                    <MdCreateNewFolder\n                        size={30}\n                        className=\"newTabIcon blue-text text-darken-3\"\n                        style={{paddingRight: 0}}/>\n                </div>\n                {tabs.length == 0 ? \n                    this.noTabsMessage()\n                    :\n                    tabs.map( tab => <Tab tab={tab}/>)\n                }\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    tabs: state.session.tabs,\n    active: state.active\n})\n\nconst mapDispatchToProps = {\n    setActiveTab\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Tabs);\n","import React, { Component } from \"react\";\n\nimport _ from \"lodash\"\n\n//--Components\nimport PlotCard from \"./PlotCard\";\n\n//--Redux\nimport { connect } from 'react-redux'\nimport { setTabPlots, setSessionTabs} from \"../../redux/actions\"\nimport PythonApi from \"../../apis/PythonApi\";\n\nimport { Responsive, WidthProvider } from 'react-grid-layout';\n\nimport 'react-grid-layout/css/styles.css'\nimport'react-resizable/css/styles.css'\n\nimport { HotKeys, withHotKeys, GlobalHotKeys } from \"react-hotkeys\";\nimport { PLOTS_HOT_KEYS, ADDITIONAL_GLOBAL_HOT_KEYS } from \"../../utils/hotkeys\";\nimport Tabs from \"../tabs/Tabs\";\n\nconst ResponsiveReactGridLayout = WidthProvider(Responsive);\n\nclass PlotDashboard extends React.Component {\n\n  constructor(props){\n    super(props)\n\n    this._plotsInLayout = false\n\n  }\n\n  static defaultProps = {\n    className: \"layout\",\n    rowHeight: 30,\n    onLayoutChange: function() {},\n    cols: { lg: 12, md: 10, sm: 6, xs: 4, xxs: 2 },\n  };\n\n  state = {\n    currentBreakpoint: \"lg\",\n    compactType: \"vertical\",\n    mounted: false,\n    layouts: { lg: [] }\n  };\n\n  componentDidMount() {\n    this.setState({ mounted: true });\n  }\n\n  emptyDashboard = () => {\n    return null\n  }\n\n  noTabsMessage = () => {\n    return null\n  }\n\n  noPlotsMessage = () => {\n    //className=\"attentionLeft\"\n    return <div style={{display: \"flex\", flexDirection: \"column\", justifyContent: \"center\", alignItems: \"center\", height: \"100%\"}}>\n      <div style={{fontSize: \"5em\", fontWeight: \"bold\"}}>This is the plots dashboard.</div>\n      <div style={{fontSize: \"1.2em\"}}>We would like to display your plots here, but currently you don't seem to have any</div>\n      <div style={{backgroundColor: \"white\",  fontSize: \"2em\", margin: 20, padding: 20, paddingLeft: 50, paddingRight: 50, borderRadius: 70}}> You can try to create one by clicking on your structures</div>\n    </div>\n  }\n\n  static newPlotLayout = (plot, layouts) => {\n    return {\n      x: plot.grid_dims[0]*(layouts.lg.length),\n      y: 2,\n      w: plot.grid_dims[0],\n      h: plot.grid_dims[1],\n      i: plot.id,\n    };\n  }\n\n  generateDOM(layouts, plots) {\n    return _.map(layouts, function(l, i) {\n      return <div key={plots[i].id}><PlotCard plot={plots[i]}/></div>\n    });\n  }\n\n  onBreakpointChange = (breakpoint) => {\n    document.dispatchEvent(new CustomEvent(\"plotResize\", {detail: {id: \"all\"}}))\n  };\n\n  onResizeStop = (layouts, finalL, initL) => {\n    document.dispatchEvent(new CustomEvent(\"plotResize\", {detail: {id: initL.i, higher: finalL.h > initL.h}}))\n  }\n\n  shouldComponentUpdate = (newProps) => {\n\n    if( !this._plotsInLayout ) return true\n\n    const isDifferentTab = newProps.active.tab != this.props.active.tab\n    let hasDifferentPlots;\n    if (!isDifferentTab){\n      let tab = _.find(this.props.tabs, [\"id\", this.props.active.tab])\n      let newTab = _.find(newProps.tabs, [\"id\", newProps.active.tab])\n\n      if (!tab || !newTab) return true\n      else if (!tab.layouts || !newTab.layouts) return true\n      else if (_.isEqual(tab.layouts, newTab.layouts)) return true\n      else if (! _.isEqual(this._plotsInLayout, newTab.plots)) return true\n\n      hasDifferentPlots = ! _.isEqual(tab.plots, newTab.plots)\n    }\n    \n    return isDifferentTab || hasDifferentPlots\n  }\n\n  onLayoutChange = (layout, layouts) => {\n    this.props.onLayoutChange(layout, layouts);\n\n    PythonApi.setTabLayouts(this.props.active.tab, layouts)\n  };\n\n  onDrop = (elemParams) => {\n    alert(`Element parameters: ${JSON.stringify(elemParams)}`);\n  };\n\n  getLayout = () => {\n    if (!this.props.active.tab ) return this.noTabsMessage()\n\n    let tab = _.find(this.props.tabs, [\"id\", this.props.active.tab])\n\n    if (!tab) return this.noTabsMessage()\n    if (tab.plots.length == 0) return this.noPlotsMessage()\n    \n    let plots = tab.plots.map(plotID => this.props.plots[plotID])\n\n    plots = plots.filter( plot => plot)\n\n    // Wait for all plots to draw a first layout\n    // THIS IS KEY in order to avoid the layout going crazy\n    if (plots.length != tab.plots.length) return null\n\n    let layouts = tab.layouts\n\n    if (layouts.lg.length != plots.length){\n      layouts.lg = plots.map(plot => {\n        let layout = _.find(layouts.lg, [\"i\", plot.id])\n        return layout || PlotDashboard.newPlotLayout(plot, layouts)\n      })\n    }\n\n    this._plotsInLayout = tab.plots\n\n    return (\n      <ResponsiveReactGridLayout\n        {...this.props}\n        layouts={layouts}\n        onBreakpointChange={this.onBreakpointChange}\n        onLayoutChange={this.onLayoutChange}\n        onDrop={this.onDrop}\n        onResizeStop={this.onResizeStop}\n        draggableCancel=\".draglayer\" //Avoids plot being dragged when zooming and other drag actions\n        // WidthProvider option\n        measureBeforeMount={false}\n        // I like to have it animate on mount. If you don't, delete `useCSSTransforms` (it's default `true`)\n        // and set `measureBeforeMount={true}`.\n        useCSSTransforms={this.state.mounted}\n        compactType={this.state.compactType}\n        preventCollision={!this.state.compactType}\n        rowHeight={10}\n      >\n        {this.generateDOM(layouts.lg, plots)}\n      </ResponsiveReactGridLayout>\n    )\n\n  }\n\n  render() {\n\n    // We will reuse some of the tabs hot keys handlers\n    const tabs = <Tabs/>\n    const handlers = {...this.hotKeysHandler, ..._.pick(tabs.hotKeysHandler, [\"MOVE_TO_NEXT_TAB\", \"MOVE_TO_PREVIOUS_TAB\"]) }\n\n    // eslint-disable-next-line no-unused-vars\n    return (\n      <div style={{padding: 10, ...this.props.style}} className=\"scrollView\">\n        <GlobalHotKeys keyMap={PLOTS_HOT_KEYS.global} handlers={handlers}/>\n        {this.getLayout()}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  plots: state.plots,\n  structures: state.session.structures,\n  tabs: state.session.tabs,\n  active: state.active,\n  session: state.session\n})\n\nconst mapDispatchToProps = {\n  setSessionTabs,\n  setTabPlots,\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withHotKeys(PlotDashboard));","import React, { Component } from 'react'\n\nexport default class StructureTag extends Component {\n\n    constructor(props){\n        super(props)\n\n        this.state = {}\n    }\n\n    render() {\n\n        return (\n            <div \n                className={\"structTag \" + (this.props.struct.selected ? \"active\" : \"\")} \n                onClick={this.props.toggleStruct}\n                data-tip={this.props.struct.path}\n                data-effect=\"solid\">\n                <div>{this.props.struct.name.replace(\".fdf\", \"\")}</div>\n                <div style={{fontSize: \"0.7em\", color: \"gray\"}}>{\".../\" + this.props.struct.path.split(\"/\").slice(-2,-1)[0]}</div>\n            </div>\n        )\n    }\n}\n\n\n\n\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\n\nimport {Button, Icon} from 'react-materialize'\nimport { FaSave} from 'react-icons/fa'\nimport { AiOutlineUpload } from 'react-icons/ai'\nimport { setActivePage } from '../../redux/actions'\n\nimport PythonApi from '../../apis/PythonApi'\nimport NavigateButton from './NavigateButton'\n\nimport { GlobalHotKeys } from 'react-hotkeys'\nimport { GLOBAL_HOT_KEYS } from '../../utils/hotkeys'\n\nclass Controls extends Component {\n\n    hotKeysHandler = {\n        SAVE_SESSION: () => this.saveCurrentSession(),\n        LOAD_SESSION: () => this.loadSession()\n    }\n\n    syncWithSession = (session) => {\n        document.dispatchEvent(new CustomEvent(\"syncWithSession\", {detail: {session}}))\n    }\n\n    showPage = (pageName) => {\n        this.props.setActivePage(pageName)\n    }\n\n    saveCurrentSession = () => {\n        let path = prompt(\"Please provide the path to save the session.\\n\\nRoot directory:\\n\" + this.props.session.settings.rootDir)\n        if (!path) return \n\n        PythonApi.saveSession(path)\n    }\n\n    loadSession = () => {\n\n        let path = prompt(\"Please provide the path of the saved session.\\n\\nRoot directory:\\n\" + this.props.session.settings.rootDir)\n        if (!path) return\n\n        PythonApi.loadSession(path)\n    }\n\n    render() {\n\n        const margins = { marginRight: 20, padding: 0, display:\"flex\", justifyContent: \"center\", alignItems: \"center\"}\n\n        return (\n            <div style={{display: \"flex\", justifyContent: \"flex-end\", marginBottom: 10, marginTop: 10}}>\n                <GlobalHotKeys keyMap={GLOBAL_HOT_KEYS} handlers={this.hotKeysHandler}/>\n                    <NavigateButton to=\"plots\" style={margins}/>\n                    <NavigateButton to=\"settings\" style={margins}/>\n                    <Button\n                        data-tip=\"Save session\"\n                        style={margins}\n                        floating\n                        icon={<FaSave size={20}/>} \n                        onClick={this.saveCurrentSession}\n                        className=\"yellow darken-1\" />\n                    <Button\n                        data-tip=\"Load session\"\n                        style={margins}\n                        floating\n                    icon={<AiOutlineUpload size={20}/>}\n                        onClick={this.loadSession}\n                        className=\"green\" />\n                \n            </div>\n        )\n    }\n}\n\nexport class Control extends Component {\n\n    render(){\n        \n        return <Button\n                    data-tip={this.props.tooltip}\n                    style={this.props.style}\n                    floating\n                    icon={<this.props.icon size={20}/>}\n                    onClick={this.props.onClick}\n                    className={this.props.className} />\n    }\n}\n\nconst mapStateToProps = state => ({\n    session: state.session\n})\n\nconst mapDispatchToProps = {\n    setActivePage\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Controls);\n","import React, { Component } from 'react'\nimport { Control } from './Controls'\nimport { connect } from 'react-redux'\nimport { setActivePage } from '../../redux/actions'\nimport { IoMdSettings } from 'react-icons/io'\nimport { MdDashboard } from 'react-icons/md'\n\nconst ROUTES = {\n    settings: {\n        icon: IoMdSettings,\n        color: \"grey\",\n        hotKey: \"Shift + s\",\n    },\n    plots: {\n        icon: MdDashboard,\n        color: \"grey\",\n        hotKey: \"Shift + d\"\n    }\n}\n\nclass NavigateButton extends Component {\n\n    showPage = () => {\n        this.props.setActivePage(this.props.to)\n    }\n\n    render() {\n\n        const route = ROUTES[this.props.to]\n\n        return <Control \n            icon={route.icon} \n            className={route.color}\n            tooltip={\"Go to \" + this.props.to + \" (\" + route.hotKey + \")\"}\n            onClick={this.showPage}\n            {...this.props}/>\n    }\n}\n\nconst mapDispatchToProps = {\n    setActivePage\n}\n\nexport default connect(null, mapDispatchToProps)(NavigateButton);\n","import React, { Component } from 'react'\n\nexport default class PlotableTag extends Component {\n\n    constructor(props){\n        super(props)\n\n        this.state = {}\n    }\n\n    render() {\n\n        return (\n            <div \n                className={\"plotableTag \" + (this.props.plotable.selected ? \"active\" : \"\")} \n                onClick={this.props.togglePlotable}\n                data-tip={this.props.plotable.path}\n                data-effect=\"solid\">\n                <div>{this.props.plotable.name}</div>\n                <div style={{fontSize: \"0.7em\", color: \"gray\"}}>{\".../\" + this.props.plotable.path.split(\"/\").slice(-2,-1)[0]}</div>\n            </div>\n        )\n    }\n}\n\n","import React, { Component } from 'react'\nimport StructureTag from './StructureTag'\nimport _ from \"lodash\"\nimport { setActiveStructs, setActivePlotables } from '../../redux/actions'\nimport { MdFolder, MdFolderOpen} from 'react-icons/md'\nimport {Icon, TextInput} from 'react-materialize'\n\nimport { connect } from 'react-redux'\nimport NavigateButton from '../controls/NavigateButton'\nimport PlotableTag from './PlotableTag'\n\nfunction wildTest(wildcard, str) {\n    const re = new RegExp(`^${wildcard.replace(/\\*/g,'.*').replace(/\\?/g,'.')}$`,'i');\n    return re.test(str); // remove last 'i' above to have case sensitive\n}\n\nexport class StructurePicker extends Component {\n\n    constructor(props){\n        super(props)\n\n        this.state = {\n            searchString: \"\",\n            alphabeticSorting: false,\n            selectedSorting: false,\n            searchByFolder: false,\n            displayStructures: true,\n            displayPlotables: false,\n        }\n\n    }\n\n    togglePlotInitializer = (selectedStructs, selectedPlotables) => {\n\n        let forceShow, forceHide;\n\n        console.warn([...selectedStructs, ...selectedPlotables])\n\n        if ([...selectedStructs, ...selectedPlotables].length != 0){\n            forceShow = true\n        } else {\n            forceHide = true\n        }\n\n        document.dispatchEvent(new CustomEvent(\"togglePlotInitializer\", {detail: {forceShow, forceHide}}))\n\n    }\n\n    selectStructs = (structs) => {\n        this.props.setActiveStructs(structs)\n        this.togglePlotInitializer(structs, this.selectedPlotables)\n    }\n\n    get selectedStructs(){\n        return this.props.activeStructs || []\n    }\n\n    selectPlotables = (plotables) => {\n        this.props.setActivePlotables(plotables)\n        this.togglePlotInitializer(this.selectedStructs, plotables)\n    }\n\n    get selectedPlotables(){\n        return this.props.activePlotables || []\n    }\n\n    toggleStruct = ({id: structID}) => {\n        \n        //this.setState({selectedStructures: _.xor(this.selectedStructs, [structID])})\n\n        this.selectStructs(_.xor(this.selectedStructs, [structID]))\n      \n    }\n\n    togglePlotable = ({id: plotableID}) => {\n        \n        //this.setState({selectedPlotableures: _.xor(this.selectedPlotables, [PlotableID])})\n\n        this.selectPlotables(_.xor(this.selectedPlotables, [plotableID]))\n      \n    }\n\n    toggleStructDisplay = () => {\n        this.setState({displayStructures: !this.state.displayStructures})\n    }\n\n    togglePlotablesDisplay = () => {\n        this.setState({displayPlotables: !this.state.displayPlotables})\n    }\n\n    toggleAlphabeticSorting = () => {\n\n        const toggles = { [false]: \"asc\", asc: \"desc\", desc: false}\n        this.setState({alphabeticSorting: toggles[this.state.alphabeticSorting]})\n    }\n\n    toggleSearchByFolder = () => {\n\n        this.setState({searchByFolder: !this.state.searchByFolder})\n    }\n\n    toggleSelectedSorting = () => {\n        this.setState({selectedSorting: !this.state.selectedSorting})\n    }\n\n    toggleAll = () => {\n\n        const onDisplay = Object.keys(this.filterStructs())\n\n        const onDisplaySelected = _.intersection([...this.selectedStructs, ...this.selectedPlotables], onDisplay).length == 0\n\n        const displayedStructs = _.intersection(Object.keys(this.props.structures), onDisplay)\n        const displayedPlotables = _.intersection(Object.keys(this.props.plotables), onDisplay)\n\n        this.selectStructs(onDisplaySelected ? \n            [...displayedStructs, ...this.selectedStructs] \n                : \n            this.selectedStructs.filter( structID => !displayedStructs.includes(structID) )\n        )\n\n        this.selectPlotables(onDisplaySelected ? \n            [...displayedPlotables, ...this.selectedPlotables] \n                : \n            this.selectedPlotables.filter( plotableID => !displayedPlotables.includes(plotableID) )\n        )\n\n    }\n\n    filterStructs = (searchString) => {\n\n        searchString = searchString || this.state.searchString\n\n        searchString = searchString.includes(\"*\") || searchString.includes(\"?\") ? searchString : \"*\"+searchString+\"*\"\n\n        let structs = {}\n\n        let toggles = [this.state.displayStructures, this.state.displayPlotables]\n        \n        const structures = this.props.structures || []\n        const plotables = this.props.plotables || []\n        let objs = [structures, plotables]\n\n        //Filter both structures and plotables\n        objs.forEach( (object, index) => {\n\n            if (!toggles[index]) return\n\n            const isPlotable = index == 1\n\n            let newStructs = Object.keys(object).reduce( (structs, structID) => {\n\n                const struct = object[structID]\n    \n                const toTest = this.state.searchByFolder ? struct.path.split(\"/\").slice(-2,-1)[0] : struct.name.replace(\".fdf\", \"\")\n    \n                if (wildTest(searchString, toTest)){\n    \n                    structs[structID] = { \n                        ...struct,\n                        selected: [...this.selectedStructs, ...this.selectedPlotables].includes(structID),\n                        isPlotable,\n                        id: structID,\n                    }\n                }\n    \n                return structs\n            }, {})\n\n            structs = {...structs, ...newStructs}\n\n        })\n\n        return structs\n\n    }\n\n    newSearchString = (searchString) => {\n\n        this.setState({searchString: searchString})\n    }\n\n    noStructuresMessage = () => {\n\n        return <div>\n            <div style={{color: \"darkred\"}}>No structures in the search scope right now.</div>\n            <div>Try to change file system settings or initialize the GUI from a different directory</div>\n            <NavigateButton to=\"settings\" style={{marginTop: 10}}/>\n        </div>\n    }\n\n    noMatchingStructuresMessage = () => {\n        return <div>\n            <div style={{color: \"darkred\"}}>No structure that matches your search.</div>\n            <div>Try to change file system settings or initialize the GUI from a different directory</div>\n            <NavigateButton to=\"settings\" style={{marginTop: 10}}/>\n        </div>\n    }\n\n    render() {\n\n        let structsAndPlotables = this.filterStructs()\n\n        if (this.state.alphabeticSorting){\n            structsAndPlotables = _.orderBy(structsAndPlotables, \"name\", this.state.alphabeticSorting)\n        }\n        if (this.state.selectedSorting){\n            structsAndPlotables = _.orderBy(structsAndPlotables, \"selected\", \"desc\")\n        }\n        \n        return (\n            <div style={{height: \"100vh\", overflow: \"hidden\", display: \"flex\", flexDirection: \"column\"}}>\n                <div style={{display: \"flex\", flexDirection: \"row\", justifyContent: \"center\", alignItems: \"center\"}}>\n                    <TextInput\n                        noLayout\n                        autocomplete=\"off\"\n                        style={{marginBottom:0}}\n                        value={this.state.searchString} \n                        onChange={(e) => this.newSearchString(e.target.value)}/>\n                    <div style={{width: 20}}/>\n                    <div\n                        data-tip=\"Search by folder\"\n                        className={\"structPickerToggle \" + (this.state.searchByFolder ? \"active\" : \"\")}\n        onClick={this.toggleSearchByFolder} style={{cursor: \"pointer\"}}>{this.state.searchByFolder ? <MdFolder/> : <MdFolderOpen/>}</div>\n                </div>\n                <div style={{display: \"flex\", justifyContent: \"space-between\", marginBottom: 5}}>\n                    <span\n                        data-tip=\"Show structures\"\n                        className={\"structPickerToggle \" + (this.state.displayStructures ? \"active\" : \"\")} \n                        onClick={this.toggleStructDisplay} style={{cursor: \"pointer\"}}>Struct</span>\n                    <span\n                        data-tip=\"Show plotables\"\n                        className={\"structPickerToggle \" + (this.state.displayPlotables ? \"active\" : \"\")}\n                        onClick={this.togglePlotablesDisplay} style={{cursor: \"pointer\"}}>Plotables</span>\n                </div>\n                <div style={{display: \"flex\", justifyContent: \"space-between\", marginBottom: 5}}>\n                    <span \n                        className={\"structPickerToggle \" + (this.state.alphabeticSorting ? \"active\" : \"\")} \n                        onClick={this.toggleAlphabeticSorting} style={{cursor: \"pointer\"}}>A-Z</span>\n                    <span\n                        data-tip=\"Show selected first\"\n                        className={\"structPickerToggle \" + (this.state.selectedSorting ? \"active\" : \"\")}\n                        onClick={this.toggleSelectedSorting} style={{cursor: \"pointer\"}}>sel</span>\n                    <span \n                        className=\"structPickerToggle\" \n                        onClick={this.toggleAll} style={{cursor: \"pointer\"}}>All</span>\n                </div>\n\n                {Object.keys({...this.props.structures, ...this.props.plotables}).length == 0 ? \n                    this.noStructuresMessage() : Object.values(structsAndPlotables).length == 0 ? \n                        this.noMatchingStructuresMessage() : null\n                }\n\n                <div className=\"scrollView\" style={{flex:1}}>\n                    {Object.values(structsAndPlotables).map(obj => {\n                        if (obj.isPlotable) {\n                            return <PlotableTag id={obj.id} \n                                plotable={obj} \n                                togglePlotable={ () => this.togglePlotable(obj)}\n                            />\n                        } else {\n                            return <StructureTag id={obj.id} \n                                struct={obj} \n                                toggleStruct={ () => this.toggleStruct(obj)}\n                            />\n                        }\n                        \n                    })}\n                </div>  \n            </div>\n            \n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    activeStructs: state.active.structs,\n    activePlotables: state.active.plotables,\n    plotables: state.session.plotables,\n    structures: state.session.structures\n})\n\nconst mapDispatchToProps = {\n    setActiveStructs,\n    setActivePlotables\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StructurePicker);\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\n\nimport Select from 'react-select'\n\nimport _ from \"lodash\"\n\nclass PlotTypePicker extends Component {\n\n    render() {\n\n        const plotOptions = this.props.session.plotOptions\n\n        const value = _.find(plotOptions, [\"value\", this.props.value])\n\n        return (\n            <Select\n                options={plotOptions}\n                placeholder=\"Choose the plot type...\"\n                isClearable isSearchable isMulti\n                onChange={(obj) => this.props.onChange(obj ? obj.value || obj.map(selected => selected.value) : undefined)}\n                value={value}\n            />\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    tabs: state.tabs,\n    active: state.active,\n    session: state.session\n})\n\nconst mapDispatchToProps = {\n\n}\n\nexport default connect(mapStateToProps, null)(PlotTypePicker);","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\n\nimport {Row} from 'react-materialize'\nimport Select from 'react-select'\n\nimport _ from \"lodash\"\n\nclass TabPicker extends Component {\n    render() {\n\n        const options = this.props.tabs.map( (tab) => ({label: tab.name, value: tab.id }))\n        const value = _.find(options, [\"value\", this.props.value])\n        return (\n            <Select\n                placeholder=\"Choose a tab...\"\n                options={options}\n                defaultValue={this.props.active.tab && _.find(this.props.tabs, [\"id\", this.props.active.tab])? {label: _.find(this.props.tabs, [\"id\", this.props.active.tab]).name, value: this.props.active.tab } : null}\n                isSearchable\n                onChange={(obj) => this.props.onChange(obj ? obj.value : undefined)}\n                value={value}\n            />\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    tabs: state.session.tabs,\n    active: state.active\n})\n\nconst mapDispatchToProps = {\n\n}\n\nexport default connect(mapStateToProps, null)(TabPicker);\n","import React, { Component } from 'react'\nimport Icon from 'react-materialize/lib/Icon'\nimport { connect } from 'react-redux'\nimport { deactivateStruct, setActiveStructs } from '../../redux/actions'\n\nclass StructureRow extends Component {\n\n    render() {\n\n        const struct = this.props.structure\n        const groupActive = this.props.groupActive\n\n        return (\n            <div style={{display: \"flex\", flexDirection: \"row\", justifyContent: \"flex-start\", alignItems: \"center\", marginTop: 10, marginBottom: 10}}>\n                <div \n                    style={{color: \"darkred\", cursor: \"pointer\", display: \"flex\", justifyContent: \"center\", alignItems:\"center\"}}\n                    onClick={() => this.props.deactivateStruct(struct.id)}>\n                    <Icon>remove</Icon>\n                </div>\n                <div \n                    style={{cursor: groupActive ? \"default\" : \"pointer\", marginRight: 20, marginLeft: 20, padding: 10, backgroundColor: groupActive ? \"whitesmoke\" : \"#ccc\", borderRadius: 3}}\n                    onClick={groupActive ? undefined : this.props.moveStructToActiveGroup}>\n                    {struct.name.replace(\".fdf\", \"\")}\n                </div>\n                <div data-tip={struct.path}>{\".../\" + struct.path.split(\"/\").slice(-2,-1)[0]}</div>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    active: state.active\n})\n\nconst mapDispatchToProps = {\n    deactivateStruct,\n    setActiveStructs\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StructureRow);\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\n\nimport Select from 'react-select'\n\nimport _ from \"lodash\"\n\nconst OPTIONS = [\n    {label: \"Plot individually\", value:\"separatePlot\"},\n    {label: \"Merge in single plot\", value:\"jointPlot\"},\n    {label: \"Build animation\", value:\"jointAnimation\"},\n    {label: \"Animation for each\", value:\"separateAnimation\"},\n]\n\nclass MergeMethodPicker extends Component {\n\n    constructor(props){\n        super(props)\n        this.state={}\n    }\n\n    render() {\n        return (\n            <Select\n                options={OPTIONS}\n                defaultValue={OPTIONS[0]}\n                placeholder=\"Choose the plotting method...\"\n                isSearchable\n                onChange={(obj) => this.props.onChange(obj ? obj.value || obj.map(selected => selected.value) : undefined)}\n                value={_.find(OPTIONS, [\"value\", this.props.value])}\n            />\n                \n        )\n    }\n}\n\nconst mapStateToProps = state => ({})\n\nconst mapDispatchToProps = {\n\n}\n\nexport default connect(mapStateToProps, null)(MergeMethodPicker);","import React, { Component } from 'react'\nimport PlotTypePicker from './PlotTypePicker'\nimport TabPicker from './TabPicker'\nimport StructureRow from './StructureRow'\nimport MergeMethodPicker from './MergeMethodPicker'\nimport { deactivateStruct } from '../../redux/actions'\nimport { connect } from 'react-redux'\n\nclass StructuresGroup extends Component {\n\n    render() {\n\n        const {tabID, plotClasses, mergeMethod} = this.props.initializingOptions\n        const activenessStyles = this.props.active ? {\n            backgroundColor: \"#ccc\"\n        } : {\n            backgroundColor: \"whitesmoke\"\n        }\n\n        return (\n            <div>\n                <div style={{display: \"flex\", flexDirection: \"row\"}}>\n                    <div className=\"structGroupAction\" style={activenessStyles} onClick={this.props.splitGroup}>Split</div>\n                    <div className=\"structGroupAction\" style={activenessStyles} onClick={this.props.removeGroup}>Remove</div>\n                    {this.props.active ? \n                        null\n                            : \n                        <div className=\"structGroupAction\" style={activenessStyles} onClick={this.props.setGroupAsActive}>Mark as receptive</div>\n                    }\n                    <div style={{flex:1}}/>\n                </div>\n                <div className=\"row\" style={{transition: \"all 300ms\", display:\"flex\", flexWrap: \"wrap\", padding: 20, marginTop: 0, marginBottom: 20, borderRadius: 5, borderTopLeftRadius: 0, justifyContent: \"center\", alignItems: \"center\", ...activenessStyles}}>\n                    <div className=\"col s12 m4 l3\">\n                        {this.props.structs.map(struct => <StructureRow structure={struct} groupActive={this.props.active} moveStructToActiveGroup={() => this.props.moveStructToActiveGroup(struct.id)}/>)}\n                    </div>\n                    <div className=\"col s12 m4 l3\">\n                        <PlotTypePicker value={plotClasses} onChange={(val) => this.props.onInitParamChange(\"plotClasses\", val) }/>\n                    </div>\n                    <div className=\"col s12 m4 l3\">\n                        <TabPicker value={tabID} onChange={(val) => this.props.onInitParamChange(\"tabID\", val) }/>\n                    </div>\n                    <div className=\"col s12 m4 l3\">\n                        <MergeMethodPicker value={mergeMethod} onChange={(val) => this.props.onInitParamChange(\"mergeMethod\", val) }/>\n                    </div>\n                </div>\n            </div>      \n        )\n    }\n}\n\nconst mapStateToProps = state => ({})\n\nconst mapDispatchToProps = {\n    deactivateStruct\n}\n\nexport default connect(null, mapDispatchToProps)(StructuresGroup);","import React, { Component } from 'react'\n\nimport _ from \"lodash\"\nimport { v4 as uuidv4 } from 'uuid';\n\nimport { Card, Icon} from 'react-materialize'\n\nimport PythonApi from '../../apis/PythonApi'\n\nimport { connect } from 'react-redux'\nimport { selectActiveStructs, selectActivePlotables } from '../../redux/reducers'\nimport { setActiveTab, addPlots, setActiveStructs, informLoadingPlot, informLoadedPlot, deactivateStruct, deactivatePlotable, setActivePlotables } from '../../redux/actions'\nimport StructuresGroup from './StructuresGroup';\n\nclass PlotInitializer extends Component {\n\n    constructor(props){\n        super(props)\n\n        this.state = {\n            structureGroups: [],\n            plotables: [],\n        }\n        \n    }\n\n    get selectedStructs(){\n        return this.props.activeStructs || []\n    }\n\n    get selectedPlotables(){\n        return this.props.activePlotables || []\n    }\n\n    get defaultTabID(){\n        return this.props.active.tab ? this.props.active.tab : this.props.tabs.length && this.props.tabs.length > 0 ? this.props.tabs[0].id : undefined\n    }\n\n    componentDidMount(){\n\n        this.onStructsUpdate([])\n\n    }\n\n    componentWillUnmount(){\n\n    }\n\n    componentDidUpdate(prevProps) {\n\n        if ( !_.isEqual(prevProps.active.structs, this.props.active.structs) ){\n\n            this.onStructsUpdate(prevProps.active.structs)\n            \n        }\n    }\n\n    onStructsUpdate = (prevActiveStructs) => {\n\n        let structureGroups = [];\n\n        const newStructs = this.selectedStructs.filter(({id:structID}) => !prevActiveStructs.includes(structID))\n\n        if (this.state.structureGroups.length == 0){\n            //In this case build a new group and mark it as active\n            structureGroups = this.markActiveGroup(0, [this.newGroup(this.selectedStructs)])\n        } else {\n            const activeGroupIndex = _.findIndex(this.state.structureGroups, \"active\" )\n            const activeGroup = this.state.structureGroups[activeGroupIndex]\n\n            //Add the structure to the receptive group\n            structureGroups = [\n                ...this.state.structureGroups.slice(0,activeGroupIndex),\n                {...activeGroup, structs: [...activeGroup.structs, ...newStructs]},\n                ...this.state.structureGroups.slice(activeGroupIndex + 1)\n            ]\n        }\n\n        structureGroups = this.cleanUnselectedFromGroups(structureGroups)\n\n        //Ensure that there is an active group\n        if ( !_.find(structureGroups, \"active\") ){\n            structureGroups = this.markActiveGroup(structureGroups.length - 1, structureGroups)\n        }\n\n        this.setState({structureGroups})\n    }\n\n    cleanUnselectedFromGroups = (groups) => {\n        /* Removes unselected structures */\n        return groups.reduce((cleanGroups, group) => {\n            group = {...group, structs: group.structs.filter(({id: structID}) => this.props.active.structs.includes(structID))}\n\n            if (group.structs.length > 0){\n                cleanGroups.push(group)\n            }\n            \n            return cleanGroups\n        },[])\n    }\n\n    newGroup = (structs, groupParams) => {\n\n        return {\n            structs: structs || [],\n            initializingOptions: {tabID: this.defaultTabID, plotClasses: [], mergeMethod: \"separatePlot\"},\n            ...groupParams\n        }\n    }\n\n    addGroup = ({structs}) => {\n\n        const structureGroups = this.markActiveGroup(this.state.structureGroups.length,\n            [...this.state.structureGroups, this.newGroup(structs)])\n\n        this.setState({structureGroups})\n    }\n\n    removeGroup = (iGroup) => {\n\n        const group = this.state.structureGroups[iGroup]\n        \n        if (group.structs.length > 0){\n\n            //We need to deactivate all structures in the group, this will automatically update groups\n            this.props.deactivateStruct(group.structs.map(struct => struct.id))\n        } else {\n            //If no structures in the group, we just delete it\n\n            let structureGroups = this.state.structureGroups.filter((g, i) => i != iGroup)\n\n            if (group.active){\n                structureGroups = this.markActiveGroup(structureGroups.length - 1, structureGroups)\n            }\n\n            this.setState({structureGroups})\n        }\n        \n    }\n\n    splitGroup = (iGroup) => {\n        const group = this.state.structureGroups[iGroup]\n\n        const splitted = group.structs.map( struct => this.newGroup([struct], _.omit(group, [\"structs\"])) )\n\n        //Remove the old group\n        let structureGroups = this.state.structureGroups.filter( (g, i) => i != iGroup)\n\n        //Add the new ones\n        structureGroups = [...structureGroups.slice(0,iGroup), ...splitted, ...structureGroups.slice(iGroup) ]\n\n        //If it was the active group, we can't leave all groups as active!\n        if (group.active) structureGroups = this.markActiveGroup(iGroup, structureGroups)\n\n        this.setState({structureGroups})\n\n    }\n\n    markActiveGroup = (iGroup, groups) => {\n        groups = groups || this.state.structureGroups\n        \n        return groups.map((group, i) => {\n            return {...group, active: i == iGroup}\n        })\n    }\n\n    setGroupAsActive = (iGroup) => {\n        this.setState({structureGroups: this.markActiveGroup(iGroup)})\n    }\n\n    moveStructToActiveGroup = (structID) => {\n        \n        //Get the structure\n        const struct = _.find(this.selectedStructs, [\"id\", structID])\n\n        //Remove the structure from its actual group and move it to the active group\n        //THIS WILL BE A PROBLEM IF AT SOME POINT THE SAME STRUCTURE IS ALLOWED IN TWO GROUPS AT THE SAME TIME\n        //WE SHOULD THEN SPECIFY THE ORIGIN GROUP!!!!!!!!!!!!!!\n        const structureGroups = this.state.structureGroups.map( group => {\n\n            let structs = group.active ? [...group.structs, struct] : group.structs.filter( ({id}) => id != structID)\n            \n            return {...group, structs}\n        })\n\n        this.setState({structureGroups})\n\n    }\n\n    updateGroupInitParams = (iGroup, key, val) => {\n\n        const structureGroups = this.state.structureGroups.map((group, i) => {\n            return i == iGroup ? {...group, initializingOptions: {...group.initializingOptions, [key]: val}}: group\n        })\n\n        this.setState({structureGroups})\n    }\n\n    toggleVisibility = () => {\n\n        document.dispatchEvent( new Event(\"togglePlotInitializer\"))\n    }\n\n    updateInitializingOptions = (key, value) => {\n        this.setState({ [key]: value})\n    }\n\n    getNewPlot = () => {\n\n        //Plot plotables\n        this.selectedPlotables.forEach(plotable => {\n            PythonApi.newPlot({tabID: this.defaultTabID, plotableID: plotable.id})\n        })\n\n        //Plot the structures\n        this.state.structureGroups.forEach( ({structs, initializingOptions}) =>  {\n\n            if (initializingOptions.mergeMethod.includes(\"separate\")){\n\n                const animation = initializingOptions.mergeMethod.includes(\"Animation\")\n\n                structs.forEach( struct => {\n                    \n                    initializingOptions.plotClasses.forEach( plotClass => {\n                    \n                        PythonApi.newPlot(\n                            {tabID: initializingOptions.tabID, structID: struct.id, animation, plotClass: plotClass}\n                        )\n        \n                    })\n                    \n                    \n                })\n            }\n            \n        })\n\n        this.toggleVisibility()\n\n        this.props.setActiveStructs([])\n        this.props.setActivePlotables([])\n\n    }\n\n    renderPlotable = (plotable) => {\n        return <div style={{display: \"flex\", flexDirection: \"row\", alignItems: \"center\", marginTop: 10}}>\n            <div style={{color: \"darkred\", cursor: \"pointer\", display: \"flex\", justifyContent: \"center\", alignItems:\"center\"}} onClick={() => this.props.deactivatePlotable(plotable.id)}>\n                <Icon>remove</Icon>\n            </div>\n            <div style={{marginRight: 20, marginLeft: 20, padding: 10, backgroundColor: \"whitesmoke\", borderRadius: 3}}>\n                {plotable.name}\n            </div>\n            <div data-tip={plotable.path}>{\".../\" + plotable.path.split(\"/\").slice(-2,-1)[0]}</div>\n        </div> \n    }\n\n    nothingToPlotMessage = () => {\n        return <div>\n            <div style={{color: \"darkred\", fontSize: \"1.3em\", fontWeight: \"bold\"}}>There's nothing to plot currently</div>\n            <div>Select a structure or plotable to begin.</div>\n        </div>\n    }\n\n    render() {\n\n        if (this.props.tabs.length == 0) return null\n\n        let plotables = _.groupBy(this.selectedPlotables, \"plot\")\n\n        return (\n            <div className=\"plotInitializer\" style={this.props.style}>\n\n                <Card\n                    style={{marginLeft: 20, marginRight: 20, background: \"aliceblue\"}}\n                    actions={\n                        <div style={{display: \"flex\", flexDirection: \"row\", justifyContent: \"center\", alignItems: \"center\"}}>\n\n                            <a\n                                className=\"btn-flat black-text initPlotBtn\"\n                                onClick={this.toggleVisibility}>\n                                Dismiss\n                                <Icon right>close</Icon>\n                            </a>\n\n                            <a \n                                className=\"btn-flat black-text initPlotBtn\"\n                                onClick={this.getNewPlot}\n                                >\n                                Initialize plots\n                                <Icon right>done</Icon>\n                            </a>\n\n                            <a className=\"btn-flat black-text initPlotBtn\"><Icon>refresh</Icon></a>\n                        </div>     \n                    }>\n                    {this.selectedStructs.length > 0 ? <div>\n                        <div className=\"sectionHeader\">\n                            Structures\n                        </div>\n                        {this.state.structureGroups.map( (group, i) => {\n                            return <StructuresGroup \n                                {...group}\n                                onInitParamChange={(paramName, val) => this.updateGroupInitParams(i, paramName, val)}\n                                setGroupAsActive={() => this.setGroupAsActive(i)}\n                                removeGroup={() => this.removeGroup(i)}\n                                splitGroup={() => this.splitGroup(i)}\n                                moveStructToActiveGroup={this.moveStructToActiveGroup}\n                            />\n                        })}\n                        <div onClick={this.addGroup}>New Group</div>\n                    </div>: null}\n\n                    {this.selectedPlotables.length > 0 ? <div className=\"sectionHeader\">\n                        Plotables\n                    </div> : null}\n\n                    {Object.keys(plotables).map(plot => <div>\n                        <div style={{textAlign: \"left\", fontSize: \"1.1em\", marginTop: 20}}>{plot}</div>\n                        <div style={{marginLeft: 30, paddingLeft: 20, borderLeftStyle: \"solid\", borderWidth: 1, borderColor: \"#ccc\"}}>\n                            {plotables[plot].map(plotable => this.renderPlotable(plotable))}\n                        </div>\n                    </div>)}\n\n                    {[...this.selectedPlotables, ...this.selectedStructs].length == 0 ? this.nothingToPlotMessage() : null} \n\n                </Card>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    activeStructs: selectActiveStructs(state),\n    activePlotables: selectActivePlotables(state),\n    tabs: state.session.tabs,\n    active: state.active,\n})\n\nconst mapDispatchToProps = {\n    setActiveTab,\n    addPlots,\n    setActiveStructs,\n    setActivePlotables,\n    informLoadingPlot,\n    informLoadedPlot,\n    deactivateStruct,\n    deactivatePlotable\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PlotInitializer);\n","import React, { Component } from 'react'\n\nimport moment from \"moment\"\nimport { informLoadedPlot } from '../../redux/actions';\n\nimport {connect} from \"react-redux\"\n\nclass LoadingChip extends Component {\n\n    constructor(props){\n        super(props)\n\n        this.state = {\n            time: Date.now()\n        }\n    }\n\n    componentDidMount(){\n        this.interval = setInterval(() => this.setState({ time: Date.now() }), 1000);\n    }\n\n    componentWillUnmount() {\n        clearInterval(this.interval);\n    }\n\n    getLoadingTime = (loadingInit) => {\n\n        return moment(moment().diff(loadingInit)).format(\"mm:ss\")\n    }\n\n    render() {\n\n        console.warn(this.props.info)\n\n        let processName = this.props.info.name\n        \n        if (!processName && this.props.info.struct){\n            processName = this.props.info.struct.name ? [this.props.info.struct.name.replace(\".fdf\", \"\"), this.props.info.plotClass].join(\" \") : \"No name\"\n        }\n        let elapsed = this.getLoadingTime(this.props.info.from)\n\n        return (\n            <div className=\"loadingChip\">\n                <span style={{paddingRight: 10}}>{processName}</span>\n                <span>{elapsed}</span>\n                <span className=\"removeTabBut\" onClick={() => this.props.informLoadedPlot(this.props.info.id)}>X</span>\n            </div>\n        )\n    }\n}\n\n\nconst mapDispatchToProps = {\n    informLoadedPlot\n}\n\nexport default connect(null, mapDispatchToProps)(LoadingChip);\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport LoadingChip from './LoadingChip'\n\nexport class LoadingTracker extends Component {\n    \n    render() {\n\n        return (\n            <div className={\"loadingTracker\" + (Object.values(this.props.loading.plots).length == 0 ? \" empty\" : \"\")}>\n                {Object.values(this.props.loading.plots).map(loadingInfo => <LoadingChip info={loadingInfo}/>)}\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    loading: state.loading\n})\n\nexport default connect(mapStateToProps, null)(LoadingTracker);\n","import React, { Component } from 'react'\nimport TextInput from 'react-materialize/lib/TextInput'\n\n\nexport default class Text extends Component {\n    render() {\n\n        const value = this.props.value || \"\" \n\n        return (\n            <TextInput\n                noLayout\n                value={value}\n                onChange={(e) => this.props.onChange(e.target.value)}\n                label={this.props.setting.name}\n                {...this.props.inputField.params}/>\n        )\n    }\n}\n","import React, { Component } from 'react'\nimport Switch from 'react-materialize/lib/Switch'\n\nexport default class SwitchInput extends Component {\n    render() {\n        return (\n            <div style={{display:\"flex\", flexDirection:\"column\", justifyContent:\"center\", alignItems:\"center\"}}>\n                <div style={{paddingBottom: 10}}>{this.props.setting.name}</div>\n                <Switch\n                    id = {this.props.setting.key}\n                    checked={this.props.value}\n                    onChange={(e) => this.props.onChange(e.target.checked) }\n                    {...this.props.inputField.params}/>\n            </div>\n        )\n    }\n}\n","import React, { Component } from 'react'\n\nimport Select from \"react-select\"\n\nimport _ from 'lodash'\n\nexport default class Dropdown extends Component {\n    render() {\n        return (\n            <div style={{display:\"flex\", justifyContent:\"center\", alignItems:\"center\"}}>\n                <div style={{paddingRight: 20}}>{this.props.setting.name + \":\"}</div>\n                <div style={{flex:1}}>\n                    <Select\n                        value={ Array.isArray(this.props.value) ? this.props.value.map(val => _.find(this.props.inputField.params.options, {value: val})) : _.find(this.props.inputField.params.options, {value: this.props.value})}\n                        onChange={(obj) => this.props.onChange(Array.isArray(obj) ? obj.map(obj => obj.value) : obj ? obj.value : null )}\n                        {...this.props.inputField.params}/>\n                </div>\n            </div>\n        )\n    }\n}\n","import React, { Component } from 'react'\nimport { ChromePicker } from 'react-color';\n\nexport default class ColorPicker extends Component {\n\n    constructor(props){\n        super(props)\n\n        this.state ={\n            tempcolor: undefined\n        }\n    }\n\n    toggleColorPicker = () => {\n        this.setState({ displayColorPicker: !this.state.displayColorPicker })\n    };\n    \n    render() {\n\n        let colorPicker = this.state.displayColorPicker ? (\n            <div style={{position: \"absolute\", bottom: 60}}>\n                <ChromePicker\n                    color={this.state.tempcolor || this.props.value || 'black'}\n                    onChange={(color) => {this.setState({tempcolor: color.hex})}}\n                    onChangeComplete={(color) => {this.props.onChange(color.hex); this.setState({tempcolor: undefined})}}\n                    {...this.props.inputField.params}/>\n            </div>\n        ) : null;\n\n        return (\n            <div style={{position: \"relative\",display:\"flex\", flexDirection:\"column\", justifyContent:\"center\", alignItems:\"center\"}}>\n                <div style={{paddingBottom: 10}}>{this.props.setting.name}</div>\n                <div \n                    className=\"z-depth-2\"\n                    onClick={this.toggleColorPicker}\n                    style={{width: 30, height: 30, borderRadius: 30, background: this.props.value}}/>\n                \n                {colorPicker}\n            </div>\n        )\n    }\n}\n","import React, { Component } from 'react'\n\nimport { Range } from 'rc-slider'\nimport 'rc-slider/assets/index.css';\n\nexport default class RangeSlider extends Component {\n    render() {\n\n        const value = this.props.value || [0,0]\n\n        return (\n            <div style={{paddingLeft: \"10%\", paddingRight: \"10%\"}}>\n                <div style={{paddingBottom: 10}}>{this.props.setting.name}</div>\n                <Range\n                    value={value}\n                    onChange={(value) => this.props.onChange(value)}\n                    {...this.props.inputField.params}\n                    />\n            </div>\n        )\n    }\n}\n","import React, { Component } from 'react'\nimport InputField from '../InputField'\n\nexport default class Range extends Component {\n\n    render() {\n\n        const value = this.props.value != null ? this.props.value : [\"\", \"\"]\n\n        return (\n            <div>\n                <div style={{paddingBottom: 10}}>{this.props.setting.name}</div>\n                <div style={{display: 'flex'}}>\n                    <input\n                        style={{marginRight: 30, flex:1}}\n                        type=\"number\"\n                        value={value[0]}\n                        onChange={(e) => value[1] >= Number(e.target.value) ? \n                            this.props.onChange( [InputField.number(e.target.value), value[1]] ) : null}\n                        {...this.props.inputField.params}/>\n                    <input\n                        style={{marginLeft: 30, flex:1}}\n                        type=\"number\"\n                        value={value[1]}\n                        onChange={(e) => Number(e.target.value) >= value[0] ? \n                            this.props.onChange( [value[0], InputField.number(e.target.value)] ) : null }\n                        {...this.props.inputField.params}/>\n                </div>\n                \n            </div>\n        )\n    }\n}\n","import React, { Component } from 'react'\nimport InputField from '../InputField'\n\nexport default class Numeric extends Component {\n    render() {\n\n        const additionalProps = this.props.inputField ? this.props.inputField.params : {}\n\n        const value = this.props.value || \"\" \n\n        return (\n            <div>\n                {this.props.setting ? <div style={{paddingBottom: 10}}>{this.props.setting.name}</div> : null}\n                <input\n                    type=\"number\"\n                    value={value}\n                    onChange={(e) => this.props.onChange( InputField.number(e.target.value) )}\n                    style = {this.props.style}\n                    {...additionalProps}/>\n            </div>\n        )\n    }\n}\n","import React, { Component } from 'react'\n\n//--Components\nimport { Card, TextInput, Switch, Button } from 'react-materialize'\nimport Select from \"react-select\"\nimport { ChromePicker } from \"react-color\"\nimport { Range } from 'rc-slider';\nimport 'rc-slider/assets/index.css';\n\nimport _ from \"lodash\"\nimport InputField from '../InputField';\n\nexport default class QueriesField extends Component {\n\n    constructor(props){\n        super(props)\n\n        this.state = {\n            displayColorPicker: {}\n        }\n    }\n\n    toggleColorPicker = (pickerID) => {\n        this.setState({ displayColorPicker: {\n            ...this.state.displayColorPicker,\n            [pickerID] : ! this.state.displayColorPicker[pickerID]\n        } })\n    };\n\n    addQuery = () => {\n\n        let newQuery = this.props.setting.inputField.queryForm.reduce((map, queryParam) => {\n            map[queryParam.key] = queryParam.default || null\n            return map\n        }, {})\n\n        newQuery.active = true\n\n        this.props.onChange([...this.props.value, newQuery])\n    }\n\n    changeSettingValue = (iQuery, paramKey, paramValue) => {\n\n        let newValue = _.cloneDeep(this.props.value)\n\n        newValue[iQuery] = { ...newValue[iQuery], [paramKey]: paramValue}\n\n        this.props.onChange(newValue)\n    }\n\n    renderInputField = (queryParam, value, iQuery) => {\n\n        let inputField = queryParam.inputField\n\n        if (!inputField) return null\n\n        let fieldLayout;\n\n        if (inputField.type == \"textinput\"){\n\n            fieldLayout = <TextInput\n                    noLayout\n                    value={value}\n                    onChange={(e) => this.changeSettingValue(iQuery, queryParam.key, e.target.value)}\n                    label={queryParam.name}\n                    {...inputField.params}/>\n\n        } else if (inputField.type == \"switch\"){\n\n            fieldLayout = <div style={{display:\"flex\", flexDirection:\"column\", justifyContent:\"center\", alignItems:\"center\"}}>\n                    <div style={{paddingBottom: 10}}>{queryParam.name}</div>\n                    <Switch\n                        id = {iQuery+queryParam.key}\n                        checked={value}\n                        onChange={(e) => this.changeSettingValue(iQuery, queryParam.key, e.target.checked) }\n                        {...inputField.params}/>\n                </div>\n\n        } else if (inputField.type == \"dropdown\") {\n\n            fieldLayout = <div style={{display:\"flex\", justifyContent:\"center\", alignItems:\"center\"}}>\n                <div style={{paddingRight: 20}}>{queryParam.name + \":\"}</div>\n                <Select\n                        className=\"querySelect\"\n                        value={ Array.isArray(value) ? value.map(val => _.find(inputField.params.options, {value: val})) : _.find(inputField.params.options, {value: value})}\n                        onChange={(obj) => this.changeSettingValue(iQuery, queryParam.key, \n                            Array.isArray(obj) ? obj.map(obj => obj.value) : obj ? obj.value : null )}\n                        {...inputField.params}/>\n                </div>\n\n        } else if (inputField.type == \"color\") {\n\n            let pickerID = String(iQuery) + queryParam.key\n\n            let colorPicker = this.state.displayColorPicker && this.state.displayColorPicker[pickerID] ? (\n                <div style={{position: \"absolute\", bottom: 60}}>\n                    <ChromePicker\n                        color={value ? value : \"#00F0F8FF\"}\n                        onChangeComplete={(color) => this.changeSettingValue(iQuery, queryParam.key, color.hex)}\n                        {...inputField.params}/>\n                </div>\n            ) : null;\n\n            fieldLayout = <div style={{position: \"relative\",display:\"flex\", flexDirection:\"column\", justifyContent:\"center\", alignItems:\"center\"}}>\n                    <div style={{paddingBottom: 10}}>{queryParam.name}</div>\n                    <div \n                        className=\"z-depth-2\"\n                        onClick={() => this.toggleColorPicker(pickerID)}\n                        style={{width: 30, height: 30, borderRadius: 30, background: value}}/>\n                    \n                    {colorPicker}\n                </div>\n        } else if (inputField.type == \"rangeslider\"){\n\n            fieldLayout = <div style={{paddingLeft: \"10%\", paddingRight: \"10%\"}}>\n            <div style={{paddingBottom: 10}}>{queryParam.name}</div>\n            <Range\n                value={value}\n                onChange={(value) => this.changeSettingValue(iQuery, queryParam.key, value)}\n                {...inputField.params}/>\n          </div>\n\n        } else if (inputField.type == \"number\"){\n\n            fieldLayout = <div>\n                <div style={{paddingBottom: 10}}>{queryParam.name}</div>\n                <input\n                    type=\"number\"\n                    value={value}\n                    onChange={(e) => this.changeSettingValue( iQuery, queryParam.key, InputField.number(e.target.value) )}\n                    {...inputField.params}/>\n                </div>\n        }\n\n        return <div style={{marginBottom: 5, marginTop: 5, paddingLeft: 10, paddingRight: 10, width: this.props.w(inputField.width), ...inputField.style}}>{fieldLayout}</div>\n    }\n\n    renderQuery = (query, iQuery) => {\n\n        return (\n\n            <div key={iQuery} style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\"}}>\n                <Switch\n                    id={iQuery+\"active\"}\n                    checked={query.active}\n                    onChange={(e) => this.changeSettingValue(iQuery, \"active\", e.target.checked) }/>\n                <Card className=\"queryCard\" style={{flex: 1, background: query.active ? \"#CBFFC0\" : \"#ffc3cd\", borderRadius: 10}}>\n                    <div style={{display:\"flex\", flexWrap: \"wrap\", justifyContent: \"space-around\"}}>\n                        {this.props.setting.inputField.queryForm.map(queryParam => this.renderInputField(queryParam, query[queryParam.key], iQuery))}\n                    </div>   \n                </Card>\n            </div>\n            \n        )\n\n    }\n\n    render() {\n\n        return (\n            <div>\n                <div style={{paddingBottom: 10}}>{this.props.setting.name}</div>\n                <div>\n                    {this.props.value.map( (query, iQuery) => this.renderQuery(query, iQuery))}\n                    <Button\n                        data-tip=\"Add a new query\"\n                        onClick={this.addQuery}>\n                        Add Query\n                    </Button>\n                </div>\n            </div>\n            \n        )\n    }\n}\n","import React, { Component } from 'react'\nimport NumericInput from './Numeric'\n\nimport _ from \"lodash\"\n\nexport default class ArrayInput extends Component {\n\n    changeValue = (newVal, i) => {\n        const value = _.cloneDeep(this.props.value)\n\n        value[i] = newVal\n\n        this.props.onChange(value)\n    }\n\n    render() {\n\n        //Params to pass to numeric inputs\n        const orientationStyles = this.props.inputField.params.vertical ? {\n            marginLeft: 20, marginRight: 20, marginBottom: 0, width: 70\n        } : {\n            marginLeft: 5, marginRight: 5, paddingLeft: 10, marginBottom: 0, width: 50\n        }\n        const inputStyle = { ...orientationStyles, paddingLeft: 10, textAlign: \"center\", borderStyle:\"solid\", borderWidth: 1, borderColor: \"black\"}\n\n        return (\n            <div style={{display: \"flex\", flexDirection: \"column\", justifyContent: \"center\", alignItems: \"center\"}}>\n                <div style={{paddingBottom: 10}}>{this.props.setting.name}</div>\n                <div style={{display: \"flex\", flexDirection: this.props.inputField.params.vertical ? \"column\" : \"row\", justifyContent: \"center\", alignItems: \"center\"}} className=\"arrayContainer\">\n                    {this.props.value.map((val, i) => <NumericInput value={val} onChange={(val) => this.changeValue(val, i)} style={inputStyle}/>)}\n                </div>  \n            </div>\n        )\n    }\n}\n","import React, { Component } from 'react'\n\nimport _ from \"lodash\"\n\n//--Redux\nimport { connect } from 'react-redux'\nimport { changeSettings } from \"../../redux/actions\"\n\n/*  All the different input fields */\nimport TextInput from './inputFields/TextInput';\nimport Switch from './inputFields/Switch';\nimport Dropdown from './inputFields/Dropdown';\nimport ColorPicker from './inputFields/ColorPicker';\nimport RangeSlider from './inputFields/RangeSlider';\nimport Range from './inputFields/Range';\nimport Numeric from './inputFields/Numeric';\nimport QueriesField from './inputFields/QueriesInput';\nimport ArrayInput from './inputFields/Array';\n\nconst INPUT_FIELDS = {\n    textinput: TextInput,\n    switch: Switch,\n    dropdown: Dropdown,\n    color: ColorPicker,\n    rangeslider: RangeSlider,\n    range: Range,\n    number: Numeric,\n    queries: QueriesField,\n    vector: ArrayInput\n}\n\nclass InputField extends Component {\n\n    constructor(props){\n        super(props)\n\n        this.state ={}\n    }\n\n    w = (string) => {\n\n        if (!string) return undefined\n\n        let isSizeDefined = [\"s\", \"m\", \"l\"].map(sizeLabel => string.indexOf(sizeLabel) >= 0)\n\n        let iWindowSize = [\"small\", \"medium\", \"infinity\"].indexOf(this.props.browser.mediaType)\n\n        for (var i = iWindowSize; i > -1; i--) {\n            \n            if(isSizeDefined[i]){\n                let width = _.find(string.split(\" \"),(str) => str.indexOf([\"s\",\"m\",\"l\"][i]) >= 0)\n                return width.substr(1)\n            }\n          }\n\n        return undefined\n    }\n\n    changeSettingValue = (newValue) => {\n\n        this.props.changeSettings(this.props.onSettingChangeType, this.props.setting.key, newValue)\n        \n    }\n\n    static number = (value) => [\"\", \"-\"].includes(value) ? value : Number(value)\n\n    render() {\n\n        let inputField = this.props.setting.inputField\n\n        // Get the input field that we need\n        const InputComponent = INPUT_FIELDS[inputField.type]\n        \n        if (!InputComponent) return null\n\n        const fieldLayout = <InputComponent\n            {...this.props}\n            inputField={inputField}\n            onChange={(value) => this.changeSettingValue(value)}\n            w={this.w} //This is only needed by the queries field, maybe there is a better way to do it\n        />\n\n        let tooltipParams = {\n            \"data-tip\": (this.props.setting.help ? this.props.setting.help + \"<br>\" : \"\") + \"Default: \" + (this.props.setting.default || \"None\"),\n            \"data-multiline\": true,\n            \"data-effect\": \"solid\",\n            \"data-place\": inputField.type == \"color\" ? \"bottom\" : \"top\", \n        }\n\n        const backgroundColor = this.props.value == null ? \"rgba(230,230,230,0.4)\" : undefined\n\n        return <div\n            onClick={(e) => e.ctrlKey ? this.changeSettingValue(this.props.value == null ? this.props.setting.default : null) : null}\n            style={{backgroundColor, paddingTop: 10, paddingBottom: 10, paddingLeft: 20, paddingRight: 20, borderRadius: 3, marginTop: 20, marginBottom: 20, width: this.w(inputField.width), ...inputField.style}}\n            {...tooltipParams}>\n                {fieldLayout}\n            </div>\n\n    }\n}\n\nconst mapStateToProps = state => ({\n    browser: state.browser\n})\n\nconst mapDispatchToProps = dispatch => ({\n    changeSettings: (actionType, settingKey, newValue) => dispatch(changeSettings(actionType, settingKey, newValue)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(InputField);\n\n\n// if (inputField.type == \"textinput\"){\n\n//     fieldLayout = <TextInput\n//             noLayout\n//             value={this.props.value}\n//             onChange={(e) => this.changeSettingValue(e.target.value)}\n//             label={this.props.setting.name}\n//             {...inputField.params}/>\n\n// } else if (inputField.type == \"switch\"){\n\n//     fieldLayout = <div style={{display:\"flex\", flexDirection:\"column\", justifyContent:\"center\", alignItems:\"center\"}}>\n//             <div style={{paddingBottom: 10}}>{this.props.setting.name}</div>\n//             <Switch\n//                 id = {this.props.setting.key}\n//                 checked={this.props.value}\n//                 onChange={(e) => this.changeSettingValue(e.target.checked) }\n//                 {...inputField.params}/>\n//         </div>\n\n// } else if (inputField.type == \"dropdown\") {\n\n//     fieldLayout = <div style={{display:\"flex\", justifyContent:\"center\", alignItems:\"center\"}}>\n//         <div style={{paddingRight: 20}}>{this.props.setting.name + \":\"}</div>\n//         <div style={{flex:1}}>\n//             <Select\n//                 value={ Array.isArray(this.props.value) ? this.props.value.map(val => _.find(inputField.params.options, {value: val})) : _.find(inputField.params.options, {value: this.props.value})}\n//                 onChange={(obj) => this.changeSettingValue(Array.isArray(obj) ? obj.map(obj => obj.value) : obj ? obj.value : null )}\n//                 {...inputField.params}/>\n//         </div>\n//         </div>\n\n// } else if (inputField.type == \"color\") {\n\n//     let colorPicker = this.state.displayColorPicker ? (\n//         <div style={{position: \"absolute\", bottom: 60}}>\n//             <ChromePicker\n//                 color={this.props.value}\n//                 onChangeComplete={(color) => this.changeSettingValue(color.hex)}\n//                 {...inputField.params}/>\n//         </div>\n//     ) : null;\n\n//     fieldLayout = <div style={{position: \"relative\",display:\"flex\", flexDirection:\"column\", justifyContent:\"center\", alignItems:\"center\"}}>\n//             <div style={{paddingBottom: 10}}>{this.props.setting.name}</div>\n//             <div \n//                 className=\"z-depth-2\"\n//                 onClick={this.toggleColorPicker}\n//                 style={{width: 30, height: 30, borderRadius: 30, background: this.props.value}}/>\n            \n//             {colorPicker}\n//         </div>\n// } else if (inputField.type == \"rangeslider\"){\n\n//     fieldLayout = <div style={{paddingLeft: \"10%\", paddingRight: \"10%\"}}>\n//     <div style={{paddingBottom: 10}}>{this.props.setting.name}</div>\n//     <Range\n//         value={this.props.value}\n//         onChange={(value) => this.changeSettingValue(value)}\n//         {...inputField.params}\n//         />\n//   </div>\n\n// } else if (inputField.type == \"range\"){\n\n//     fieldLayout = <div>\n//         <div style={{paddingBottom: 10}}>{this.props.setting.name}</div>\n//         <div style={{display: 'flex'}}>\n//             <input\n//                 style={{marginRight: 30, flex:1}}\n//                 type=\"number\"\n//                 value={this.props.value[0]}\n//                 onChange={(e) => this.props.value[1] >= Number(e.target.value) ? \n//                     this.changeSettingValue( [InputField.number(e.target.value), this.props.value[1]] ) : null}\n//                 {...inputField.params}/>\n//             <input\n//                 style={{marginLeft: 30, flex:1}}\n//                 type=\"number\"\n//                 value={this.props.value[1]}\n//                 onChange={(e) => Number(e.target.value) >= this.props.value[0] ? \n//                     this.changeSettingValue( [this.props.value[0], InputField.number(e.target.value)] ) : null }\n//                 {...inputField.params}/>\n//         </div>\n        \n//     </div>\n\n// } else if (inputField.type == \"number\"){\n\n//     fieldLayout = <div>\n//         <div style={{paddingBottom: 10}}>{this.props.setting.name}</div>\n//         <input\n//             type=\"number\"\n//             value={this.props.value}\n//             onChange={(e) => this.changeSettingValue( InputField.number(e.target.value) )}\n//             {...inputField.params}/>\n//         </div>\n// } else if (inputField.type == \"queries\"){\n\n//     fieldLayout = <div>\n//         <div style={{paddingBottom: 10}}>{this.props.setting.name}</div>\n//         <QueriesField \n//             changeSettingValue={this.changeSettingValue}\n//             setting={this.props.setting}\n//             value={this.props.value}\n//             w={this.w}/>\n//     </div>\n// }\n","import React, { Component } from 'react'\n\nimport { Row, Collapsible, CollapsibleItem, Icon, Button} from 'react-materialize'\nimport { FaAngleLeft, FaAngleRight } from 'react-icons/fa'\nimport { MdRestore } from 'react-icons/md'\n\nimport InputField from \"./InputField\"\n\nimport parse from 'html-react-parser';\nimport _ from \"lodash\"\nimport { HotKeys, ObserveKeys } from 'react-hotkeys';\nimport { SETTING_GROUP_HOT_KEYS, SETTING_CONTAINER_HOT_KEYS } from '../../utils/hotkeys';\n\nexport default class SettingsContainer extends Component {\n\n    constructor(props){\n        super(props)\n    }\n\n    hotKeysHandlers = {\n        MOVE_EXPANDED_UP: () => this.moveExpanded(\"up\"),\n        MOVE_EXPANDED_DOWN: () => this.moveExpanded(\"down\")\n    }\n\n    moveExpanded = (direction = \"down\") => {\n\n        var newExpanded;\n        if (direction == \"up\"){\n            newExpanded = this.state.expanded != 0 ? this.state.expanded - 1 : 2\n        } else if (direction == \"down\"){\n            newExpanded = this.state.expanded != 2 ? this.state.expanded + 1 : 0 \n        }\n\n        console.warn(this.refs)\n\n        this.setState({expanded: newExpanded})\n    }\n\n    renderSettingsGroup = (settingsGroup) => {\n\n        return settingsGroup.map(setting => {\n\n            if (!setting.inputField) return null\n        \n            return <InputField \n                        key={setting.key}\n                        setting={setting} \n                        value={this.props.settings[setting.key]}\n                        onSettingChangeType={this.props.onSettingChangeType}/>\n        }) \n    }\n\n    renderSettingsGroups = (groupedParams) => {\n\n        return this.props.paramGroups.map((paramGroup, iParamGroup) => {\n\n            let groupKey = paramGroup.key ? paramGroup.key : \"null\";\n\n            let settingsGroup = groupedParams[groupKey]\n\n            if (!settingsGroup) return null\n\n            let subGrouped = _.groupBy(settingsGroup, \"subGroup\")\n\n            let subGroups = paramGroup.subGroups ? [{key: \"null\", name: null},  ...paramGroup.subGroups] : [{key: \"null\", name: null}]\n\n            let itemContent = subGroups.map(({key, name}) => {\n\n                if ( ! subGrouped[key] ) return null\n                \n                return <div key={key}>\n                    <div style={{paddingBottom: 20, fontWeight:\"bold\", fontSize: \"1.3em\", textAlign: \"left\"}}>{name}</div>\n                    <div style={{display: \"flex\", flexWrap: \"wrap\", justifyContent: \"space-around\", alignItems: \"center\"}}>{this.renderSettingsGroup(subGrouped[key])}</div>\n                </div>\n            })\n\n            const submitSettings = () => this.props.submitSettings( settingsGroup.reduce((settings, setting) => {\n                settings[setting.key] = this.props.settings[setting.key]\n                return settings\n            }, {}))\n\n            const hotKeysHandlers = {\n                SUBMIT_SETTINGS: submitSettings,\n                UNDO_SETTINGS: this.props.undoSettings,\n            }\n\n            let icon;\n            if (typeof paramGroup.icon == \"string\"){\n                icon = {\n                    folder: \"md\",\n                    name: \"Md\"+paramGroup.icon.split(\"_\").map(sub => sub.charAt(0).toUpperCase() + sub.slice(1)).join(\"\")\n                }\n            }\n\n            const requireFrom  = 'react-icons/' + icon.folder\n\n            //const { [icon.name]: Icon} = require(requireFrom)\n\n            //const Icon = require(\"react-icons/md/\"+paramGroup.icon)\n\n            return (\n                <CollapsibleItem\n                    key={groupKey}\n                    header={paramGroup.name} \n                    icon={<Icon>{paramGroup.icon}</Icon>}>\n                    <HotKeys keyMap={SETTING_GROUP_HOT_KEYS} handlers={hotKeysHandlers}>\n                        <ObserveKeys>\n                        <blockquote style={{textAlign: \"left\"}}>\n                            {parse(paramGroup.description)}\n                        </blockquote>\n                        {itemContent}\n                        <div style={{display: \"flex\", flexWrap: \"wrap\", justifyContent: \"space-around\"}}>\n                            <Button\n                                onClick={this.props.undoSettings}\n                                data-tip=\"This will roll back to previous settings.<br> IT AFFECTS ALL GROUPS OF PARAMETERS, not only this one.\"\n                                className=\"orange\"\n                                style={{margin:20}}>\n                                    <FaAngleLeft/>Previous settings\n                            </Button>\n\n                            <Button\n                                data-tip=\"This will restore all settings to the plot's defaults\"\n                                className=\"red\" style={{margin:20}}><MdRestore/>Restore defaults</Button>\n\n                            <Button\n                                data-tip=\"This will change the settings and will update everything accordingly.<br> IT ONLY AFFECTS THIS GROUP OF SETTINGS, not all settings\"\n                                onClick={submitSettings}\n                                className=\"blue\" \n                                style={{margin:20}}>\n                                    Submit settings<FaAngleRight/>\n                            </Button>\n                            \n                        </div>\n                        </ObserveKeys>\n                    </HotKeys>\n                </CollapsibleItem> \n            )\n\n        })\n    }\n\n    render() {\n\n        let groupedParams = _.groupBy(this.props.params, \"group\")\n\n        return (\n            <Collapsible popout defaultActiveKey={this.props.defaultActiveKey || 0}>\n                {this.renderSettingsGroups(groupedParams)}          \n            </Collapsible>\n        )\n    }\n}\n\n","import React, { Component } from 'react'\nimport { Row, Col} from 'react-materialize'\nimport ReactTooltip from \"react-tooltip\"\n\nimport PythonApi from \"../apis/PythonApi\"\n\n//--Components\nimport PlotCard from '../components/plots/PlotCard'\nimport SettingsContainer from '../components/settings/SettingsContainer'\n\n//--Redux\nimport { connect } from 'react-redux'\nimport { addPlots, setNewStructures, setActivePlot, setCurrentSession, informLoadedPlot, informLoadingPlot } from \"../redux/actions\"\nimport { CHANGE_PLOT_SETTINGS } from '../redux/actions/actionTypes'\nimport { GlobalHotKeys } from 'react-hotkeys'\nimport { PLOT_TWEAKING_HOT_KEYS } from '../utils/hotkeys'\n\n\n\nclass PlotTweaking extends Component {\n\n    hotKeysHandlers = {\n        UNDO_SETTINGS: () => this.undoSettings(),\n        SUBMIT_ALL_SETTINGS: () => this.submitSettings(\"all\")\n    }\n\n    submitSettings = (settings) => {\n\n        if (settings = \"all\"){\n            settings = this.props.active.plot.settings\n        }\n\n        PythonApi.updatePlotSettings(this.props.active.plot.id, settings)\n\n        // We would need to update the active plot here!!!!!!\n        // But with the new socket-based approach there's probably\n        // a smarter way.\n    }\n\n    undoSettings = () => {\n\n        PythonApi.undoPlotSettings(this.props.active.plot.id)\n\n        //Same as with updatePlotSettings\n    }\n\n    render() {\n\n        if (! this.props.active.plot ) return null\n\n        let setsCont = <SettingsContainer\n                            settings={this.props.active.plot.settings}\n                            params={this.props.active.plot.params}\n                            paramGroups={this.props.active.plot.paramGroups}\n                            onSettingChangeType={CHANGE_PLOT_SETTINGS}\n                            submitSettings={this.submitSettings}\n                            undoSettings={this.undoSettings}/>\n        \n        return (\n            <div style={{...this.props.style}}>\n                <GlobalHotKeys keyMap={PLOT_TWEAKING_HOT_KEYS.global} handlers={this.hotKeysHandlers}/>\n                <Row>\n                    <Col className=\"s12 l4\" style={{height:\"90vh\", display: \"flex\", flexDirection: \"column\", justifyContent: \"center\", alignItems:\"center\"}}>\n                        <PlotCard plot={this.props.active.plot} style={{height: \"80vh\"}}/>\n                    </Col>\n                    <Col className=\"s12 l8\" >\n                        {this.props.browser.mediaType == \"infinity\" ? <div className=\"scrollView\" style={{ maxHeight: \"90vh\" }}>{setsCont}</div> : setsCont}\n                    </Col>\n                </Row>\n                <ReactTooltip multiline disable={this.props.session.settings ? !this.props.session.settings.showTooltips : false}/>  \n            </div>\n            \n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    plots: state.plots,\n    structures: state.structures,\n    active: state.active,\n    session: state.session,\n    browser: state.browser\n})\n\nconst mapDispatchToProps = {\n    setCurrentSession,\n    addPlots,\n    setActivePlot,\n    setNewStructures,\n    informLoadedPlot,\n    informLoadingPlot\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PlotTweaking);\n","import React, { Component } from 'react'\nimport PythonApi from \"../apis/PythonApi\"\n\n//--Components\nimport ReactTooltip from \"react-tooltip\"\nimport SettingsContainer from \"../components/settings/SettingsContainer\"\n\n//--Redux\nimport { connect } from 'react-redux'\nimport { setCurrentSession } from \"../redux/actions\"\n\nimport { toast } from 'react-toastify';\n\nimport _ from \"lodash\"\nimport { CHANGE_SESSION_SETTINGS } from '../redux/actions/actionTypes'\n\nclass Settings extends Component {\n\n    constructor(props){\n        super(props)\n\n        this.state = {}\n    }\n\n    submitSettings = (settings) => {\n\n        PythonApi.updateSessionSettings(settings)\n\n    }\n\n    undoSettings = () => {\n        PythonApi.undoSessionSettings()\n    }\n\n    render() {\n\n        if ( _.isEmpty(this.props.session) ) return null\n\n        return (\n            <div style={{...this.props.style, padding: 20}}>\n                <SettingsContainer\n                    defaultActiveKey={1}\n                    settings={this.props.session.settings}\n                    params={this.props.session.params}\n                    paramGroups={this.props.session.paramGroups}\n                    onSettingChangeType={CHANGE_SESSION_SETTINGS}\n                    submitSettings={this.submitSettings}\n                    undoSettings={this.undoSettings}/>\n                <ReactTooltip multiline disable={this.props.session.settings ? !this.props.session.settings.showTooltips : false}/>\n            </div>\n            \n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    session: state.session\n})\n\nconst mapDispatchToProps = dispatch => ({\n    setCurrentSession: (session) => dispatch(setCurrentSession(session)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Settings);\n","import React, { Component } from 'react'\nimport ReactMarkDown from \"react-markdown\"\nimport { IoIosArrowDown, IoIosArrowUp } from 'react-icons/io'\nimport PythonApi from '../../apis/PythonApi'\n\nexport default class Method extends Component {\n\n    constructor(props){\n        super(props)\n\n        this.state = {\n            showingDetails: false\n        }\n    }\n\n    applyMethod = () => {\n        PythonApi.callPlotShortcut(this.props.plot.id, this.props.shortcut)\n    }\n\n    renderDetails = () => {\n\n        return <div style={{transition: \"all 1s\", maxHeight: this.state.showingDetails ? undefined : 0, overflow: \"hidden\"}}>\n            <div style={{padding: 20, fontSize: 13}}>\n                <ReactMarkDown source={this.props.info.description}/>\n            </div>\n            <div onClick={this.applyMethod} style={{cursor: \"pointer\"}}>APPLY METHOD</div>\n        </div>\n    }\n\n    render() {\n\n        const iconRot = this.state.showingDetails ? \"rotate(180deg)\" : \"rotate(0)\"\n        const headerColor =  this.state.showingDetails ? \"#ccc\" : \"whitesmoke\"\n        return (\n            <div>\n                <div\n                    className=\"hoverable\"\n                    style={{display: \"flex\", padding: 20, cursor: \"pointer\", justifyContent: \"space-between\", alignItems: \"center\", backgroundColor: headerColor, transition: \"all 500ms\"}} \n                    onClick={() => this.setState({showingDetails: !this.state.showingDetails})}>\n                    <div>\n                        <span style={{color: \"gray\", marginRight: 10}}>{this.props.shortcut}</span>\n                        <span style={{fontWeight: \"bold\"}}>{this.props.info.name}</span>\n                    </div>\n                    <IoIosArrowDown style={{transition: \"all 500ms\", transform: iconRot}}/>\n                </div>\n                {this.renderDetails()}\n            </div>\n        )\n    }\n}\n","import React, { Component } from 'react'\nimport Method from './Method'\n\nexport default class Methods extends Component {\n    render() {\n        return (\n            <div style={{textAlign: \"left\", backgroundColor: \"white\", borderRadius: 3, overflow: \"hidden\"}}>\n                {Object.keys(this.props.plot.shortcuts).map((sequence) => <Method plot={this.props.plot} shortcut={sequence} info={this.props.plot.shortcuts[sequence]}/>)}\n            </div>\n        )\n    }\n}\n","import React, { Component } from 'react'\nimport { Row, Col} from 'react-materialize'\nimport ReactTooltip from \"react-tooltip\"\n\n//--Components\nimport PlotCard from '../components/plots/PlotCard'\n\n//--Redux\nimport { connect } from 'react-redux'\nimport { addPlots, setNewStructures, setActivePlot, setCurrentSession, informLoadedPlot, informLoadingPlot } from \"../redux/actions\"\nimport { CHANGE_PLOT_SETTINGS } from '../redux/actions/actionTypes'\nimport { GlobalHotKeys } from 'react-hotkeys'\nimport { PLOT_TWEAKING_HOT_KEYS } from '../utils/hotkeys'\nimport Methods from '../components/pythonMethods/Methods'\n\n\n\nclass PlotMethods extends Component {\n\n    hotKeysHandlers = {\n    }\n\n    render() {\n\n        if (! this.props.active.plot ) return null\n        \n        return (\n            <div style={{...this.props.style}}>\n                <GlobalHotKeys keyMap={PLOT_TWEAKING_HOT_KEYS.global} handlers={this.hotKeysHandlers}/>\n                <Row>\n                    <Col className=\"s12 l4\" style={{height:\"90vh\", display: \"flex\", flexDirection: \"column\", justifyContent: \"center\", alignItems:\"center\"}}>\n                        <PlotCard plot={this.props.active.plot} style={{height: \"80vh\"}}/>\n                    </Col>\n                    <Col className=\"s12 l8\" style={{paddingTop: 100}}>\n                        <Methods plot={this.props.active.plot}/>\n                    </Col>\n                </Row>\n                <ReactTooltip multiline disable={this.props.session.settings ? !this.props.session.settings.showTooltips : false}/>  \n            </div>\n            \n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    plots: state.plots,\n    structures: state.structures,\n    active: state.active,\n    session: state.session,\n    browser: state.browser\n})\n\nconst mapDispatchToProps = {\n    setCurrentSession,\n    addPlots,\n    setActivePlot,\n    setNewStructures,\n    informLoadedPlot,\n    informLoadingPlot\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PlotMethods);\n","import React, { Component } from 'react'\n\nimport _ from \"lodash\"\n\n//--Components\nimport ReactTooltip from \"react-tooltip\"\nimport PlotDashboard from '../components/plots/PlotDashboard';\n\n//--Python api \nimport PythonApi from '../apis/PythonApi'\n\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.min.css'\n\n//--Redux\nimport { connect } from 'react-redux'\nimport {addPlots, addTabs, setNewStructures, setActiveTab, setActivePlot, setSessionTabs, setCurrentSession, setNewPlotables, setActivePage, setActiveStructs} from \"../redux/actions\"\nimport StructurePicker from '../components/structures/StructurePicker'\nimport PlotInitializer from '../components/plotInitializer/PlotInitializer'\nimport LoadingTracker from '../components/loading/LoadingTracker'\nimport Tabs from '../components/tabs/Tabs'\nimport Controls from '../components/controls/Controls'\nimport PlotTweaking from './PlotTweaking'\nimport Settings from './Settings'\n\nimport {getApplicationKeyMap, GlobalHotKeys, configure} from 'react-hotkeys'\nimport { GLOBAL_HOT_KEYS, ADDITIONAL_GLOBAL_HOT_KEYS } from '../utils/hotkeys';\nimport PlotMethods from './PlotMethods';\nimport { AiFillSketchCircle } from 'react-icons/ai';\n\nconfigure({logLevel: \"debug\", simulateMissingKeyPressEvents: false})\nclass Plots extends Component {\n\n    constructor(props){\n        super(props)\n\n        this.state = {\n            displayPlotInitializer: false,\n            plotToInitialize: {\n                struct: false,\n                animation: false\n            },\n            loadingPlots: [],\n            plotOptions:[]\n        }\n\n        document.addEventListener(\"syncWithSession\", (e) => this.syncWithSession(e.detail.session) )\n\n        document.addEventListener(\"updateTabs\", () => this.syncWithSession())\n\n        document.addEventListener(\"loadingPlot\", (e) => {\n            this.setState({ loadingPlots: [...this.state.loadingPlots, e.detail.plot_id] })\n        })\n\n        document.addEventListener(\"plot\", (e) => {\n            const plot = e.detail.plot\n            props.addPlots({ [plot.id]: plot })\n            this.setState({ loadingPlots: this.state.loadingPlots.filter(id => id != plot.id) })\n        })\n\n        document.addEventListener(\"newPlot\", () => this.syncWithSession())\n\n        document.addEventListener(\"sessionUpdate\", (e) => {\n            e.detail.justUpdated.forEach( plotID => {\n                \n                PythonApi.getPlot(plotID)\n\n            })\n\n        })\n            \n    }\n\n    hotKeysHandlers = {\n        GO_TO_SETTINGS: () => this.props.setActivePage(\"settings\"),\n        GO_TO_DASHBOARD: () => this.props.setActivePage(\"plots\"),\n        SHOW_AVAIL_HOTKEYS: () => console.warn(getApplicationKeyMap())\n    }\n\n    syncWithSession = (session) => {\n\n        if (!session) {\n            return PythonApi.askForSession()\n        }\n        \n        this.props.setCurrentSession(session)\n        \n    }\n\n    componentDidMount(){\n\n        this.props.setActivePlot(undefined)\n\n        //Add the listener to display or not the plot initializer\n        this.listener = document.addEventListener(\"togglePlotInitializer\", this.togglePlotInitializer)\n        \n    }\n\n    componentDidUpdate(){\n\n        let activeTab = _.find(this.props.tabs, [\"id\", this.props.active.tab]) \n        \n        if (!activeTab) return\n\n        //Get the missing plots if there are any\n        activeTab.plots.forEach(plotID => {\n\n            if ( !this.props.plots[plotID] && this.state.loadingPlots.indexOf(plotID) == -1){\n\n                PythonApi.getPlot(plotID)\n                \n            }\n        })\n\n    }\n\n    getNewPlot = () => {\n\n        PythonApi.newPlot({tabID: this.props.active.tab, ...this.state.plotToInitialize})\n        \n        this.togglePlotInitializer()\n\n    }\n\n    togglePlotInitializer = (e) => {\n\n        let currentlyShowing = this.props.active.page == \"plotInitializer\"\n\n        if (e != undefined & e.detail != undefined) {\n            if (e.detail.forceShow &&  !currentlyShowing){\n                this.props.setActivePage(\"plotInitializer\")\n            } if (e.detail.forceHide && currentlyShowing){\n                this.props.setActivePage(\"plots\")\n            }\n        } else {\n            this.props.setActivePage(currentlyShowing ? \"plots\" : \"plotInitializer\")\n        }\n\n    }\n\n    render() {\n\n        const MainComponent = {\n            'plots': PlotDashboard,\n            'settings': Settings,\n            'plotTweaking': PlotTweaking,\n            'plotMethods': PlotMethods,\n            'plotInitializer': PlotInitializer\n        }[this.props.active.page]\n\n        return (\n            <div style={{marginBottom: 0, display: \"flex\", flexWrap: \"wrap\"}}>\n                <GlobalHotKeys keyMap={{...GLOBAL_HOT_KEYS}} handlers={this.hotKeysHandlers}/>\n                <div style={{marginLeft: 15, marginRight: 15, width: \"10vw\", minWidth: 150}}>\n                    <StructurePicker/>   \n                </div>\n                <div style={{flex: 1, height: \"100vh\", display: \"flex\", flexDirection: \"column\"}}>\n                    <LoadingTracker/>\n                    {this.props.active.page == \"plots\" ? <Tabs/> : null}\n                    <MainComponent style={{flex: 1}}/>\n                    <Controls/>\n                </div>\n                <ToastContainer/>\n                <ReactTooltip multiline disable={this.props.session.settings ? !this.props.session.settings.showTooltips : false}/>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    plots: state.plots,\n    structures: state.session.structures,\n    tabs: state.session.tabs,\n    active: state.active,\n    session: state.session\n})\n\nconst mapDispatchToProps = {\n    setCurrentSession,\n    setActiveTab,\n    setSessionTabs,\n    setActivePlot,\n    addPlots,\n    setNewStructures,\n    setNewPlotables,\n    setActivePage\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Plots);","import { createStore } from 'redux'\nimport {responsiveStoreEnhancer} from 'redux-responsive'\nimport { persistStore} from 'redux-persist'\n\nimport rootReducer from '../reducers'\n\nexport default () => {\n  let store = createStore(rootReducer, responsiveStoreEnhancer)\n  let persistor = persistStore(store)\n  //persistor.purge()\n  return { store, persistor }\n}","import React from 'react';\nimport './App.css';\nimport './materialize.min.css'\n\n//--Redux\nimport getStoreAndPersistor from './redux/store'\nimport { Provider } from 'react-redux'\nimport { PersistGate } from 'redux-persist/integration/react'\nimport Plots from './pages/Plots'\n\nconst {store, persistor} = getStoreAndPersistor()\n\nfunction App() {\n  return (\n    <Provider store={store}>\n      <PersistGate persistor={persistor}>\n        <div className=\"App\" style={{display: \"flex\", flexDirection: \"column\"}}>\n          <div className = \"appContent\" style={{height: \"100vh\"}}>\n            <Plots/>\n          </div>   \n        </div>\n      </PersistGate>\n    </Provider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}