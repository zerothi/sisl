

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Adding new backends &mdash; sisl</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css?v=13237357" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/tabs.css?v=4c969af8" />
      <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=fd3f3429" />
      <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css?v=d2d258e8" />
      <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
      <link rel="stylesheet" type="text/css" href="../../_static/nbsphinx-code-cells.css?v=2aa19091" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/custom_styles.css?v=cafe85c1" />
      <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=5d6eebe0"></script>
      <script src="../../_static/doctools.js?v=9a2dae69"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../_static/copybutton.js?v=7800a641"></script>
      <script src="../../_static/tabs.js?v=3ee01567"></script>
      <script>let toggleHintShow = 'Click to show';</script>
      <script>let toggleHintHide = 'Click to hide';</script>
      <script>let toggleOpenOnPrint = 'true';</script>
      <script src="../../_static/togglebutton.js?v=4a39c7ea"></script>
      <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
      <script src="../../_static/design-tabs.js?v=f930bc37"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
      <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
      <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Command line scripts" href="../../scripts/index.html" />
    <link rel="prev" title="Building a new plot" href="Building%20a%20new%20plot.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            sisl
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../quickstart/index.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cite.html">Citing sisl</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Visualization (<code class="xref py py-obj docutils literal notranslate"><span class="pre">sisl.viz</span></code>)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#basic-tutorials">Basic Tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#showcase-of-plot-classes">Showcase of plot classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#using-it-with-blender">Using it with blender</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#combining-plots">Combining plots</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#do-it-yourself">Do it yourself</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="Building%20a%20new%20plot.html">Building a new plot</a></li>
<li class="toctree-l3"><a class="reference internal" href="Building%20a%20new%20plot.html#The-tools">The tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="Building%20a%20new%20plot.html#A-plot-function">A plot function</a></li>
<li class="toctree-l3"><a class="reference internal" href="Building%20a%20new%20plot.html#From-function-to-Plot">From function to <code class="docutils literal notranslate"><span class="pre">Plot</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="Building%20a%20new%20plot.html#Additional-methods">Additional methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="Building%20a%20new%20plot.html#Complex-plots">Complex plots</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Adding new backends</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../scripts/index.html">Command line scripts</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced usage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../environment.html">Environment variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../toolbox/index.html">Toolboxes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../dev/index.html">Contributing to sisl</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Extras</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../math.html">Mathematical notation convention</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../other.html">Related software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../references.html">Bibliography</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">sisl</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Visualization (<code class="xref py py-obj docutils literal notranslate"><span class="pre">sisl.viz</span></code>)</a></li>
      <li class="breadcrumb-item active">Adding new backends</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/visualization/diy/Adding new backends.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div align="right">
<a href="https://raw.githubusercontent.com/zerothi/sisl/main/docs/visualization/diy/Adding new backends.ipynb">
    <img alt="ipynb download badge"
        src="https://img.shields.io/badge/download-ipynb-blue.svg"
        style="vertical-align:text-bottom">
</a>
&nbsp;
<a href="https://mybinder.org/v2/gh/zerothi/sisl/main?filepath=docs/visualization/diy/Adding new backends.ipynb">
   <img alt="Binder badge"
        src="https://mybinder.org/badge_logo.svg"
        style="vertical-align:text-bottom">
</a>
</div><section id="Adding-new-backends">
<h1>Adding new backends<a class="headerlink" href="#Adding-new-backends" title="Link to this heading"></a></h1>
<p>This notebook displays how to integrate a new plotting backend to <code class="docutils literal notranslate"><span class="pre">sisl.viz</span></code>.</p>
<p>Let’s create a toy graphene band structure to illustrate the conceps throughout this notebook:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sisl</span>

<span class="n">geom</span> <span class="o">=</span> <span class="n">sisl</span><span class="o">.</span><span class="n">geom</span><span class="o">.</span><span class="n">graphene</span><span class="p">(</span><span class="n">orthogonal</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">H</span> <span class="o">=</span> <span class="n">sisl</span><span class="o">.</span><span class="n">Hamiltonian</span><span class="p">(</span><span class="n">geom</span><span class="p">)</span>
<span class="n">H</span><span class="o">.</span><span class="n">construct</span><span class="p">(</span>
    <span class="p">[(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">1.44</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.7</span><span class="p">)],</span>
<span class="p">)</span>

<span class="n">band_struct</span> <span class="o">=</span> <span class="n">sisl</span><span class="o">.</span><span class="n">BandStructure</span><span class="p">(</span><span class="n">H</span><span class="p">,</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]],</span> <span class="mi">10</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;Gamma&quot;</span><span class="p">,</span> <span class="s2">&quot;X&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<p>The final display in the visualization module is controlled by the <code class="docutils literal notranslate"><span class="pre">Figure</span></code> class.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sisl.viz</span><span class="w"> </span><span class="kn">import</span> <span class="n">Figure</span>
</pre></div>
</div>
</div>
<p>And backends are stored in <code class="docutils literal notranslate"><span class="pre">sisl.viz.figure.BACKENDS</span></code>. It is just a dictionary containing extensions of the <code class="docutils literal notranslate"><span class="pre">Figure</span></code> class for particular plotting frameworks.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sisl.viz.figure</span><span class="w"> </span><span class="kn">import</span> <span class="n">BACKENDS</span>

<span class="n">BACKENDS</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;plotly&#39;: sisl.viz.figure.plotly.PlotlyFigure,
 &#39;matplotlib&#39;: sisl.viz.figure.matplotlib.MatplotlibFigure,
 &#39;py3dmol&#39;: sisl.viz.figure.Py3DmolFigure,
 &#39;blender&#39;: sisl.viz.figure.BlenderFigure}
</pre></div></div>
</div>
<p>Therefore, to add a new backend we must follow two steps:</p>
<ol class="arabic simple">
<li><p><strong>Subclass ``Figure``</strong>, adding backend specific functionality.</p></li>
<li><p><strong>Register</strong> the backend.</p></li>
</ol>
<p>The documentation of the <code class="docutils literal notranslate"><span class="pre">Figure</span></code> class explains what you should do to extend it:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">Figure</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Help on class Figure in module sisl.viz.figure.figure:

class Figure(builtins.object)
 |  Figure(plot_actions, *args, **kwargs)
 |
 |  Base figure class that all backends should inherit from.
 |
 |  It contains all the plotting actions that should be supported by a figure.
 |
 |  A subclass for a specific backend should implement as many methods as possible
 |  from the ones where Figure returns NotImplementedError.
 |  Other methods are optional because Figure contains a default implementation
 |  using other methods, which should work for most backends.
 |
 |  To create a new backend, one might take the PlotlyFigure as a template.
 |
 |  Methods defined here:
 |
 |  __init__(self, plot_actions, *args, **kwargs)
 |      Initialize self.  See help(type(self)) for accurate signature.
 |
 |  clear(self)
 |      Clears the figure so that we can draw again.
 |
 |  draw_area_line(self, x, y, name=None, line={}, text=None, dependent_axis=None, row=None, col=None, **kwargs)
 |      Same as draw line, but to draw a line with an area. This is for example used to draw fatbands.
 |
 |      Parameters
 |      -----------
 |      x: array-like
 |          the coordinates of the points along the X axis.
 |      y: array-like
 |          the coordinates of the points along the Y axis.
 |      name: str, optional
 |          the name of the scatter
 |      line: dict, optional
 |          specifications for the line style, following plotly standards. The backend
 |          should at least be able to implement `line[&#34;color&#34;]` and `line[&#34;width&#34;]`, but
 |          it is very advisable that it supports also `line[&#34;opacity&#34;]`.
 |      text: str, optional
 |          contains the text asigned to each marker. On plotly this is seen on hover,
 |          other options could be annotating. However, it is not necessary that this
 |          argument is supported.
 |      dependent_axis: str, optional
 |          The axis that contains the dependent variable. This is important because
 |          the area is drawn in parallel to that axis.
 |      row: int, optional
 |          If the figure contains subplots, the row where to draw.
 |      col: int, optional
 |          If the figure contains subplots, the column where to draw.
 |      **kwargs:
 |          should allow other keyword arguments to be passed directly to the creation of
 |          the scatter. This will of course be framework specific
 |
 |  draw_arrows(self, x, y, dxy, arrowhead_scale=0.2, arrowhead_angle=20, scale: &#39;float&#39; = 1, annotate: &#39;bool&#39; = False, row=None, col=None, **kwargs)
 |      Draws multiple arrows using the generic draw_line method.
 |
 |      Parameters
 |      -----------
 |      xy: np.ndarray of shape (n_arrows, 2)
 |          the positions where the atoms start.
 |      dxy: np.ndarray of shape (n_arrows, 2)
 |          the arrow vector.
 |      arrow_head_scale: float, optional
 |          how big is the arrow head in comparison to the arrow vector.
 |      arrowhead_angle: angle
 |          the angle that the arrow head forms with the direction of the arrow (in degrees).
 |      scale: float, optional
 |          multiplying factor to display the arrows. It does not affect the underlying data,
 |          therefore if the data is somehow displayed it should be without the scale factor.
 |      annotate:
 |          whether to annotate the arrows with the vector they represent.
 |      row: int, optional
 |          If the figure contains subplots, the row where to draw.
 |      col: int, optional
 |          If the figure contains subplots, the column where to draw.
 |
 |  draw_arrows_3D(self, x, y, z, dxyz, arrowhead_scale=0.3, arrowhead_angle=15, scale: &#39;float&#39; = 1, row=None, col=None, **kwargs)
 |      Draws multiple 3D arrows using the generic draw_line_3D method.
 |
 |      Parameters
 |      -----------
 |      x: np.ndarray of shape (n_arrows, )
 |          the X coordinates of the arrow&#39;s origin.
 |      y: np.ndarray of shape (n_arrows, )
 |          the Y coordinates of the arrow&#39;s origin.
 |      z: np.ndarray of shape (n_arrows, )
 |          the Z coordinates of the arrow&#39;s origin.
 |      dxyz: np.ndarray of shape (n_arrows, 2)
 |          the arrow vector.
 |      arrow_head_scale: float, optional
 |          how big is the arrow head in comparison to the arrow vector.
 |      arrowhead_angle: angle
 |          the angle that the arrow head forms with the direction of the arrow (in degrees).
 |      scale: float, optional
 |          multiplying factor to display the arrows. It does not affect the underlying data,
 |          therefore if the data is somehow displayed it should be without the scale factor.
 |      row: int, optional
 |          If the figure contains subplots, the row where to draw.
 |      col: int, optional
 |          If the figure contains subplots, the column where to draw.
 |
 |  draw_balls_3D(self, x, y, z, name=None, markers={}, row=None, col=None, **kwargs)
 |      Draws points as 3D spheres.
 |
 |  draw_heatmap(self, values, x=None, y=None, name=None, zsmooth=False, coloraxis=None, opacity=None, textformat=None, textfont={}, row=None, col=None, **kwargs)
 |      Draws a heatmap following the specifications.
 |
 |  draw_line(self, x, y, name=None, line={}, marker={}, text=None, row=None, col=None, **kwargs)
 |      Draws a line satisfying the specifications
 |
 |      Parameters
 |      -----------
 |      x: array-like
 |          the coordinates of the points along the X axis.
 |      y: array-like
 |          the coordinates of the points along the Y axis.
 |      name: str, optional
 |          the name of the line
 |      line: dict, optional
 |          specifications for the line style, following plotly standards. The backend
 |          should at least be able to implement `line[&#34;color&#34;]` and `line[&#34;width&#34;]`
 |      marker: dict, optional
 |          specifications for the markers style, following plotly standards. The backend
 |          should at least be able to implement `marker[&#34;color&#34;]` and `marker[&#34;size&#34;]`
 |      text: str, optional
 |          contains the text asigned to each marker. On plotly this is seen on hover,
 |          other options could be annotating. However, it is not necessary that this
 |          argument is supported.
 |      row: int, optional
 |          If the figure contains subplots, the row where to draw.
 |      col: int, optional
 |          If the figure contains subplots, the column where to draw.
 |      **kwargs:
 |          should allow other keyword arguments to be passed directly to the creation of
 |          the line. This will of course be framework specific
 |
 |  draw_line_3D(self, x, y, z, name=None, line={}, marker={}, text=None, row=None, col=None, **kwargs)
 |      Draws a 3D line satisfying the specifications.
 |
 |      Parameters
 |      -----------
 |      x: array-like
 |          the coordinates of the points along the X axis.
 |      y: array-like
 |          the coordinates of the points along the Y axis.
 |      z: array-like
 |          the coordinates of the points along the Z axis.
 |      name: str, optional
 |          the name of the line
 |      line: dict, optional
 |          specifications for the line style, following plotly standards. The backend
 |          should at least be able to implement `line[&#34;color&#34;]` and `line[&#34;width&#34;]`
 |      marker: dict, optional
 |          specifications for the markers style, following plotly standards. The backend
 |          should at least be able to implement `marker[&#34;color&#34;]` and `marker[&#34;size&#34;]`
 |      text: str, optional
 |          contains the text asigned to each marker. On plotly this is seen on hover,
 |          other options could be annotating. However, it is not necessary that this
 |          argument is supported.
 |      row: int, optional
 |          If the figure contains subplots, the row where to draw.
 |      col: int, optional
 |          If the figure contains subplots, the column where to draw.
 |      **kwargs:
 |          should allow other keyword arguments to be passed directly to the creation of
 |          the line. This will of course be framework specific
 |
 |  draw_mesh_3D(self, vertices, faces, color=None, opacity=None, name=None, row=None, col=None, **kwargs)
 |      Draws a 3D mesh following the specifications.
 |
 |  draw_multicolor_area_line(self, x, y, name=None, line={}, text=None, dependent_axis=None, row=None, col=None, **kwargs)
 |      Draw a line with an area with multiple colours.
 |
 |      Parameters
 |      -----------
 |      x: array-like
 |          the coordinates of the points along the X axis.
 |      y: array-like
 |          the coordinates of the points along the Y axis.
 |      name: str, optional
 |          the name of the scatter
 |      line: dict, optional
 |          specifications for the line style, following plotly standards. The backend
 |          should at least be able to implement `line[&#34;color&#34;]` and `line[&#34;width&#34;]`, but
 |          it is very advisable that it supports also `line[&#34;opacity&#34;]`.
 |      text: str, optional
 |          contains the text asigned to each marker. On plotly this is seen on hover,
 |          other options could be annotating. However, it is not necessary that this
 |          argument is supported.
 |      dependent_axis: str, optional
 |          The axis that contains the dependent variable. This is important because
 |          the area is drawn in parallel to that axis.
 |      row: int, optional
 |          If the figure contains subplots, the row where to draw.
 |      col: int, optional
 |          If the figure contains subplots, the column where to draw.
 |      **kwargs:
 |          should allow other keyword arguments to be passed directly to the creation of
 |          the scatter. This will of course be framework specific
 |
 |  draw_multicolor_balls_3D(self, x, y, z, name=None, marker={}, row=None, col=None, **kwargs)
 |      Draws points as 3D spheres with different colours.
 |
 |      If marker_color is an array of numbers, a coloraxis is created and values are converted to rgb.
 |
 |  draw_multicolor_line(self, *args, line={}, row=None, col=None, **kwargs)
 |      By default, multicoloured lines are drawn simply by drawing scatter points.
 |
 |  draw_multicolor_line_3D(self, *args, **kwargs)
 |      Draws a multicoloured 3D line.
 |
 |  draw_multicolor_scatter(self, *args, **kwargs)
 |      Draws a multicoloured scatter.
 |
 |      Usually the normal scatter can already support this.
 |
 |  draw_multicolor_scatter_3D(self, *args, **kwargs)
 |      Draws a multicoloured 3D scatter.
 |
 |      Usually the normal 3D scatter can already support this.
 |
 |  draw_multisize_area_line(self, x, y, name=None, line={}, text=None, dependent_axis=None, row=None, col=None, **kwargs)
 |      Draw a line with an area with multiple colours.
 |
 |      This is already usually supported by the normal draw_area_line.
 |
 |      Parameters
 |      -----------
 |      x: array-like
 |          the coordinates of the points along the X axis.
 |      y: array-like
 |          the coordinates of the points along the Y axis.
 |      name: str, optional
 |          the name of the scatter
 |      line: dict, optional
 |          specifications for the line style, following plotly standards. The backend
 |          should at least be able to implement `line[&#34;color&#34;]` and `line[&#34;width&#34;]`, but
 |          it is very advisable that it supports also `line[&#34;opacity&#34;]`.
 |      text: str, optional
 |          contains the text asigned to each marker. On plotly this is seen on hover,
 |          other options could be annotating. However, it is not necessary that this
 |          argument is supported.
 |      dependent_axis: str, optional
 |          The axis that contains the dependent variable. This is important because
 |          the area is drawn in parallel to that axis.
 |      row: int, optional
 |          If the figure contains subplots, the row where to draw.
 |      col: int, optional
 |          If the figure contains subplots, the column where to draw.
 |      **kwargs:
 |          should allow other keyword arguments to be passed directly to the creation of
 |          the scatter. This will of course be framework specific
 |
 |  draw_multisize_balls_3D(self, x, y, z, name=None, marker={}, row=None, col=None, **kwargs)
 |      Draws points as 3D spheres with different sizes.
 |
 |      Usually supported by the normal draw_balls_3D
 |
 |  draw_multisize_line(self, *args, line={}, row=None, col=None, **kwargs)
 |      By default, multisized lines are drawn simple by drawing scatter points.
 |
 |  draw_multisize_line_3D(self, *args, **kwargs)
 |      Draws a multisized 3D line.
 |
 |  draw_multisize_scatter(self, *args, **kwargs)
 |      Draws a multisized scatter.
 |
 |      Usually the normal scatter can already support this.
 |
 |  draw_multisize_scatter_3D(self, *args, **kwargs)
 |      Draws a multisized 3D scatter.
 |
 |      Usually the normal 3D scatter can already support this.
 |
 |  draw_scatter(self, x, y, name=None, marker={}, text=None, row=None, col=None, **kwargs)
 |      Draws a scatter satisfying the specifications
 |
 |      Parameters
 |      -----------
 |      x: array-like
 |          the coordinates of the points along the X axis.
 |      y: array-like
 |          the coordinates of the points along the Y axis.
 |      name: str, optional
 |          the name of the scatter
 |      marker: dict, optional
 |          specifications for the markers style, following plotly standards. The backend
 |          should at least be able to implement `marker[&#34;color&#34;]` and `marker[&#34;size&#34;]`, but
 |          it is very advisable that it supports also `marker[&#34;opacity&#34;]` and `marker[&#34;colorscale&#34;]`
 |      text: str, optional
 |          contains the text asigned to each marker. On plotly this is seen on hover,
 |          other options could be annotating. However, it is not necessary that this
 |          argument is supported.
 |      row: int, optional
 |          If the figure contains subplots, the row where to draw.
 |      col: int, optional
 |          If the figure contains subplots, the column where to draw.
 |      **kwargs:
 |          should allow other keyword arguments to be passed directly to the creation of
 |          the scatter. This will of course be framework specific
 |
 |  draw_scatter_3D(self, x, y, z, name=None, marker={}, text=None, row=None, col=None, **kwargs)
 |      Draws a 3D scatter satisfying the specifications
 |
 |      Parameters
 |      -----------
 |      x: array-like
 |          the coordinates of the points along the X axis.
 |      y: array-like
 |          the coordinates of the points along the Y axis.
 |      z: array-like
 |          the coordinates of the points along the Z axis.
 |      name: str, optional
 |          the name of the scatter
 |      marker: dict, optional
 |          specifications for the markers style, following plotly standards. The backend
 |          should at least be able to implement `marker[&#34;color&#34;]` and `marker[&#34;size&#34;]`
 |      text: str, optional
 |          contains the text asigned to each marker. On plotly this is seen on hover,
 |          other options could be annotating. However, it is not necessary that this
 |          argument is supported.
 |      row: int, optional
 |          If the figure contains subplots, the row where to draw.
 |      col: int, optional
 |          If the figure contains subplots, the column where to draw.
 |      **kwargs:
 |          should allow other keyword arguments to be passed directly to the creation of
 |          the scatter. This will of course be framework specific
 |
 |  init_3D(self)
 |      Called if functions that draw in 3D are going to be called.
 |
 |  init_coloraxis(self, name, cmin=None, cmax=None, cmid=None, colorscale=None, showscale=True, **kwargs)
 |      Initializes a color axis to be used by the drawing functions
 |
 |  init_figure(self, composite_method: &#34;Literal[None, &#39;same_axes&#39;, &#39;multiple&#39;, &#39;multiple_x&#39;, &#39;multiple_y&#39;, &#39;subplots&#39;, &#39;animation&#39;]&#34; = None, plot_actions=(), init_kwargs: &#39;dict[str, Any]&#39; = {})
 |
 |  set_axes_equal(self)
 |      Sets the axes equal.
 |
 |  set_axis(self, **kwargs)
 |      Sets the axis parameters.
 |
 |      The specification for the axes is exactly the plotly one. This is to have a good
 |      reference for consistency. Other frameworks should translate the calls to their
 |      functionality.
 |
 |  show(self)
 |
 |  to(self, key: &#39;str&#39;)
 |      Converts the figure to another backend.
 |
 |      Parameters
 |      -----------
 |      key: str
 |          the backend to convert to.
 |
 |  ----------------------------------------------------------------------
 |  Class methods defined here:
 |
 |  fig_has_attr(key: &#39;str&#39;) -&gt; &#39;bool&#39;
 |      Whether the figure that this class generates has a given attribute.
 |
 |      Parameters
 |      -----------
 |      key
 |          the attribute to check for.
 |
 |  ----------------------------------------------------------------------
 |  Data descriptors defined here:
 |
 |  __dict__
 |      dictionary for instance variables
 |
 |  __weakref__
 |      list of weak references to the object
 |
 |  ----------------------------------------------------------------------
 |  Data and other attributes defined here:
 |
 |  __annotations__ = {&#39;_coloraxes&#39;: &#39;dict&#39;, &#39;_cols&#39;: &#39;Optional[int]&#39;, &#39;_m...
 |
 |  plot_actions = []

</pre></div></div>
</div>
<p>Therefore, we need to implement some of the methods of the <code class="docutils literal notranslate"><span class="pre">Figure</span></code> class. The more we implement, the more we will support <code class="docutils literal notranslate"><span class="pre">sisl.viz</span></code>.</p>
<p>Here’s an example of a very simple backend that just writes text:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>


<span class="k">class</span><span class="w"> </span><span class="nc">TextFigure</span><span class="p">(</span><span class="n">Figure</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_init_figure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">draw_line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">LINE: </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">draw_scatter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">SCATTER: </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_ipython_display_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>And all that is left now is to register the backend by simply adding it to the <code class="docutils literal notranslate"><span class="pre">BACKENDS</span></code> dictionary.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">BACKENDS</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">TextFigure</span>
</pre></div>
</div>
</div>
<p>Let’s plot the bands to check that it works.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plot</span> <span class="o">=</span> <span class="n">band_struct</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">plot</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="admonition warning">
<p>Data type cannot be displayed: application/vnd.plotly.v1+json</p>
</div>
</div>
</div>
<p>The default backend has been used, let’s now change it to our new <code class="docutils literal notranslate"><span class="pre">&quot;text&quot;</span></code> backend.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plot</span><span class="o">.</span><span class="n">update_inputs</span><span class="p">(</span><span class="n">backend</span><span class="o">=</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO    Task(Task-2) nodify.node.139623722207376:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.139623723927696:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.139623722209296:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.139623723928176:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.139623723928608:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.139623723938400:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.139623722143808:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.139623722209488:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.139623722147312:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.139623722149232:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.139623722206032:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.139623723939264:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.139623723928944:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.139623722210352:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.139623722146784:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.139623723928944:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.139623722211120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.139623723938928:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.139623722154176:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.139623722205984:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.139623723928944:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.139623722210016:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.139623722206032:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.139623722146736:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.139623723927696:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.139623722209296:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.139623722146352:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.139623723927696:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.139623722209296:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.139623723928176:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.139623723928608:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.139623723938400:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.139623722143808:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.139623722209488:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.139623722212560:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.139623722151488:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.139623722149664:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.139623722151056:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.139623722154944:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.139623722141456:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.139623723928944:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.139623722146688:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.139623722212176:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.139623722150240:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.139623723929712:node.py:get()- Evaluated because inputs changed.
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

LINE: Bands
[0.         0.08194034 0.16388068 0.24582102 0.32776136 0.4097017
 0.49164204 0.57358238 0.65552272 0.73746306]
[-8.1        -8.07260764 -7.99070941 -7.85514486 -7.66732391 -7.42924537
 -7.14352854 -6.81346515 -6.44310336 -6.03738354]
LINE: Bands
[0.         0.08194034 0.16388068 0.24582102 0.32776136 0.4097017
 0.49164204 0.57358238 0.65552272 0.73746306]
[-2.7        -2.78082828 -3.00808297 -3.34614692 -3.75661337 -4.20788704
 -4.67653718 -5.14555076 -5.60235836 -6.03738354]
LINE: Bands
[0.         0.08194034 0.16388068 0.24582102 0.32776136 0.4097017
 0.49164204 0.57358238 0.65552272 0.73746306]
[2.7        2.78082828 3.00808297 3.34614692 3.75661337 4.20788704
 4.67653718 5.14555076 5.60235836 6.03738354]
LINE: Bands
[0.         0.08194034 0.16388068 0.24582102 0.32776136 0.4097017
 0.49164204 0.57358238 0.65552272 0.73746306]
[8.1        8.07260764 7.99070941 7.85514486 7.66732391 7.42924537
 7.14352854 6.81346515 6.44310336 6.03738354]
</pre></div></div>
</div>
<p>Not a very visually appealing backend, but it serves the purpose of demonstrating how it is done. Now it is your turn!</p>
<div class="admonition note">
<p class="admonition-title fa fa-exclamation-circle">Note</p>
<p>For a complex framework you might take inspiration from the already implemented backends in <code class="docutils literal notranslate"><span class="pre">sisl.viz.figure.*</span></code>.</p>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Building%20a%20new%20plot.html" class="btn btn-neutral float-left" title="Building a new plot" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../../scripts/index.html" class="btn btn-neutral float-right" title="Command line scripts" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2015-2025, sisl developers.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>