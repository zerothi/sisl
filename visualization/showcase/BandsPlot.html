

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BandsPlot &mdash; sisl</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css?v=13237357" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/tabs.css?v=4c969af8" />
      <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=fd3f3429" />
      <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css?v=d2d258e8" />
      <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
      <link rel="stylesheet" type="text/css" href="../../_static/nbsphinx-code-cells.css?v=2aa19091" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/custom_styles.css?v=cafe85c1" />
      <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=dd57b077"></script>
      <script src="../../_static/doctools.js?v=9a2dae69"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../_static/copybutton.js?v=7800a641"></script>
      <script src="../../_static/tabs.js?v=3ee01567"></script>
      <script>let toggleHintShow = 'Click to show';</script>
      <script>let toggleHintHide = 'Click to hide';</script>
      <script>let toggleOpenOnPrint = 'true';</script>
      <script src="../../_static/togglebutton.js?v=4a39c7ea"></script>
      <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
      <script src="../../_static/design-tabs.js?v=f930bc37"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
      <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
      <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="FatbandsPlot" href="FatbandsPlot.html" />
    <link rel="prev" title="AtomicMatrixPlot" href="AtomicMatrixPlot.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            sisl
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../quickstart/index.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cite.html">Citing sisl</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Visualization (<code class="xref py py-obj docutils literal notranslate"><span class="pre">sisl.viz</span></code>)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#basic-tutorials">Basic Tutorials</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#showcase-of-plot-classes">Showcase of plot classes</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="GeometryPlot.html">GeometryPlot</a></li>
<li class="toctree-l3"><a class="reference internal" href="SitesPlot.html">SitesPlot</a></li>
<li class="toctree-l3"><a class="reference internal" href="GridPlot.html">GridPlot</a></li>
<li class="toctree-l3"><a class="reference internal" href="AtomicMatrixPlot.html">AtomicMatrixPlot</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">BandsPlot</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Getting-the-bands-that-you-want">Getting the bands that you want</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Individual-bands-in-legend">Individual bands in legend</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Bands-styling">Bands styling</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Displaying-the-smallest-gaps">Displaying the smallest gaps</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Displaying-custom-gaps">Displaying custom gaps</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Displaying-spin-texture">Displaying spin texture</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="FatbandsPlot.html">FatbandsPlot</a></li>
<li class="toctree-l3"><a class="reference internal" href="PdosPlot.html">PdosPlot</a></li>
<li class="toctree-l3"><a class="reference internal" href="WavefunctionPlot.html">WavefunctionPlot</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#using-it-with-blender">Using it with blender</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#combining-plots">Combining plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#do-it-yourself">Do it yourself</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../scripts/index.html">Command line scripts</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced usage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../environment.html">Environment variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../toolbox/index.html">Toolboxes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../dev/index.html">Contributing to sisl</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Extras</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../math.html">Mathematical notation convention</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../other.html">Related software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../references.html">Bibliography</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">sisl</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Visualization (<code class="xref py py-obj docutils literal notranslate"><span class="pre">sisl.viz</span></code>)</a></li>
      <li class="breadcrumb-item active">BandsPlot</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/visualization/showcase/BandsPlot.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div align="right">
<a href="https://raw.githubusercontent.com/zerothi/sisl/main/docs/visualization/showcase/BandsPlot.ipynb">
    <img alt="ipynb download badge"
        src="https://img.shields.io/badge/download-ipynb-blue.svg"
        style="vertical-align:text-bottom">
</a>
&nbsp;
<a href="https://mybinder.org/v2/gh/zerothi/sisl/main?filepath=docs/visualization/showcase/BandsPlot.ipynb">
   <img alt="Binder badge"
        src="https://mybinder.org/badge_logo.svg"
        style="vertical-align:text-bottom">
</a>
</div><p><a class="reference external" href="https://github.com/pfebrer/sisl/labels/BandsPlot"><img alt="GitHub issues by-label" src="https://img.shields.io/github/issues-raw/pfebrer/sisl/BandsPlot?style=for-the-badge" /></a></p>
<section id="BandsPlot">
<h1>BandsPlot<a class="headerlink" href="#BandsPlot" title="Link to this heading"></a></h1>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sisl</span>

<span class="c1"># This is just for convenience to retreive files</span>
<span class="n">siesta_files</span> <span class="o">=</span> <span class="n">sisl</span><span class="o">.</span><span class="n">get_environ_variable</span><span class="p">(</span><span class="s2">&quot;SISL_FILES_TESTS&quot;</span><span class="p">)</span> <span class="o">/</span> <span class="s2">&quot;siesta&quot;</span>
</pre></div>
</div>
</div>
<p>Let’s get a bands_plot from a <code class="docutils literal notranslate"><span class="pre">.bands</span></code> file</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bands_plot</span> <span class="o">=</span> <span class="n">sisl</span><span class="o">.</span><span class="n">get_sile</span><span class="p">(</span>
    <span class="n">siesta_files</span> <span class="o">/</span> <span class="s2">&quot;SrTiO3&quot;</span> <span class="o">/</span> <span class="s2">&quot;unpolarized&quot;</span> <span class="o">/</span> <span class="s2">&quot;SrTiO3.bands&quot;</span>
<span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>and see what we’ve got:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bands_plot</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="admonition warning">
<p>Data type cannot be displayed: application/vnd.plotly.v1+json</p>
</div>
</div>
</div>
<section id="Getting-the-bands-that-you-want">
<h2>Getting the bands that you want<a class="headerlink" href="#Getting-the-bands-that-you-want" title="Link to this heading"></a></h2>
<p>By default, <code class="docutils literal notranslate"><span class="pre">BandsPlot</span></code> gives you <strong>the 15 bands below and above 0 eV</strong> (which is interpreted as the fermi level).</p>
<p>There are two main ways to specify the bands that you want to display: <code class="docutils literal notranslate"><span class="pre">Erange</span></code> and <code class="docutils literal notranslate"><span class="pre">bands_range</span></code>.</p>
<p>As you may have guessed, <code class="docutils literal notranslate"><span class="pre">Erange</span></code> specifies the energy range that is displayed:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bands_plot</span><span class="o">.</span><span class="n">update_inputs</span><span class="p">(</span><span class="n">Erange</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO    Task(Task-2) nodify.node.140129811754224:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748080:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747792:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811748368:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749184:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749616:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755712:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811750000:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811750384:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811753840:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756096:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756960:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756672:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811757536:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756864:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811750768:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811753456:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756432:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811753840:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811758208:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811748080:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811751152:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748080:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747792:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748368:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749184:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749616:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755712:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811890256:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811751536:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811751920:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811752304:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811752688:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811753072:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811759024:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811758688:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811758928:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811891264:node.py:get()- Evaluated because inputs changed.
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="admonition warning">
<p>Data type cannot be displayed: application/vnd.plotly.v1+json</p>
</div>
</div>
</div>
<p>while with <code class="docutils literal notranslate"><span class="pre">bands_range</span></code> you can actually indicate the indices.</p>
<p>However, note that <strong>``Erange`` has preference over ``bands_range``</strong>, therefore you need to set <code class="docutils literal notranslate"><span class="pre">Erange</span></code> to <code class="docutils literal notranslate"><span class="pre">None</span></code> if you want the change to take effect.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bands_plot</span><span class="o">.</span><span class="n">update_inputs</span><span class="p">(</span><span class="n">bands_range</span><span class="o">=</span><span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">15</span><span class="p">],</span> <span class="n">Erange</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO    Task(Task-2) nodify.node.140129811754224:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748080:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747792:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811748368:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749184:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811749616:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755712:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811750000:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811750384:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811753840:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756096:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756960:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756672:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811757536:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756864:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811750768:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811753456:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756432:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811753840:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811758208:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811748080:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811751152:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748080:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747792:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748368:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749184:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749616:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755712:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811890256:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811751536:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811751920:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811752304:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811752688:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811753072:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811759024:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811758688:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811758928:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811891264:node.py:get()- Evaluated because inputs changed.
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="admonition warning">
<p>Data type cannot be displayed: application/vnd.plotly.v1+json</p>
</div>
</div>
</div>
<p>If your fermi level is not correctly set or you want a different energy reference, you can provide a value for <code class="docutils literal notranslate"><span class="pre">E0</span></code> to specify where your 0 should be and the bands to display will be automatically calculated from that.</p>
<p>However, if you want to update <code class="docutils literal notranslate"><span class="pre">E0</span></code> after the plot has been build and you want <code class="docutils literal notranslate"><span class="pre">BandsPlot</span></code> to recalculate the bands for you you will need to set <code class="docutils literal notranslate"><span class="pre">Erange</span></code> and <code class="docutils literal notranslate"><span class="pre">bands_range</span></code> to <code class="docutils literal notranslate"><span class="pre">None</span></code> again.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bands_plot</span><span class="o">.</span><span class="n">update_inputs</span><span class="p">(</span><span class="n">E0</span><span class="o">=-</span><span class="mi">10</span><span class="p">,</span> <span class="n">bands_range</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">Erange</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO    Task(Task-2) nodify.node.140129811754224:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748080:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747792:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811748368:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811749184:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811749616:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755712:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811750000:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811750384:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811753840:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756096:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756960:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756672:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811757536:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756864:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811750768:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811753456:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756432:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811753840:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811758208:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811748080:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811751152:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748080:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747792:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748368:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749184:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749616:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755712:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811890256:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811751536:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811751920:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811752304:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811752688:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811753072:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811759024:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811758688:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811758928:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811891264:node.py:get()- Evaluated because inputs changed.
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="admonition warning">
<p>Data type cannot be displayed: application/vnd.plotly.v1+json</p>
</div>
</div>
</div>
<p>Notice how only 25 bands are displayed now: the only 10 that are below 0 eV (there are no lower states) and 15 above 0 eV.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set them back to &quot;normal&quot;</span>
<span class="n">bands_plot</span> <span class="o">=</span> <span class="n">bands_plot</span><span class="o">.</span><span class="n">update_inputs</span><span class="p">(</span><span class="n">E0</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">bands_range</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">Erange</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Notice that in spin polarized bands, <strong>you can select the spins to display using the ``spin`` setting</strong>, just pass a list of spin components (e.g. <code class="docutils literal notranslate"><span class="pre">spin=[0]</span></code>).</p>
</section>
<section id="Individual-bands-in-legend">
<h2>Individual bands in legend<a class="headerlink" href="#Individual-bands-in-legend" title="Link to this heading"></a></h2>
<p>Usually, showing all bands individually in the legend would be too messy. However, you might want to do it so that you can interactively hide show certain bands. If that is the case, you can set <code class="docutils literal notranslate"><span class="pre">group_legend</span></code> to <code class="docutils literal notranslate"><span class="pre">False</span></code>:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bands_plot</span><span class="o">.</span><span class="n">update_inputs</span><span class="p">(</span><span class="n">group_legend</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO    Task(Task-2) nodify.node.140129811754224:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748080:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747792:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811748368:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811749184:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811749616:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755712:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811750000:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811750384:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811753840:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811756096:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756960:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756672:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811757536:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756864:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811750768:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811753456:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756432:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811753840:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811758208:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811748080:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811751152:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748080:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747792:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748368:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749184:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749616:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755712:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811890256:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811751536:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811751920:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811752304:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811752688:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811753072:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811759024:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811758688:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811758928:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811891264:node.py:get()- Evaluated because inputs changed.
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="admonition warning">
<p>Data type cannot be displayed: application/vnd.plotly.v1+json</p>
</div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bands_plot</span> <span class="o">=</span> <span class="n">bands_plot</span><span class="o">.</span><span class="n">update_inputs</span><span class="p">(</span><span class="n">group_legend</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="Bands-styling">
<h2>Bands styling<a class="headerlink" href="#Bands-styling" title="Link to this heading"></a></h2>
<p>If all you want is to change the color and width of the bands, there’s one simple solution: use the <code class="docutils literal notranslate"><span class="pre">bands_style</span></code> input to tweak the line styles.</p>
<p>Let’s show them in red:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bands_plot</span><span class="o">.</span><span class="n">update_inputs</span><span class="p">(</span><span class="n">bands_style</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;red&quot;</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO    Task(Task-2) nodify.node.140129811754224:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748080:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747792:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748368:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749184:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749616:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755712:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811750000:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811750384:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811753840:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811756096:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756960:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756672:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811757536:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756864:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811750768:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811753456:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756432:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811753840:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811758208:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811748080:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811751152:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748080:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747792:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748368:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749184:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749616:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755712:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811890256:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811751536:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811751920:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811752304:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811752688:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811753072:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811759024:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811758688:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811758928:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811891264:node.py:get()- Evaluated because inputs changed.
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="admonition warning">
<p>Data type cannot be displayed: application/vnd.plotly.v1+json</p>
</div>
</div>
</div>
<p>And now in green but also make them wider:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bands_plot</span><span class="o">.</span><span class="n">update_inputs</span><span class="p">(</span><span class="n">bands_style</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;green&quot;</span><span class="p">,</span> <span class="s2">&quot;width&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO    Task(Task-2) nodify.node.140129811754224:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748080:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747792:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748368:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749184:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749616:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755712:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811750000:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811750384:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811753840:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756096:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756960:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756672:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811757536:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756864:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811750768:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811753456:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756432:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811753840:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811758208:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811748080:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811751152:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748080:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747792:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748368:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749184:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749616:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755712:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811890256:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811751536:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811751920:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811752304:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811752688:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811753072:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811759024:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811758688:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811758928:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811891264:node.py:get()- Evaluated because inputs changed.
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="admonition warning">
<p>Data type cannot be displayed: application/vnd.plotly.v1+json</p>
</div>
</div>
</div>
<p>If you have spin polarized bands, <code class="docutils literal notranslate"><span class="pre">bands_style</span></code> will tweak the colors for the first spin channel, while the second one can be tuned with <code class="docutils literal notranslate"><span class="pre">spindown_style</span></code>.</p>
<p>Finally, you can pass functions to the keys of <code class="docutils literal notranslate"><span class="pre">bands_style</span></code> to customize the styles on a band basis, or even on a point basis. The functions should accept <code class="docutils literal notranslate"><span class="pre">data</span></code> as an argument, which will be an <code class="docutils literal notranslate"><span class="pre">xarray.Dataset</span></code> containing all the bands data. It should then return a single value or an array of values. It is best shown with examples. Let’s create a function just to see what we receive as an input:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">color</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Dummy function to see what we receive.&quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">return</span> <span class="s2">&quot;green&quot;</span>


<span class="n">bands_plot</span><span class="o">.</span><span class="n">update_inputs</span><span class="p">(</span><span class="n">bands_style</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="n">color</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO    Task(Task-2) nodify.node.140129811754224:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748080:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747792:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748368:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749184:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749616:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755712:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811750000:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811750384:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811753840:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756096:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756960:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756672:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811757536:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756864:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811750768:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811753456:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756432:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811753840:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811758208:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811748080:node.py:get()- No need to evaluate
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;xarray.Dataset&gt; Size: 40kB
Dimensions:  (k: 150, band: 32)
Coordinates:
  * k        (k) float64 1kB 0.0 0.01951 0.03901 0.05852 ... 2.779 2.797 2.815
  * band     (band) int32 128B 4 5 6 7 8 9 10 11 12 ... 28 29 30 31 32 33 34 35
Data variables:
    E        (k, band) float64 38kB -33.28 -18.53 -17.46 ... 17.36 17.36 19.25
Attributes:
    spin:     Spin{unpolarized}
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO    Task(Task-2) nodify.node.140129811755520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811751152:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748080:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747792:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748368:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749184:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749616:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755712:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811890256:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811751536:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811751920:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811752304:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811752688:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811753072:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811759024:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811758688:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811758928:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811891264:node.py:get()- Evaluated because inputs changed.
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="admonition warning">
<p>Data type cannot be displayed: application/vnd.plotly.v1+json</p>
</div>
</div>
</div>
<p>So, you can see that we receive a <code class="docutils literal notranslate"><span class="pre">Dataset</span></code>. The most important variable is <code class="docutils literal notranslate"><span class="pre">E</span></code>, which contains the energy (that depends on <code class="docutils literal notranslate"><span class="pre">k</span></code> and <code class="docutils literal notranslate"><span class="pre">band</span></code>). Let’s now play with it to do some custom styling:</p>
<ul class="simple">
<li><p>The <strong>color</strong> will be determined by <strong>the slope of the band</strong>.</p></li>
<li><p>We will plot <strong>bands that are closer to the fermi level bigger</strong> because they are more important.</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">gradient</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Function that computes the absolute value of dE/dk.</span>

<span class="sd">    This returns a two dimensional array (gradient depends on k and band)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">E</span><span class="o">.</span><span class="n">differentiate</span><span class="p">(</span><span class="s2">&quot;k&quot;</span><span class="p">))</span>


<span class="k">def</span><span class="w"> </span><span class="nf">band_closeness_to_Ef</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Computes how close one band is to the fermi level.</span>

<span class="sd">    This returns a one dimensional array (distance depends only on band)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">dist_from_Ef</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">E</span><span class="p">)</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="s2">&quot;k&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="n">dist_from_Ef</span><span class="o">**</span><span class="mf">0.4</span><span class="p">)</span> <span class="o">*</span> <span class="mi">5</span>


<span class="c1"># Now we are going to set the width of the band according to the distance from the fermi level</span>
<span class="c1"># and the color according to the gradient. We are going to set the colorscale also, instead of using</span>
<span class="c1"># the default one.</span>
<span class="n">bands_plot</span><span class="o">.</span><span class="n">update_inputs</span><span class="p">(</span>
    <span class="n">bands_style</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;width&quot;</span><span class="p">:</span> <span class="n">band_closeness_to_Ef</span><span class="p">,</span> <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="n">gradient</span><span class="p">},</span>
    <span class="n">colorscale</span><span class="o">=</span><span class="s2">&quot;temps&quot;</span><span class="p">,</span>
    <span class="n">Erange</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO    Task(Task-2) nodify.node.140129811754224:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748080:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747792:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811748368:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749184:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749616:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755712:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811750000:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811750384:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811753840:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756096:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756960:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756672:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811757536:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756864:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811750768:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811753456:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756432:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811753840:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811758208:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811748080:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811751152:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748080:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747792:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748368:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749184:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749616:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755712:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811890256:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811751536:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811751920:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811752304:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811752688:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811753072:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811759024:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811758688:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811758928:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811891264:node.py:get()- Evaluated because inputs changed.
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="admonition warning">
<p>Data type cannot be displayed: application/vnd.plotly.v1+json</p>
</div>
</div>
</div>
<p>You can see that by providing callables the possibilities are endless, you are only limited by your imagination!</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bands_plot</span> <span class="o">=</span> <span class="n">bands_plot</span><span class="o">.</span><span class="n">update_inputs</span><span class="p">(</span><span class="n">bands_style</span><span class="o">=</span><span class="p">{})</span>
</pre></div>
</div>
</div>
</section>
<section id="Displaying-the-smallest-gaps">
<h2>Displaying the smallest gaps<a class="headerlink" href="#Displaying-the-smallest-gaps" title="Link to this heading"></a></h2>
<p>The easiest thing to do is to let <code class="docutils literal notranslate"><span class="pre">BandsPlot</span></code> discover where the (minimum) gaps are.</p>
<p>This is indicated by setting the <code class="docutils literal notranslate"><span class="pre">gap</span></code> parameter to <code class="docutils literal notranslate"><span class="pre">True</span></code>. One can also use <code class="docutils literal notranslate"><span class="pre">gap_color</span></code> if a particular color is desired.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bands_plot</span><span class="o">.</span><span class="n">update_inputs</span><span class="p">(</span><span class="n">gap</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">gap_color</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">,</span> <span class="n">Erange</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO    Task(Task-2) nodify.node.140129811754224:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748080:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747792:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811748368:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749184:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749616:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755712:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811750000:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811750384:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811753840:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756096:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756960:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756672:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811757536:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756864:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811750768:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811753456:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756432:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811753840:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811758208:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811748080:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811751152:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811748080:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747792:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748368:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749184:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749616:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755712:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811890256:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811751536:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811751920:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811752304:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811752688:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811753072:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811759024:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811758688:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811758928:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811891264:node.py:get()- Evaluated because inputs changed.
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="admonition warning">
<p>Data type cannot be displayed: application/vnd.plotly.v1+json</p>
</div>
</div>
</div>
<p>This displays the minimum gaps. However there may be some issues with it: it will show <strong>all</strong> gaps with the minimum value. That is, if you have repeated points in the brillouin zone it will display multiple gaps that are equivalent.</p>
<p>What’s worse, if the region where your gap is is very flat, two consecutive points might have the same energy. Multiple gaps will be displayed one glued to another.</p>
<p>To help cope with this issues, you have the <code class="docutils literal notranslate"><span class="pre">direct_gaps_only</span></code> and <code class="docutils literal notranslate"><span class="pre">gap_tol</span></code>.</p>
<p>In this case, since we have no direct gaps, setting <code class="docutils literal notranslate"><span class="pre">direct_gaps_only</span></code> will hide them all:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bands_plot</span><span class="o">.</span><span class="n">update_inputs</span><span class="p">(</span><span class="n">direct_gaps_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO    Task(Task-2) nodify.node.140129811754224:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748080:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747792:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748368:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749184:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749616:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755712:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811750000:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811750384:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811753840:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756096:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756960:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756672:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811757536:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756864:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811750768:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811753456:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756432:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811753840:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811758208:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748080:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811751152:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748080:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747792:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748368:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749184:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749616:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755712:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811890256:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811751536:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811751920:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811752304:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811752688:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811753072:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811759024:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811758688:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811758928:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811891264:node.py:get()- Evaluated because inputs changed.
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="admonition warning">
<p>Data type cannot be displayed: application/vnd.plotly.v1+json</p>
</div>
</div>
</div>
<p>This example is not meaningful for <code class="docutils literal notranslate"><span class="pre">gap_tol</span></code>, but it is illustrative of what <code class="docutils literal notranslate"><span class="pre">gap_tol</span></code> does. It is the <strong>minimum k-distance between two points to consider them “the same point”</strong> in the sense that only one of them will be used to show the gap. In this case, if we set <code class="docutils literal notranslate"><span class="pre">gap_tol</span></code> all the way up to 3, the plot will consider the two gamma points to be part of the same “point” and therefore it will only show the gap once.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bands_plot</span><span class="o">.</span><span class="n">update_inputs</span><span class="p">(</span><span class="n">direct_gaps_only</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">gap_tol</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO    Task(Task-2) nodify.node.140129811754224:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748080:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747792:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748368:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749184:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749616:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755712:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811750000:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811750384:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811753840:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756096:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756960:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756672:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811757536:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756864:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811750768:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811753456:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756432:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811753840:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811758208:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748080:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811751152:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748080:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747792:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748368:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749184:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749616:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755712:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811890256:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811751536:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811751920:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811752304:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811752688:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811753072:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811759024:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811758688:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811758928:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811891264:node.py:get()- Evaluated because inputs changed.
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="admonition warning">
<p>Data type cannot be displayed: application/vnd.plotly.v1+json</p>
</div>
</div>
</div>
<p>This is not what <code class="docutils literal notranslate"><span class="pre">gap_tol</span></code> is meant for, since it is thought to remediate the effect of locally flat bands, but still you can get the idea of what it does.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bands_plot</span> <span class="o">=</span> <span class="n">bands_plot</span><span class="o">.</span><span class="n">update_inputs</span><span class="p">(</span><span class="n">gap</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">gap_tol</span><span class="o">=</span><span class="mf">0.01</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="Displaying-custom-gaps">
<h2>Displaying custom gaps<a class="headerlink" href="#Displaying-custom-gaps" title="Link to this heading"></a></h2>
<p>If you are not happy with the gaps that the plot is displaying for you or <strong>you simply want gaps that are not the smallest ones</strong>, you can always use <code class="docutils literal notranslate"><span class="pre">custom_gaps</span></code>.</p>
<p>Custom gaps should be a list where each item specifies how to draw that given gap. The key labels of each item are <code class="docutils literal notranslate"><span class="pre">from</span></code> and <code class="docutils literal notranslate"><span class="pre">to</span></code>, which specifies the k-points through which you want to draw the gap. The rest of labels are the typical styling labels: <code class="docutils literal notranslate"><span class="pre">color</span></code>, <code class="docutils literal notranslate"><span class="pre">width</span></code>…</p>
<p>For example, if we want to plot the gamma-gamma gap:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bands_plot</span><span class="o">.</span><span class="n">update_inputs</span><span class="p">(</span><span class="n">custom_gaps</span><span class="o">=</span><span class="p">[{</span><span class="s2">&quot;from&quot;</span><span class="p">:</span> <span class="s2">&quot;Gamma&quot;</span><span class="p">,</span> <span class="s2">&quot;to&quot;</span><span class="p">:</span> <span class="s2">&quot;Gamma&quot;</span><span class="p">,</span> <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;red&quot;</span><span class="p">}])</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO    Task(Task-2) nodify.node.140129811754224:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748080:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747792:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748368:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749184:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749616:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755712:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811750000:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811750384:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811753840:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756096:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756960:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756672:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811757536:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756864:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811750768:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811753456:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756432:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811753840:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811758208:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748080:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811751152:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811748080:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747792:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748368:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749184:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749616:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755712:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811890256:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811751536:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811751920:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811752304:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811752688:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811753072:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811759024:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811758688:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811758928:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811891264:node.py:get()- Evaluated because inputs changed.
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="admonition warning">
<p>Data type cannot be displayed: application/vnd.plotly.v1+json</p>
</div>
</div>
</div>
<p>Notice how we got the gap probably not where we wanted, since it would be better to have it in the middle <code class="docutils literal notranslate"><span class="pre">Gamma</span></code> point, which is more visible. Instead of the K point name, you can also pass the K value.</p>
<p>Now, you’ll be happy to know that you can easily access the k values of all labels, as they are stored as part of the attributes of the <code class="docutils literal notranslate"><span class="pre">k</span></code> coordinate in the bands dataarray:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bands_plot</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="s2">&quot;bands_data&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="o">.</span><span class="n">k</span><span class="o">.</span><span class="n">axis</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO    Task(Task-2) nodify.node.140129811748080:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755520:node.py:get()- No need to evaluate
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;showgrid&#39;: True,
 &#39;tickvals&#39;: [0.0, 0.429132, 0.858265, 1.46515, 2.208429, 2.815314],
 &#39;ticktext&#39;: [&#39;Gamma&#39;, &#39;X&#39;, &#39;M&#39;, &#39;Gamma&#39;, &#39;R&#39;, &#39;X&#39;]}
</pre></div></div>
</div>
<p>Now all we need to do is to grab the value for the second gamma point:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">axis_info</span> <span class="o">=</span> <span class="n">bands_plot</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="s2">&quot;bands_data&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="o">.</span><span class="n">k</span><span class="o">.</span><span class="n">axis</span>

<span class="n">gap_k</span> <span class="o">=</span> <span class="kc">None</span>
<span class="k">for</span> <span class="n">val</span><span class="p">,</span> <span class="n">label</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">axis_info</span><span class="p">[</span><span class="s2">&quot;tickvals&quot;</span><span class="p">],</span> <span class="n">axis_info</span><span class="p">[</span><span class="s2">&quot;ticktext&quot;</span><span class="p">]):</span>
    <span class="k">if</span> <span class="n">label</span> <span class="o">==</span> <span class="s2">&quot;Gamma&quot;</span><span class="p">:</span>
        <span class="n">gap_k</span> <span class="o">=</span> <span class="n">val</span>
<span class="n">gap_k</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO    Task(Task-2) nodify.node.140129811748080:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755520:node.py:get()- No need to evaluate
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
1.46515
</pre></div></div>
</div>
<p>And use it to build a custom gap:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bands_plot</span><span class="o">.</span><span class="n">update_inputs</span><span class="p">(</span><span class="n">custom_gaps</span><span class="o">=</span><span class="p">[{</span><span class="s2">&quot;from&quot;</span><span class="p">:</span> <span class="n">gap_k</span><span class="p">,</span> <span class="s2">&quot;to&quot;</span><span class="p">:</span> <span class="n">gap_k</span><span class="p">,</span> <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;orange&quot;</span><span class="p">}])</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO    Task(Task-2) nodify.node.140129811754224:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748080:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747792:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748368:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749184:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749616:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755712:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811750000:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811750384:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811753840:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756096:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756960:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756672:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811757536:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756864:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811750768:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811753456:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811756432:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811753840:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811758208:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748080:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811751152:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748080:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811747792:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811748368:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749184:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811749616:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811755712:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811890256:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811751536:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811751920:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811752304:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811752688:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811753072:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811747120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129811759024:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811758688:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811758928:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129811891264:node.py:get()- Evaluated because inputs changed.
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="admonition warning">
<p>Data type cannot be displayed: application/vnd.plotly.v1+json</p>
</div>
</div>
</div>
</section>
<section id="Displaying-spin-texture">
<h2>Displaying spin texture<a class="headerlink" href="#Displaying-spin-texture" title="Link to this heading"></a></h2>
<p>If your bands plot comes from a non-colinear spin calculation (or is using a <code class="docutils literal notranslate"><span class="pre">Hamiltonian</span></code> with non-colinear spin), you can pass <code class="docutils literal notranslate"><span class="pre">&quot;x&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;y&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;z&quot;</span></code> to the <code class="docutils literal notranslate"><span class="pre">spin</span></code> setting in order to get a display of the spin texture.</p>
<p>Let’s read in a hamiltonian coming from a spin orbit SIESTA calculation, which is obtained from <a class="reference external" href="https://github.com/juijan/TopoToolsSiesta/tree/master/Tutorials/Exercise/TI_02">this fantastic spin texture tutorial</a>:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sisl</span>

<span class="n">siesta_files</span> <span class="o">=</span> <span class="n">sisl</span><span class="o">.</span><span class="n">get_environ_variable</span><span class="p">(</span><span class="s2">&quot;SISL_FILES_TESTS&quot;</span><span class="p">)</span> <span class="o">/</span> <span class="s2">&quot;siesta&quot;</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">H</span> <span class="o">=</span> <span class="n">sisl</span><span class="o">.</span><span class="n">get_sile</span><span class="p">(</span><span class="n">siesta_files</span> <span class="o">/</span> <span class="s2">&quot;Bi_hexagonal&quot;</span> <span class="o">/</span> <span class="s2">&quot;Bi_hexagonal.fdf&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">read_hamiltonian</span><span class="p">()</span>
<span class="n">H</span><span class="o">.</span><span class="n">spin</span><span class="o">.</span><span class="n">is_spinorbit</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
True
</pre></div></div>
</div>
<p>Generate the path for our band structure:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">band_struct</span> <span class="o">=</span> <span class="n">sisl</span><span class="o">.</span><span class="n">BandStructure</span><span class="p">(</span>
    <span class="n">H</span><span class="p">,</span>
    <span class="n">points</span><span class="o">=</span><span class="p">[</span>
        <span class="p">[</span><span class="mf">1.0</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
        <span class="p">[</span><span class="mf">1.0</span> <span class="o">/</span> <span class="mi">3</span><span class="p">,</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="mi">3</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
        <span class="p">[</span><span class="mf">1.0</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
    <span class="p">],</span>
    <span class="n">divisions</span><span class="o">=</span><span class="mi">301</span><span class="p">,</span>
    <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;M&quot;</span><span class="p">,</span> <span class="sa">r</span><span class="s2">&quot;Gamma&quot;</span><span class="p">,</span> <span class="s2">&quot;K&quot;</span><span class="p">,</span> <span class="s2">&quot;M&quot;</span><span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<p>And finally generate the plot:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">spin_texture_plot</span> <span class="o">=</span> <span class="n">band_struct</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">bands</span><span class="p">(</span><span class="n">Erange</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="n">spin_texture_plot</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO    Task(Task-2) nodify.node.140129754996688:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129808012096:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129756855520:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129807833408:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129808096464:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129756856048:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129756855664:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129756851824:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129756845632:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129756166528:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129754995296:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129756167248:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129755949168:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129756844912:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129756060832:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129755949168:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129754992992:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129756850432:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129756161344:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129754990880:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129755949168:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756849232:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129754995296:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756060448:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129808012096:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756855520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756165568:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129808012096:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756855520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129807833408:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129808096464:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756856048:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756855664:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756851824:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129755000192:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129756669680:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129756664016:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129756671840:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129756665120:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129756670064:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129755949168:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756845296:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129807611760:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129756847600:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129756855472:node.py:get()- Evaluated because inputs changed.
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="admonition warning">
<p>Data type cannot be displayed: application/vnd.plotly.v1+json</p>
</div>
</div>
</div>
<p>Now it’s time to add spin texture to these bands. Remember the section on styling bands? If you haven’t checked it, take a quick look at it, because it will come handy now. The main point to take from that section for our purpose here is that each key in the styles accepts a callable.</p>
<p>As in other cases through the <code class="docutils literal notranslate"><span class="pre">sisl.viz</span></code> module, we provide callables that will work out of the box for the most common styling. In this case, what we need is the <code class="docutils literal notranslate"><span class="pre">SpinMoment</span></code> node. We will import it and use it simply by specifying the axis.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sisl.viz.data_sources</span><span class="w"> </span><span class="kn">import</span> <span class="n">SpinMoment</span>

<span class="n">spin_texture_plot</span><span class="o">.</span><span class="n">update_inputs</span><span class="p">(</span><span class="n">bands_style</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="n">SpinMoment</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">),</span> <span class="s2">&quot;width&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>

<span class="c1"># We hide the legend so that the colorbar can be easily seen.</span>
<span class="n">spin_texture_plot</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span><span class="n">showlegend</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO    Task(Task-2) nodify.node.140129754996688:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129808012096:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756855520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129807833408:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129808096464:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756856048:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756855664:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756851824:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756845632:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129756166528:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129754995296:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756675728:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129756167248:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129755949168:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756844912:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756060832:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129755949168:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129754992992:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756850432:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756161344:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129754990880:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129755949168:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756849232:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129754995296:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756060448:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129808012096:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756855520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756165568:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129808012096:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756855520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129807833408:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129808096464:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756856048:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756855664:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756851824:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129755000192:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756669680:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756664016:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756671840:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756665120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756670064:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129755949168:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756845296:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129807611760:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129756847600:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129756855472:node.py:get()- Evaluated because inputs changed.
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="admonition warning">
<p>Data type cannot be displayed: application/vnd.plotly.v1+json</p>
</div>
</div>
</div>
<p>There is nothing magic about the <code class="docutils literal notranslate"><span class="pre">SpinMoment</span></code> node. If you pass a dummy callable as we did in the styling section, you will see that the bands data now contains a <code class="docutils literal notranslate"><span class="pre">spin_moments</span></code> variable since it comes from a non-colinear calculation. It is just a matter of grabbing that variable:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">color</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Dummy function to see what we receive.&quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">return</span> <span class="s2">&quot;green&quot;</span>


<span class="n">spin_texture_plot</span><span class="o">.</span><span class="n">update_inputs</span><span class="p">(</span><span class="n">bands_style</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="n">color</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO    Task(Task-2) nodify.node.140129754996688:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129808012096:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756855520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129807833408:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129808096464:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756856048:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756855664:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756851824:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756845632:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129756166528:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129754995296:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756167248:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129755949168:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756844912:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756060832:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129755949168:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129754992992:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756850432:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756161344:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129754990880:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129755949168:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756849232:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129754995296:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756060448:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129808012096:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756855520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756165568:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129808012096:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756855520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129807833408:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129808096464:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756856048:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756855664:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756851824:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129755000192:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756669680:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756664016:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756671840:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756665120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756670064:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129755949168:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756845296:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129807611760:node.py:get()- Evaluated because inputs changed.
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;xarray.Dataset&gt; Size: 99kB
Dimensions:       (k: 301, band: 8, axis: 3)
Coordinates:
  * band          (band) int32 32B 26 27 28 29 30 31 32 33
  * k             (k) float64 2kB 0.0 0.006683 0.01337 ... 1.996 2.003 2.01
  * axis          (axis) &lt;U1 12B &#39;x&#39; &#39;y&#39; &#39;z&#39;
Data variables:
    E             (k, band) float64 19kB nan nan -1.338 ... 0.7595 nan nan
    ipr           (k, band) float64 19kB 0.1542 0.1542 0.1094 ... 0.1024 0.1024
    spin_moments  (k, axis, band) float64 58kB 0.1368 -0.1368 ... 0.7325 -0.7325
Attributes:
    bz:        BandStructure{nk: 301,\n Lattice{nsc: [5 5 1],\n  origin=[0.00...
    parent:    Hamiltonian{non-zero: 6476, orthogonal: False,\n Spin{spin-orb...
    spin:      Spin{spin-orbit}
    geometry:  Geometry{na: 2, no: 28,\n Atoms{species: 1,\n  Atom{Bi, Z: 83,...
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO    Task(Task-2) nodify.node.140129756847600:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129756855472:node.py:get()- Evaluated because inputs changed.
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="admonition warning">
<p>Data type cannot be displayed: application/vnd.plotly.v1+json</p>
</div>
</div>
</div>
<p>Note that, as shown in the styling section, you can use the <code class="docutils literal notranslate"><span class="pre">colorscale</span></code> input to change the colorscale, or use the <code class="docutils literal notranslate"><span class="pre">SpinMoment</span></code> node for the other styling keys. For example, we can set the width of the band to display whether there is some spin moment, and the color can show the sign.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">spin_texture_plot</span><span class="o">.</span><span class="n">update_inputs</span><span class="p">(</span>
    <span class="n">bands_style</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="n">SpinMoment</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">),</span> <span class="s2">&quot;width&quot;</span><span class="p">:</span> <span class="nb">abs</span><span class="p">(</span><span class="n">SpinMoment</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">))</span> <span class="o">*</span> <span class="mi">40</span><span class="p">}</span>
<span class="p">)</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span><span class="n">showlegend</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s2">&quot;png&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO    Task(Task-2) nodify.node.140129754996688:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129808012096:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756855520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129807833408:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129808096464:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756856048:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756855664:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756851824:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756845632:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129756166528:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129754995296:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129755948448:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129755944320:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129756412576:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129756160048:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129756167248:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129755949168:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756844912:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756060832:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129755949168:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129754992992:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756850432:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756161344:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129754990880:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129755949168:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756849232:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129754995296:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756060448:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129808012096:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756855520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756165568:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129808012096:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756855520:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129807833408:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129808096464:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756856048:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756855664:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756851824:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129755000192:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756669680:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756664016:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756671840:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756665120:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756670064:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129755949168:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129756845296:node.py:get()- No need to evaluate
INFO    Task(Task-2) nodify.node.140129807611760:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129756847600:node.py:get()- Evaluated because inputs changed.
INFO    Task(Task-2) nodify.node.140129756855472:node.py:get()- Evaluated because inputs changed.
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/visualization_showcase_BandsPlot_57_1.png" src="../../_images/visualization_showcase_BandsPlot_57_1.png" />
</div>
</div>
<p>Notice how we did some postprocessing to adapt the values of the spin moment to some number that is suitable for the width. This is possible thanks to the magic of nodes!</p>
<p>We hope you enjoyed what you learned!</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="AtomicMatrixPlot.html" class="btn btn-neutral float-left" title="AtomicMatrixPlot" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="FatbandsPlot.html" class="btn btn-neutral float-right" title="FatbandsPlot" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2015-2025, sisl developers.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>